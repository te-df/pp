<!--============================================================================-->

<script>

/* ============================================================================
 USER DRAWER - Controla exibiÃ§Ã£o de Login/Profile no drawer do usuÃ¡rio
 ============================================================================ */
(function() {
    'use strict';

 const UserDrawer = {
 init() {
            console.log('[UserDrawer] Inicializando...');
 this.updateDrawerView();

 // Atualizar quando usuÃ¡rio logar/sair
            document.addEventListener('auth-changed', () => {
 this.updateDrawerView();
 });
 },

 /* * Atualiza a view do drawer baseado no estado de autenticaÃ§Ã£o */
 updateDrawerView() {
            const loginView = document.getElementById('login-view');
            const profileView = document.getElementById('profile-view');
            const logoutBtn = document.getElementById('logout-btn');

 if (!loginView || !profileView) return;

 if (AuthManager && AuthManager.isLoggedIn()) {
 // UsuÃ¡rio logado - mostrar perfil
                loginView.style.display = 'none';
                profileView.style.display = 'block';
                if (logoutBtn) logoutBtn.style.display = 'block';

 this.updateProfileInfo();
 } else {
 // UsuÃ¡rio nÃ£o logado - mostrar login
                loginView.style.display = 'block';
                profileView.style.display = 'none';
                if (logoutBtn) logoutBtn.style.display = 'none';
 }
 },

 /* * Atualiza informaÃ§Ãµes do perfil */
 updateProfileInfo() {
 const user = AuthManager.getCurrentUser();
 if (!user) return;

 // Avatar inicial
            const avatarInitial = document.getElementById('user-avatar-initial');
 if (avatarInitial) {
 avatarInitial.textContent = user.nome.charAt(0).toUpperCase();
 }

 // Nome
            const userName = document.getElementById('user-name-display');
 if (userName) {
 userName.textContent = user.nome;
 }

 // Role/Perfil
            const userRole = document.getElementById('user-role-display');
 if (userRole) {
 const roleLabels = {
                    'MONITOR': 'ðŸ‘¨â€âœˆï¸ Monitor',
                    'SECRETARIO': 'ðŸ‘¨â€ðŸ’¼ SecretÃ¡rio(a)',
                    'ADMIN': 'ðŸ‘¨â€ðŸ’» Administrador'
 };
 userRole.textContent = roleLabels[user.role] || user.role;
 }
 }
 };

 // Expor globalmente
 window.UserDrawer = UserDrawer;

 // Inicializar quando DOM e AuthManager estiverem prontos
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
 // Aguardar AuthManager estar disponÃ­vel
 setTimeout(() => UserDrawer.init(), 100);
 });
 } else {
 setTimeout(() => UserDrawer.init(), 100);
 }

    console.log('[UserDrawer] Script carregado');

})();

</script>