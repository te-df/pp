<!--============================================================================-->

<!--
 ============================================================================
 MENU MOBILE GRID 4x6 - INSPIRADO EM APPS NATIVOS (SAMSUNG S20 OPTIMIZED)
 ============================================================================
 Grid 4 colunas x 6 linhas com 24 botões
 - Modo Compacto (padrão): Apenas ícones grandes
 - Modo Expandido (toggle): Ícones + títulos
 - Fullscreen overlay ocupando quase toda a tela
 - Touch targets 48px+ (WCAG 2.1 AA)
 - Safe areas para notch/Dynamic Island
 ============================================================================
-->

<style>
/* ===== MENU MOBILE OVERLAY ===== */
.mobile-menu-overlay {
 position: fixed;
 inset: 0;
 background: var(--md-sys-color-surface, #121212);
 z-index: var(--z-modal, 2000);
 display: flex;
 flex-direction: column;
 transform: translateY(-100%);
 transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);
 padding: max(var(--space-2), env(safe-area-inset-top)) max(var(--space-2), env(safe-area-inset-right)) max(var(--space-2), env(safe-area-inset-bottom)) max(var(--space-2), env(safe-area-inset-left));
 overflow: hidden;
}

.mobile-menu-overlay.active {
 transform: translateY(0);
}

/* ===== HEADER DO MENU MOBILE ===== */
.mobile-menu-header {
 display: flex;
 align-items: center;
 justify-content: space-between;
 padding: var(--space-3) var(--space-2);
 border-bottom: 1px solid var(--md-sys-color-outline-variant, #333);
 flex-shrink: 0;
}

.mobile-menu-title {
 display: flex;
 align-items: center;
 gap: var(--space-3);
 font-size: 1.8rem;
 font-weight: 700;
 color: var(--md-sys-color-primary, #1e88e5);
}

.mobile-menu-close {
 min-width: 48px;
 min-height: 48px;
 display: flex;
 align-items: center;
 justify-content: center;
 background: transparent;
 border: none;
 color: var(--md-sys-color-on-surface, #fff);
 font-size: 2.4rem;
 cursor: pointer;
 border-radius: var(--radius-full, 50%);
 transition: background-color 200ms ease;
}

.mobile-menu-close:hover {
 background-color: var(--md-sys-color-surface-container-high, #2a2a2a);
}

.mobile-menu-close:active {
 transform: scale(0.95);
}

/* ===== GRID 4x6 ===== */
.mobile-menu-grid {
 display: grid;
 grid-template-columns: repeat(4, 1fr);
 gap: var(--space-2);
 padding: var(--space-3) var(--space-2);
 flex-grow: 1;
 align-content: start;
 overflow-y: auto;
 -webkit-overflow-scrolling: touch;
}

/* ===== BOTÕES DO MENU (MODO COMPACTO - PADRÃO) ===== */
.mobile-menu-btn {
 aspect-ratio: 1;
 min-height: 72px;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 gap: var(--space-1);
 background: var(--md-sys-color-surface-container, #1e1e1e);
 border: 1px solid var(--md-sys-color-outline-variant, #333);
 border-radius: var(--radius-lg, 12px);
 color: var(--md-sys-color-on-surface, #fff);
 cursor: pointer;
 transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
 position: relative;
 overflow: hidden;
 padding: var(--space-2);
}

.mobile-menu-btn:hover {
 transform: translateY(-4px) scale(1.03);
 box-shadow: var(--shadow-xl);
 background: var(--md-sys-color-surface-container-high, #2a2a2a);
}

.mobile-menu-btn:active {
 transform: translateY(-2px) scale(1.01);
}

.mobile-menu-btn.active {
 background: var(--md-sys-color-primary, #1e88e5);
 color: var(--md-sys-color-on-primary, #fff);
 border-color: var(--md-sys-color-primary, #1e88e5);
}

.mobile-menu-btn.active::after {
  content: '';
 position: absolute;
 top: 6px;
 right: 6px;
 width: 10px;
 height: 10px;
 background: #fff;
 border-radius: 50%;
 animation: pulse 2s infinite;
}

@keyframes pulse {
 0%, 100% { opacity: 1; transform: scale(1); }
 50% { opacity: 0.7; transform: scale(1.2); }
}

/* Ícones grandes no modo compacto */
.mobile-menu-btn i {
 font-size: 2.8rem;
 transition: transform 200ms ease;
}

.mobile-menu-btn:hover i {
 transform: scale(1.1);
}

/* Textos ocultos no modo compacto (padrão) */
.mobile-menu-btn span {
 display: none;
}

/* ===== MODO EXPANDIDO (COM TEXTOS) ===== */
.mobile-menu-overlay.expanded .mobile-menu-btn {
 flex-direction: row;
 justify-content: flex-start;
 aspect-ratio: auto;
 min-height: 56px;
 padding: var(--space-3);
}

.mobile-menu-overlay.expanded .mobile-menu-btn i {
 font-size: 2rem;
 width: 24px;
 text-align: center;
 flex-shrink: 0;
}

.mobile-menu-overlay.expanded .mobile-menu-btn span {
 display: block;
 font-size: 1.3rem;
 font-weight: 600;
 text-align: left;
 line-height: 1.3;
 overflow: hidden;
 text-overflow: ellipsis;
 display: -webkit-box;
 -webkit-line-clamp: 2;
 -webkit-box-orient: vertical;
}

/* ===== TOGGLE COMPACTO/EXPANDIDO ===== */
.mobile-menu-toggle {
 position: absolute;
 bottom: max(var(--space-3), env(safe-area-inset-bottom));
 right: var(--space-4);
 min-width: 56px;
 min-height: 56px;
 display: flex;
 align-items: center;
 justify-content: center;
 background: var(--md-sys-color-primary, #1e88e5);
 color: var(--md-sys-color-on-primary, #fff);
 border: none;
 border-radius: var(--radius-full, 50%);
 font-size: 2rem;
 cursor: pointer;
 box-shadow: var(--shadow-lg);
 z-index: 10;
 transition: all 200ms ease;
}

.mobile-menu-toggle:hover {
 transform: scale(1.1);
 box-shadow: var(--shadow-xl);
}

.mobile-menu-toggle:active {
 transform: scale(0.95);
}

/* Esconde no desktop */
@media (min-width: 992px) {
 .mobile-menu-overlay {
 display: none !important;
 }
}

/* Otimizações Samsung S20 (360px) */
@media (max-width: 360px) {
 .mobile-menu-btn {
 min-height: 64px;
 }

 .mobile-menu-btn i {
 font-size: 2.4rem;
 }

 .mobile-menu-grid {
 gap: var(--space-1);
 }
}

/* Landscape mobile */
@media (max-height: 500px) and (orientation: landscape) {
 .mobile-menu-grid {
 padding: var(--space-2);
 }

 .mobile-menu-btn {
 min-height: 56px;
 }
}
</style>

<!-- ===== MENU MOBILE OVERLAY ===== -->
<div id="mobile-menu-overlay-1" class="mobile-menu-overlay" role="navigation" aria-label="Menu principal mobile" aria-hidden="true">
 <!-- Header -->
  <div class="mobile-menu-header">
    <div class="mobile-menu-title">
      <i class="fas fa-shuttle-van"></i>
 <span>TE-DF</span>
 </div>
    <button class="mobile-menu-close" aria-label="Fechar menu" data-action="close">
      <i class="fas fa-times"></i>
 </button>
 </div>

 <!-- Grid 4x6 com 24 botões -->
  <div class="w-full mobile-menu-grid">
    <button class="mobile-menu-btn" data-action="dashboard" aria-label="Dashboard" title="Dashboard">
      <i class="fas fa-tachometer-alt"></i>
 <span>Dashboard</span>
 </button>

    <button class="mobile-menu-btn" data-action="frequencia" aria-label="Frequência" title="Aferição de Frequência">
      <i class="fas fa-calendar-check"></i>
 <span>Frequência</span>
 </button>

    <button class="mobile-menu-btn" data-action="rotas" aria-label="Rotas" title="Otimização de Rotas">
      <i class="fas fa-route"></i>
 <span>Rotas</span>
 </button>

    <button class="mobile-menu-btn" data-action="veiculos" aria-label="Veículos" title="Gestão de Veículos">
      <i class="fas fa-bus"></i>
 <span>Veículos</span>
 </button>

    <button class="mobile-menu-btn" data-action="predictive-maintenance" aria-label="Manutenção" title="Manutenção Preditiva">
      <i class="fas fa-tools"></i>
 <span>Manutenção</span>
 </button>

    <button class="mobile-menu-btn" data-action="utilizacao-frota" aria-label="Frota" title="Utilização da Frota">
      <i class="fas fa-chart-pie"></i>
 <span>Frota</span>
 </button>

    <button class="mobile-menu-btn" data-action="mapa" aria-label="Mapa" title="Visualização no Mapa">
      <i class="fas fa-map-marked-alt"></i>
 <span>Mapa</span>
 </button>

    <button class="mobile-menu-btn" data-action="tracking" aria-label="Rastreamento" title="Rastreamento em Tempo Real">
      <i class="fas fa-broadcast-tower"></i>
 <span>Rastreamento</span>
 </button>

    <button class="mobile-menu-btn" data-action="alunos" aria-label="Alunos" title="Gestão de Alunos">
      <i class="fas fa-users"></i>
 <span>Alunos</span>
 </button>

    <button class="mobile-menu-btn" data-action="pessoal" aria-label="Pessoal" title="Gestão de Pessoal">
      <i class="fas fa-user-tie"></i>
 <span>Pessoal</span>
 </button>

    <button class="mobile-menu-btn" data-action="faturamentos" aria-label="Faturamentos" title="Gestão de Faturamentos">
      <i class="fas fa-file-invoice-dollar"></i>
 <span>Faturamentos</span>
 </button>

    <button class="mobile-menu-btn" data-action="atestos" aria-label="Atestos" title="Atestos Administrativos">
      <i class="fas fa-certificate"></i>
 <span>Atestos</span>
 </button>

    <button class="mobile-menu-btn" data-action="relatorios" aria-label="Relatórios" title="Relatórios Gerenciais">
      <i class="fas fa-chart-bar"></i>
 <span>Relatórios</span>
 </button>

    <button class="mobile-menu-btn" data-action="ai-reports" aria-label="IA" title="Relatórios com IA">
      <i class="fas fa-robot"></i>
 <span>IA</span>
 </button>

    <button class="mobile-menu-btn" data-action="engagement" aria-label="Engajamento" title="Engajamento de Alunos">
      <i class="fas fa-heart"></i>
 <span>Engajamento</span>
 </button>

    <button class="mobile-menu-btn" data-action="incidentes" aria-label="Incidentes" title="Protocolo de Incidentes">
      <i class="fas fa-exclamation-triangle"></i>
 <span>Incidentes</span>
 </button>

    <button class="mobile-menu-btn" data-action="whatsapp" aria-label="WhatsApp" title="Comunicação WhatsApp">
      <i class="fab fa-whatsapp"></i>
 <span>WhatsApp</span>
 </button>

    <button class="mobile-menu-btn" data-action="kanban" aria-label="Kanban" title="Kanban e Slides">
      <i class="fas fa-columns"></i>
 <span>Kanban</span>
 </button>

    <button class="mobile-menu-btn" data-action="compliance-validation" aria-label="Conformidade" title="Validação de Conformidade">
      <i class="fas fa-shield-alt"></i>
 <span>Conformidade</span>
 </button>

    <button class="mobile-menu-btn" data-action="mcp-server" aria-label="MCP" title="MCP Server">
      <i class="fas fa-network-wired"></i>
 <span>MCP</span>
 </button>

    <button class="mobile-menu-btn" data-action="automacoes" aria-label="Automações" title="Automações Inteligentes">
      <i class="fas fa-magic"></i>
 <span>Automações</span>
 </button>

    <button class="mobile-menu-btn" data-action="configuracoes" aria-label="Configurações" title="Configurações do Sistema">
      <i class="fas fa-cog"></i>
 <span>Configurações</span>
 </button>

    <button class="mobile-menu-btn" data-action="eventos" aria-label="Eventos" title="Gestão de Eventos">
      <i class="fas fa-calendar-alt"></i>
 <span>Eventos</span>
 </button>

    <button class="mobile-menu-btn" data-action="teste-extensao" aria-label="Testes" title="Teste de Extensão">
      <i class="fas fa-flask"></i>
 <span>Testes</span>
 </button>
 </div>

 <!-- Botão flutuante para alternar modo compacto/expandido -->
  <button class="mobile-menu-toggle" aria-label="Alternar modo expandido" title="Mostrar/Ocultar títulos" data-action="toggle-mode">
    <i class="fas fa-bars"></i>
 </button>
</div>

<script>
(function() {
  'use strict';

 function initMobileMenuGrid() {
    const overlay = document.getElementById('mobile-menu-overlay');
 if (!overlay || overlay._initialized) return;

 // Restaura último estado ativo
    const lastSection = localStorage.getItem('app.menu.last') || 'dashboard';
    const lastButton = overlay.querySelector(`button[data-action="${lastSection}"]`);
    if (lastButton && !lastButton.dataset.action.includes('close') && !lastButton.dataset.action.includes('toggle')) {
      lastButton.classList.add('active');
 }

 // Restaura modo expandido/compacto
    const isExpanded = localStorage.getItem('app.mobile-menu.expanded') === 'true';
 if (isExpanded) {
      overlay.classList.add('expanded');
 }

 // Event delegation para todos os cliques
    overlay.addEventListener('click', (e) => {
      const btn = e.target.closest('button[data-action]');
 if (!btn) return;

 const action = btn.dataset.action;

 // Fechar menu
      if (action === 'close') {
 closeMobileMenu();
 return;
 }

 // Toggle modo expandido/compacto
      if (action === 'toggle-mode') {
        const expanded = overlay.classList.toggle('expanded');
        localStorage.setItem('app.mobile-menu.expanded', expanded);
 return;
 }

 // Navegação
      overlay.querySelectorAll('.mobile-menu-btn.active').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      localStorage.setItem('app.menu.last', action);

 // Dispara evento customizado
      document.dispatchEvent(new CustomEvent('menuAction', {
        detail: { actionId: action, source: 'mobile-grid' }
 }));

 // Fecha o menu após 300ms (tempo da animação)
 setTimeout(() => closeMobileMenu(), 300);
 });

 // Fecha com ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && overlay.classList.contains('active')) {
 closeMobileMenu();
 }
 });

 overlay._initialized = true;
    console.log('[Mobile Menu Grid 4x6] Inicializado');
 }

 // Função para abrir o menu mobile
 window.openMobileMenu = function() {
    const overlay = document.getElementById('mobile-menu-overlay');
 if (!overlay) return;

    overlay.classList.add('active');
    overlay.setAttribute('aria-hidden', 'false');
    document.body.style.overflow = 'hidden';
 };

 // Função para fechar o menu mobile
 window.closeMobileMenu = function() {
    const overlay = document.getElementById('mobile-menu-overlay');
 if (!overlay) return;

    overlay.classList.remove('active');
    overlay.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
 };

 // Inicializa quando o DOM estiver pronto
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initMobileMenuGrid);
 } else {
 initMobileMenuGrid();
 }
})();
</script>



<!--============================================================================-->