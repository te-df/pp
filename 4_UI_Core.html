<!--
 * 4_UI_Core
 * Interface principal, navega√ß√£o e componentes base
 * 
 * Consolidado em: 2025-10-21 01:14:28
 * Total de arquivos: 5
 * Total de linhas: 4686
 -->

/**
* 4_UI_Core
* Interface principal, navega√ß√£o e componentes base
*
* Consolidado em: 2025-10-21 01:14:28
* Total de arquivos: 5
* Total de linhas: 4686
*/

<!--============================================================================-->
<!-- ARQUIVO: Events.html -->
<!--============================================================================-->

<!--
 SIG-TE - Se√ß√£o de Gest√£o de Eventos
 Formul√°rios especializados para Dias M√≥veis, Reposi√ß√µes e Atividades Extracurriculares

 Integra√ß√£o:
 - Formul√°rios especializados para casos espec√≠ficos
 - Integrado com JS-Events.html via google.script.run
 - Complementa o Form-Eventos.html (CRUD Universal) para casos gerais
-->
<div class="eventos-specialized-forms">
  <div class="page-header">
    <h2 class="page-title"><i class="fas fa-calendar-alt"></i> Gest√£o de Eventos</h2>
    <p class="page-subtitle">Registre e gerencie feriados, pontos facultativos, reposi√ß√µes e atividades
      extracurriculares.</p>
  </div>
  <!-- Painel de A√ß√µes -->
  <div class="card action-panel">
    <div class="card-header">
      <h3 class="card-title"><i class="fas fa-plus-circle"></i> Registrar Novo Evento</h3>
    </div>
    <div class="card-body">
      <p>Selecione o tipo de evento que deseja registrar no calend√°rio escolar.</p>
      <div class="action-buttons horizontal">
        <button class="btn btn-primary" onclick="Eventos.showForm('holiday-form-container')">
          <i class="fas fa-calendar-times"></i> Registrar Dia M√≥vel/Feriado
        </button>
        <button class="btn btn-secondary" onclick="Eventos.showForm('makeup-form-container')">
          <i class="fas fa-calendar-check"></i> Agendar Reposi√ß√£o
        </button>
        <button class="btn btn-tertiary" onclick="Eventos.showForm('extracurricular-form-container')">
          <i class="fas fa-star"></i> Criar Atividade Extracurricular
        </button>
      </div>
    </div>
  </div>

  <!-- Formul√°rio para Dias M√≥veis / Feriados (inicialmente oculto) -->
  <div class="event-form-container form-section hidden" id="holiday-form-container">
    <div class="form-section-header">
      <h3 class="form-section-title"><i class="fas fa-calendar-times"></i> Registrar Dia M√≥vel ou Feriado</h3>
      <button class="btn-icon" onclick="Eventos.hideForm('holiday-form-container')" aria-label="Fechar formul√°rio">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <form class="event-form" id="holiday-form" onsubmit="Eventos.handleHolidaySubmit(event)">
      <div class="w-full form-grid">
        <div class="form-group">
          <label class="form-label" for="holiday-school">Escola(s) Afetada(s) *</label>
          <select class="form-control" id="holiday-school" name="schoolName" required>
            <option value="">Selecione uma escola ou "Todas"</option>
            <option value="TODAS">Todas as Escolas</option>
            <!-- Op√ß√µes de escolas ser√£o populadas dinamicamente -->
          </select>
        </div>
        <div class="form-group">
          <label class="form-label" for="holiday-date">Data do Dia M√≥vel/Feriado *</label>
          <input class="form-control" id="holiday-date" name="holidayDate" required type="date" />
        </div>
      </div>
      <div class="form-group">
        <label class="form-label" for="holiday-description">Descri√ß√£o do Evento *</label>
        <textarea class="form-control" id="holiday-description" name="description"
          placeholder="Ex: Ponto Facultativo, Feriado de Anivers√°rio da Cidade" required rows="3"></textarea>
      </div>
      <div class="action-buttons horizontal">
        <button class="btn btn-primary" type="submit">
          <i class="fas fa-save"></i> Registrar Evento
        </button>
        <button class="btn btn-secondary" type="button" onclick="Eventos.hideForm('holiday-form-container')">
          <i class="fas fa-times"></i> Cancelar
        </button>
      </div>
    </form>
  </div>

  <!-- Formul√°rio para Reposi√ß√£o de Aula (inicialmente oculto) -->
  <div class="event-form-container form-section hidden" id="makeup-form-container">
    <div class="form-section-header">
      <h3 class="form-section-title"><i class="fas fa-calendar-check"></i> Agendar Reposi√ß√£o de Aula</h3>
      <button class="btn-icon" onclick="Eventos.hideForm('makeup-form-container')" aria-label="Fechar formul√°rio">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <form class="event-form" id="makeup-form" onsubmit="Eventos.handleMakeupSubmit(event)">
      <div class="w-full form-grid">
        <div class="form-group">
          <label class="form-label" for="makeup-school">Escola *</label>
          <select class="form-control" id="makeup-school" name="schoolName" required>
            <option value="">Selecione uma escola</option>
            <!-- Op√ß√µes de escolas -->
          </select>
        </div>
        <div class="form-group">
          <label class="form-label" for="makeup-original-date">Data da Aula Perdida *</label>
          <input class="form-control" id="makeup-original-date" name="originalDate" required type="date" />
        </div>
        <div class="form-group">
          <label class="form-label" for="makeup-new-date">Nova Data da Aula *</label>
          <input class="form-control" id="makeup-new-date" name="newDate" required type="date" />
        </div>
        <div class="form-group">
          <label class="form-label" for="makeup-time">Hor√°rio da Reposi√ß√£o *</label>
          <input class="form-control" id="makeup-time" name="time" required type="time" />
        </div>
      </div>
      <div class="form-group">
        <label class="form-label" for="makeup-reason">Motivo da Reposi√ß√£o *</label>
        <textarea class="form-control" id="makeup-reason" name="reason"
          placeholder="Ex: Reposi√ß√£o referente ao feriado de..." required rows="3"></textarea>
      </div>
      <div class="action-buttons horizontal">
        <button class="btn btn-primary" type="submit">
          <i class="fas fa-save"></i> Agendar Reposi√ß√£o
        </button>
        <button class="btn btn-secondary" type="button" onclick="Eventos.hideForm('makeup-form-container')">
          <i class="fas fa-times"></i> Cancelar
        </button>
      </div>
    </form>
  </div>

  <!-- Formul√°rio para Atividade Extracurricular (inicialmente oculto) -->
  <div class="event-form-container form-section hidden" id="extracurricular-form-container">
    <div class="form-section-header">
      <h3 class="form-section-title"><i class="fas fa-star"></i> Criar Atividade Extracurricular</h3>
      <button class="btn-icon" onclick="Eventos.hideForm('extracurricular-form-container')"
        aria-label="Fechar formul√°rio">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <form class="event-form" id="extracurricular-form" onsubmit="Eventos.handleExtracurricularSubmit(event)">
      <div class="form-group">
        <label class="form-label" for="extracurricular-title">T√≠tulo da Atividade *</label>
        <input class="form-control" id="extracurricular-title" name="activityTitle"
          placeholder="Ex: Feira de Ci√™ncias, Campeonato de Futebol" required type="text" />
      </div>
      <div class="w-full form-grid">
        <div class="form-group">
          <label class="form-label" for="extracurricular-school">Escola *</label>
          <select class="form-control" id="extracurricular-school" name="schoolName" required>
            <option value="">Selecione uma escola</option>
            <!-- Op√ß√µes de escolas -->
          </select>
        </div>
        <div class="form-group">
          <label class="form-label" for="extracurricular-type">Tipo de Atividade *</label>
          <select class="form-control" id="extracurricular-type" name="activityType" required>
            <option value="">Selecione o tipo</option>
            <option value="ESPORTIVA">Esportiva</option>
            <option value="CULTURAL">Cultural</option>
            <option value="ACADEMICA">Acad√™mica</option>
            <option value="SOCIAL">Social</option>
            <option value="OUTROS">Outros</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label" for="extracurricular-date">Data da Atividade *</label>
          <input class="form-control" id="extracurricular-date" name="activityDate" required type="date" />
        </div>
        <div class="form-group">
          <label class="form-label" for="extracurricular-time">Hor√°rio *</label>
          <input class="form-control" id="extracurricular-time" name="activityTime" required type="time" />
        </div>
      </div>
      <div class="form-group">
        <label class="form-label" for="extracurricular-description">Descri√ß√£o da Atividade</label>
        <textarea class="form-control" id="extracurricular-description" name="description"
          placeholder="Descreva a atividade, objetivos, p√∫blico-alvo, etc." rows="3"></textarea>
      </div>
      <div class="action-buttons horizontal">
        <button class="btn btn-primary" type="submit">
          <i class="fas fa-save"></i> Registrar Atividade
        </button>
        <button class="btn btn-secondary" type="button" onclick="Eventos.hideForm('extracurricular-form-container')">
          <i class="fas fa-times"></i> Cancelar
        </button>
      </div>
    </form>
  </div>

  <!-- Lista de Eventos Recentes -->
  <div class="card data-table-container" style="margin-top: var(--space-6)">
    <div class="card-header data-table-header">
      <h3 class="card-title data-table-title"><i class="fas fa-list-ul"></i> Eventos Registrados</h3>
      <div class="data-table-controls">
        <button class="btn btn-sm btn-secondary" onclick="Eventos.loadEvents()">
          <i class="fas fa-sync-alt"></i> Atualizar Lista
        </button>
      </div>
    </div>
    <div class="card-body" style="padding: 0">
      <div class="events-list" id="events-list">
        <div class="loading-placeholder">
          <i class="fas fa-spinner fa-spin"></i>
          <p>Carregando eventos...</p>
        </div>
      </div>
    </div>
  </div>

  <style>
    .event-form-container {
      transition: all 0.4s ease-in-out;
      max-height: 0;
      overflow: hidden;
      padding: 0;
      border: none;
      margin-bottom: 0;
    }

    .event-form-container.active {
      max-height: 1000px;
      /* Altura suficiente para o conte√∫do */
      padding: var(--space-6);
      border: 1px solid var(--outline-variant);
      margin-bottom: var(--space-6);
    }

    .form-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-4);
    }

    .action-buttons.horizontal {
      flex-direction: row;
      justify-content: flex-end;
    }
  </style>
</div>

<!--============================================================================-->
<!-- ARQUIVO: PWA-Install-Instructions.html -->
<!--============================================================================-->

<!-- Componente de Instru√ß√µes de Instala√ß√£o PWA -->
<style>
  .pwa-install-banner {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, var(--md-sys-color-primary) 0%, var(--md-sys-color-tertiary) 100%);
    color: white;
    padding: 16px 24px;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    display: none;
    flex-direction: row;
    align-items: center;
    gap: 16px;
    max-width: 500px;
    width: 90%;
    z-index: 10000;
    animation: slideUp 0.3s ease-out;
  }

  .pwa-install-banner.show {
    display: flex;
  }

  @keyframes slideUp {
    from {
      transform: translateX(-50%) translateY(100px);
      opacity: 0;
    }

    to {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
  }

  .pwa-install-icon {
    font-size: 48px;
    line-height: 1;
  }

  .pwa-install-content {
    flex: 1;
  }

  .pwa-install-title {
    font-size: 16px;
    font-weight: 700;
    margin: 0 0 4px 0;
  }

  .pwa-install-text {
    font-size: 13px;
    opacity: 0.9;
    margin: 0;
  }

  .pwa-install-actions {
    display: flex;
    gap: 8px;
  }

  .pwa-install-btn {
    background: white;
    color: var(--md-sys-color-primary);
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .pwa-install-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  .pwa-install-btn.secondary {
    background: rgba(255, 255, 255, 0.2);
    color: white;
  }

  .pwa-install-btn.secondary:hover {
    background: rgba(255, 255, 255, 0.3);
  }

  @media (max-width: 600px) {
    .pwa-install-banner {
      flex-direction: column;
      text-align: center;
      bottom: 10px;
    }

    .pwa-install-actions {
      width: 100%;
      flex-direction: column;
    }

    .pwa-install-btn {
      width: 100%;
    }
  }
</style>

<!-- Banner de Instala√ß√£o -->
<div id="pwa-install-banner" class="pwa-install-banner">
  <div class="pwa-install-icon">üì±</div>
  <div class="pwa-install-content">
    <h3 class="pwa-install-title">Instalar TE-DF</h3>
    <p class="pwa-install-text">Instale o app para acesso r√°pido e uso offline</p>
  </div>
  <div class="pwa-install-actions">
    <button id="pwa-install-button" class="pwa-install-btn">Instalar</button>
    <button id="pwa-dismiss-button" class="pwa-install-btn secondary">Agora n√£o</button>
  </div>
</div>

<script>
  (function () {
    'use strict';

    // Gerenciamento do banner de instala√ß√£o PWA
    let deferredPrompt = null;
    const installBanner = document.getElementById('pwa-install-banner');
    const installButton = document.getElementById('pwa-install-button');
    const dismissButton = document.getElementById('pwa-dismiss-button');

    // Chave para localStorage
    const DISMISSED_KEY = 'pwa-install-dismissed';
    const DISMISSED_EXPIRY = 7 * 24 * 60 * 60 * 1000; // 7 dias

    // Verifica se o banner foi dispensado recentemente
    function wasDismissedRecently() {
      const dismissed = localStorage.getItem(DISMISSED_KEY);
      if (!dismissed) return false;

      const dismissedTime = parseInt(dismissed, 10);
      const now = Date.now();

      if (now - dismissedTime > DISMISSED_EXPIRY) {
        localStorage.removeItem(DISMISSED_KEY);
        return false;
      }

      return true;
    }

    // Evento beforeinstallprompt - captura o prompt de instala√ß√£o
    window.addEventListener('beforeinstallprompt', (e) => {
      console.log('üí° PWA pronto para instala√ß√£o');

      // Previne o prompt autom√°tico do navegador
      e.preventDefault();

      // Armazena o evento para uso posterior
      deferredPrompt = e;

      // Mostra o banner customizado se n√£o foi dispensado recentemente
      if (!wasDismissedRecently()) {
        setTimeout(() => {
          installBanner.classList.add('show');
        }, 2000); // Aguarda 2s ap√≥s o carregamento
      }
    });

    // Bot√£o de instala√ß√£o
    installButton.addEventListener('click', async () => {
      if (!deferredPrompt) {
        console.warn('‚ö†Ô∏è Prompt de instala√ß√£o n√£o dispon√≠vel');
        showInstallInstructions();
        return;
      }

      // Mostra o prompt de instala√ß√£o
      deferredPrompt.prompt();

      // Aguarda a escolha do usu√°rio
      const { outcome } = await deferredPrompt.userChoice;
      console.log(`üë§ Escolha do usu√°rio: ${outcome}`);

      if (outcome === 'accepted') {
        console.log('‚úÖ Usu√°rio aceitou instalar o PWA');
      } else {
        console.log('‚ùå Usu√°rio recusou instalar o PWA');
      }

      // Limpa o prompt
      deferredPrompt = null;

      // Esconde o banner
      installBanner.classList.remove('show');
    });

    // Bot√£o de dispensar
    dismissButton.addEventListener('click', () => {
      installBanner.classList.remove('show');
      localStorage.setItem(DISMISSED_KEY, Date.now().toString());
      console.log('‚ÑπÔ∏è Banner de instala√ß√£o dispensado');
    });

    // Detecta quando o app foi instalado
    window.addEventListener('appinstalled', () => {
      console.log('‚úÖ PWA instalado com sucesso!');
      installBanner.classList.remove('show');
      deferredPrompt = null;

      // Opcional: Mostrar mensagem de sucesso
      if (window.showToast) {
        window.showToast('App instalado com sucesso! üéâ', 'success');
      }
    });

    // Mostra instru√ß√µes manuais de instala√ß√£o
    function showInstallInstructions() {
      const userAgent = navigator.userAgent.toLowerCase();
      let instructions = '';

      if (userAgent.includes('chrome') || userAgent.includes('samsung')) {
        instructions = 'üì± Para instalar:\n\n1. Toque no menu (‚ãÆ) no canto superior direito\n2. Selecione "Adicionar √† tela inicial" ou "Instalar app"';
      } else if (userAgent.includes('safari')) {
        instructions = 'üì± Para instalar no Safari:\n\n1. Toque no bot√£o de compartilhar (‚ñ°‚Üë)\n2. Selecione "Adicionar √† Tela de In√≠cio"';
      } else if (userAgent.includes('firefox')) {
        instructions = 'üì± Para instalar no Firefox:\n\n1. Toque no menu\n2. Selecione "Instalar"';
      } else {
        instructions = 'üì± Para instalar:\n\nUse o menu do seu navegador e procure por "Adicionar √† tela inicial" ou "Instalar"';
      }

      if (window.showToast) {
        window.showToast(instructions, 'info', 8000);
      } else {
        alert(instructions);
      }
    }

    // Detecta se j√° est√° instalado (modo standalone)
    if (window.matchMedia('(display-mode: standalone)').matches ||
      window.navigator.standalone === true) {
      console.log('‚úÖ App rodando em modo instalado (standalone)');

      // Opcional: Ajustar UI para modo instalado
      document.documentElement.setAttribute('data-pwa-installed', 'true');
    }

    // Log de suporte PWA
    console.log('PWA Install Component carregado');
    console.log('Service Worker suportado:', 'serviceWorker' in navigator);
    console.log('beforeinstallprompt suportado:', 'onbeforeinstallprompt' in window);
  })();
</script>

<!--============================================================================-->
<!-- ARQUIVO: index.html -->
<!--============================================================================-->

<a href="#main-content" class="skip-link">Pular para o conte√∫do principal</a>

<!-- Inclus√£o do Menu Principal -->
<?!= include('main-menu') ?>

<!-- Inclus√£o do Menu Gigante Mobile -->
<?!= include('main-menu-mobile-grid-4x6') ?>

<header class="app-header">
  <div class="container">
    <div class="header-content">
      <div class="header-row-1">
        <button <button aria-label="Abrir painel de tarefas em andamento" class="btn-icon"
          data-drawer-target="projects-drawer" title="Tarefas em Andamento" type="button">
          <i class="fas fa-person-running" aria-hidden="true"></i>
        </button>
        <button aria-label="Buscar na base de dados" class="btn-icon" data-drawer-target="search-drawer"
          title="Buscar (Ctrl+K)" type="button">
          <i class="fas fa-search" aria-hidden="true"></i>
        </button>
        <button aria-label="Assistente IA" class="btn-icon" data-drawer-target="chatbot-drawer"
          title="Assistente IA (Ctrl+/)" type="button">
          <i class="fas fa-comment-dots" aria-hidden="true"></i>
        </button>
        <button aria-label="Notifica√ß√µes" class="btn-icon" data-drawer-target="notifications-drawer"
          title="Notifica√ß√µes" type="button">
          <i class="fas fa-bell" aria-hidden="true"></i>
          <span class="notification-badge hidden" aria-live="polite" aria-atomic="true"></span>
        </button>
        <button aria-label="Autenticar / Perfil do Usu√°rio" class="btn-icon" data-drawer-target="user-drawer"
          id="auth-btn" title="Autenticar / Perfil do Usu√°rio" type="button">
          <li><a aria-controls="rotas-section" class="nav-btn" data-section="rotas"
              data-tooltip="Otimize trajetos e itiner√°rios do transporte escolar" href="#"><i
                class="fas fa-route"></i><span>Otimiza√ß√£o de Rotas</span></a></li>
          <li><a aria-controls="relatorios-section" class="nav-btn" data-section="relatorios"
              data-tooltip="Gere relat√≥rios detalhados sobre opera√ß√µes e desempenho" href="#"><i
                class="fas fa-chart-bar"></i><span>Relat√≥rios Mensais</span></a></li>
          <li><a aria-controls="mapa-section" class="nav-btn" data-section="mapa"
              data-tooltip="Monitore ve√≠culos e rotas em tempo real" href="#"><i
                class="fas fa-map-marked-alt"></i><span>Mapa</span></a></li>
          <li><a aria-controls="tracking-section" class="nav-btn" data-section="tracking"
              data-tooltip="Acompanhe a localiza√ß√£o dos ve√≠culos em tempo real" href="#"><i
                class="fas fa-broadcast-tower"></i><span>Rastreamento</span></a></li>
          <li><a aria-controls="veiculos-section" class="nav-btn" data-section="veiculos"
              data-tooltip="Administre a frota de √¥nibus e vans escolares" href="#"><i
                class="fas fa-bus"></i><span>Ve√≠culos</span></a></li>
          <li><a aria-controls="predictive-maintenance-section" class="nav-btn" data-section="predictive-maintenance"
              data-tooltip="Manuten√ß√£o Preditiva - Monitore e programe manuten√ß√µes preventivas da frota" href="#"><i
                class="fas fa-tools"></i><span>Manuten√ß√£o</span></a></li>
          <li><a aria-controls="gamification-section" class="nav-btn" data-section="gamification"
              data-tooltip="Incentive bom comportamento atrav√©s de pontua√ß√µes e recompensas" href="#"><i
                class="fas fa-trophy"></i><span>Gamifica√ß√£o</span></a></li>
          <li><a aria-controls="dashboard-section" class="nav-btn" data-section="dashboard"
              data-tooltip="Vis√£o geral com m√©tricas e indicadores principais" href="#"><i
                class="fas fa-tachometer-alt"></i><span>Dashboard</span></a></li>
          <li><a aria-controls="kanban-section" class="nav-btn" data-section="kanban"
              data-tooltip="Gerencie tarefas e crie slides para reuni√µes" href="#"><i
                class="fas fa-columns"></i><span>Kanban e Slides</span></a></li>
          <li><a aria-controls="compliance-validation-section" class="nav-btn" data-section="compliance-validation"
              data-tooltip="Valida√ß√£o de conformidade legal e regulamenta√ß√µes do transporte escolar" href="#"><i
                class="fas fa-shield-alt"></i><span>Conformidade</span></a></li>
          <li><a aria-controls="utilizacao-frota-section" class="nav-btn" data-section="utilizacao-frota"
              data-tooltip="An√°lise de Utiliza√ß√£o da Frota - Monitore efici√™ncia e desempenho dos ve√≠culos" href="#"><i
                class="fas fa-chart-pie"></i><span>Utiliza√ß√£o da Frota</span></a></li>
          <li><a aria-controls="faturamentos-section" class="nav-btn" data-section="faturamentos"
              data-tooltip="Controle financeiro e cobran√ßas do transporte escolar" href="#"><i
                class="fas fa-file-invoice-dollar"></i><span>Faturamentos</span></a></li>
          <li><a aria-controls="atestos-section" class="nav-btn" data-section="atestos"
              data-tooltip="Controle de atestados m√©dicos e justificativas de aus√™ncia" href="#"><i
                class="fas fa-certificate"></i><span>Atestos</span></a></li>
          <li><a aria-controls="ai-reports-section" class="nav-btn" data-section="ai-reports"
              data-tooltip="An√°lises preditivas e insights automatizados" href="#"><i
                class="fas fa-robot"></i><span>Relat√≥rios IA</span></a></li>
          <li><a aria-controls="engagement-section" class="nav-btn" data-section="engagement"
              data-tooltip="Monitore satisfa√ß√£o e envolvimento dos usu√°rios" href="#"><i
                class="fas fa-heart"></i><span>Engajamento</span></a></li>
          <li><a aria-controls="incidentes-section" class="nav-btn" data-section="incidentes"
              data-tooltip="Registre e acompanhe ocorr√™ncias e problemas" href="#"><i
                class="fas fa-exclamation-triangle"></i><span>Incidentes</span></a></li>
          <li><a aria-controls="whatsapp-section" class="nav-btn" data-section="whatsapp"
              data-tooltip="Comunica√ß√£o automatizada com pais e respons√°veis" href="#"><i
                class="fab fa-whatsapp"></i><span>WhatsApp</span></a></li>
          <li><a aria-controls="mcp-server-section" class="nav-btn" data-section="mcp-server"
              data-tooltip="Configura√ß√µes avan√ßadas de conectividade e integra√ß√µes" href="#"><i
                class="fas fa-network-wired"></i><span>MCP Server</span></a></li>
          <li><a aria-controls="automacoes-section" class="nav-btn" data-section="automacoes"
              data-tooltip="Configure processos automatizados e workflows" href="#"><i
                class="fas fa-magic"></i><span>Automa√ß√µes</span></a></li>
          <li><a aria-controls="configuracoes-section" class="nav-btn" data-section="configuracoes"
              data-tooltip="Personalize par√¢metros e prefer√™ncias da aplica√ß√£o" href="#"><i
                class="fas fa-cog"></i><span>Configura√ß√µes</span></a></li>
          <li><a aria-controls="eventos-section" class="nav-btn" data-section="eventos"
              data-tooltip="Gerenciamento de eventos e datas importantes" href="#"><i
                class="fas fa-calendar-alt"></i><span>Eventos</span></a></li>
          <li><a aria-controls="alunos-section" class="nav-btn" data-section="alunos"
              data-tooltip="Gerencie informa√ß√µes dos estudantes" href="#"><i
                class="fas fa-users"></i><span>Alunos</span></a></li>
          <li><a aria-controls="pessoal-section" class="nav-btn" data-section="pessoal"
              data-tooltip="Administre motoristas e monitores" href="#"><i
                class="fas fa-user-tie"></i><span>Pessoal</span></a></li>
          </ul>
      </div>
      </nav>

      <!-- Backdrops espec√≠ficos para cada drawer -->
      <div class="drawer-backdrop" id="search-drawer-backdrop" aria-hidden="true"></div>
      <div class="drawer-backdrop" id="chatbot-drawer-backdrop" aria-hidden="true"></div>
      <div class="drawer-backdrop" id="notifications-drawer-backdrop" aria-hidden="true"></div>
      <div class="drawer-backdrop" id="user-drawer-backdrop" aria-hidden="true"></div>
      <div class="drawer-backdrop" id="projects-drawer-backdrop" aria-hidden="true"></div>

      <!-- Inclus√£o modular dos drawers -->
      <?!= include('Drawer-Search') ?>
      <?!= include('Drawer-Chatbot') ?>
      <?!= include('Drawer-Notifications') ?>
      <?!= include('Drawer-User') ?>
      <?!= include('Drawer-Projects') ?>

      <main class="app-main" id="app-main">
        <div class="app-content container" id="main-content">
          <!-- ============================================================================ -->
          <!-- SE√á√ïES DA APLICA√á√ÉO (SPA) -->
          <!-- O conte√∫do de cada se√ß√£o √© gerenciado pelo JS (CRUDManagerUniversal ou l√≥gica customizada) -->
          <!-- ============================================================================ -->

          <!-- 1. Frequ√™ncia (Implementa√ß√£o Customizada) -->
          <section id="frequencia-section" class="section active">
            <div class="page-header section-header-standardized color-green">
              <div class="section-title-icon"><i class="fas fa-calendar-check"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Registro de Frequ√™ncia</h2>
                <p class="page-subtitle">Registre a presen√ßa dos alunos no transporte escolar para uma rota e data
                  espec√≠fica.</p>
              </div>
            </div>

            <!-- ===================================================
 AI INSIGHT CARDS - FREQU√äNCIA
 =================================================== -->
            <div class="w-full cards-grid cards-grid-lg gap-lg mb-5">
              <!-- AI Card: An√°lise de Tend√™ncias -->
              <div class="ai-insight-card gradient-purple">
                <i class="ai-icon-bg fas fa-chart-line"></i>
                <div class="ai-content">
                  <i class="ai-icon fas fa-chart-line"></i>
                  <h4 class="ai-title">An√°lise de Tend√™ncias</h4>
                  <p class="ai-description">Taxa de frequ√™ncia m√©dia nos √∫ltimos 30 dias: <strong>94.7%</strong>.
                    Identificados 3 padr√µes de aus√™ncia recorrente.</p>
                  <div class="ai-badges">
                    <span class="badge"><i class="fas fa-arrow-up"></i> Tend√™ncia Positiva</span>
                    <span class="badge"><i class="fas fa-robot"></i> IA Ativa</span>
                  </div>
                </div>
              </div>

              <!-- AI Card: Alertas Preditivos -->
              <div class="ai-insight-card gradient-pink">
                <i class="ai-icon-bg fas fa-bell"></i>
                <div class="ai-content">
                  <i class="ai-icon fas fa-bell"></i>
                  <h4 class="ai-title">Alertas Preditivos</h4>
                  <p class="ai-description">2 estudantes com risco de aus√™ncia hoje baseado em padr√µes hist√≥ricos.
                    Notifica√ß√µes autom√°ticas enviadas.</p>
                  <div class="ai-badges">
                    <span class="badge"><i class="fas fa-exclamation-triangle"></i> 2 Alertas</span>
                    <span class="badge"><i class="fab fa-whatsapp"></i> WhatsApp Enviado</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- ===================================================
 ALERTAS IMPORTANTES
 =================================================== -->
            <div class="alert alert-danger mb-4" role="alert" style="border-left: 4px solid var(--md-sys-color-error)">
              <i class="fas fa-exclamation-triangle"></i>
              <div>
                <strong>PENALIDADES AUTOM√ÅTICAS ATIVAS:</strong>
                <ul class="text-small" style="margin: var(--space-2) 0 0 var(--space-6)">
                  <li><strong>3 atrasos no m√™s:</strong> Exclus√£o autom√°tica do transporte</li>
                  <li><strong>10 faltas injustificadas:</strong> Suspens√£o (Portaria SEDF n¬∫ 192/2019)</li>
                  <li><strong>1 m√™s de faltas consecutivas:</strong> Exclus√£o autom√°tica</li>
                  <li><strong>Indisciplina/vandalismo:</strong> An√°lise pelo Conselho Tutelar</li>
                  <li><strong>Exce√ß√£o de Inclus√£o:</strong> Alunos cadeirantes n√£o s√£o exclu√≠dos automaticamente por
                    faltas, garantindo a continuidade do transporte especializado.</li>
                </ul>
              </div>
            </div>

            <div class="alert alert-info mb-4" role="alert">
              <i class="fas fa-info-circle"></i>
              <div>
                <strong>Fundamenta√ß√£o Legal - Portaria n¬∫ 20 de 10/01/2022:</strong>
                <p class="mt-2 text-small">As informa√ß√µes constantes nas planilhas de controle de frequ√™ncia dos alunos
                  s√£o de inteira responsabilidade das unidades escolares. As UEs devem conferir e somente atestar o
                  documento via SEI caso as informa√ß√µes sejam condizentes com os controles de frequ√™ncia realizados pela
                  escola.</p>
              </div>
            </div>

            <div class="alert alert-warning mb-4" role="alert">
              <i class="fas fa-exclamation-triangle"></i>
              <div>
                <strong>Lei Complementar n¬∫ 840/2011 - Art. 181 e 183:</strong>
                <p class="mt-2 text-small">Prioridade ABSOLUTA: Alunos com necessidades especiais devem ser cadastrados
                  com exatid√£o. A falta de informa√ß√£o sobre adapta√ß√µes necess√°rias pode comprometer o atendimento e
                  gerar descumprimento de obriga√ß√µes legais.</p>
              </div>
            </div>

            <!-- ===================================================
 FORMUL√ÅRIO DE REGISTRO DE FREQU√äNCIA
 =================================================== -->
            <div class="card">
              <div class="card-body">
                <form id="daily-attendance-form" class="grid" style="gap: var(--space-5)">
                  <!-- Detalhes da Viagem -->
                  <fieldset>
                    <legend class="section-title-standardized mb-3"
                      style="border: none; font-size: var(--font-size-small)">
                      <i class="fas fa-route"></i> Detalhes da Viagem
                    </legend>
                    <div class="grid md:grid-cols-2 gap-4">
                      <div class="form-group">
                        <label for="frequencia-data" class="form-label">Data <span class="required">*</span></label>
                        <input type="date" class="form-control" id="frequencia-data" name="data" required>
                      </div>
                      <div class="form-group">
                        <label for="frequencia-rota" class="form-label">Rota <span class="required">*</span></label>
                        <select class="form-control" id="frequencia-rota" name="rota_id" required>
                          <option value="">Selecione a rota...</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="periodo" class="form-label">Per√≠odo <span class="required">*</span></label>
                        <select class="form-control" id="periodo" name="periodo" required>
                          <option value="IDA_MANHA" selected>Ida - Manh√£</option>
                          <option value="VOLTA_MANHA">Volta - Manh√£</option>
                          <option value="IDA_TARDE">Ida - Tarde</option>
                          <option value="VOLTA_TARDE">Volta - Tarde</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="veiculo_id" class="form-label">Ve√≠culo <span class="required">*</span></label>
                        <select class="form-control" id="veiculo_id-1" name="veiculo_id" required>
                          <option value="">Carregando...</option>
                        </select>
                      </div>
                    </div>
                  </fieldset>

                  <!-- Lista de Presen√ßa -->
                  <fieldset>
                    <legend class="section-title-standardized mb-3"
                      style="border: none; font-size: var(--font-size-small)">
                      <i class="fas fa-users"></i> Lista de Presen√ßa
                    </legend>
                    <div class="attendance-header mb-4">
                      <div class="attendance-actions">
                        <button type="button" class="btn btn-sm btn-success" id="mark-all-present"><i
                            class="fas fa-check-double"></i> Todos Presentes</button>
                        <button type="button" class="btn btn-sm btn-error" id="mark-all-absent"><i
                            class="fas fa-user-slash"></i> Todos Ausentes</button>
                      </div>
                      <div class="flex gap-4 items-center">
                        <span class="text-success text-bold">Presentes: <span id="present-count">0</span></span>
                        <span class="text-error text-bold">Ausentes: <span id="absent-count">0</span></span>
                      </div>
                    </div>
                    <div id="students-attendance-list" class="student-attendance-list">
                      <!-- A lista de alunos √© renderizada aqui pelo JS -->
                    </div>
                  </fieldset>
                </form>
              </div>
              <div class="card-footer">
                <button type="button" class="btn btn-secondary"
                  onclick="document.getElementById('daily-attendance-form').reset(); window.AttendanceManager.loadStudentsForRoute(null);">Limpar</button>
                <button type="button" class="btn btn-primary" id="submit-frequency-btn"><i class="fas fa-save"></i>
                  Salvar Frequ√™ncia</button>
              </div>
            </div>
          </section>

          <!-- Demais se√ß√µes gerenciadas pelo CRUD Universal -->
          <section id="eventos-section" class="section hidden section-standardized">
            <div class="page-header section-header-standardized color-orange">
              <div class="section-title-icon"><i class="fas fa-calendar-alt"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Eventos</h2>
                <p class="page-subtitle">Gerenciamento de eventos e datas importantes</p>
              </div>
            </div>

            <!-- Alerta: Prazo de Solicita√ß√£o de Reposi√ß√µes (Exemplo de conte√∫do espec√≠fico da se√ß√£o) -->
            <div class="alert alert-warning mb-4" role="alert">
              <i class="fas fa-clock"></i>
              <div>
                <strong>Manual UNIAE/PP - Prazos de Solicita√ß√£o:</strong>
                <p class="mt-2 text-small">
                  <strong>REPOSI√á√ÉO:</strong> M√≠nimo de 5 dias √∫teis antes da data.<br>
                  <strong>ATIVIDADES EXTRACURRICULARES:</strong> M√≠nimo de 15 dias de anteced√™ncia.<br>
                  Comunique cancelamentos imediatamente para evitar custos desnecess√°rios ao er√°rio.
                </p>
              </div>
            </div>

            <!-- Quick Stats - Eventos (Exemplo) -->
            <div class="w-full cards-grid cards-grid-md gap-md mb-5">
              <div class="stat-card gradient-purple">
                <i class="stat-icon fas fa-calendar-day"></i>
                <h3 class="stat-value">8</h3>
                <p class="stat-label">Dias M√≥veis</p>
                <small class="stat-description">Programados este ano</small>
              </div>
              <div class="stat-card gradient-blue">
                <i class="stat-icon fas fa-redo"></i>
                <h3 class="stat-value">23</h3>
                <p class="stat-label">Reposi√ß√µes</p>
                <small class="stat-description">Solicitadas este m√™s</small>
              </div>
              <div class="stat-card gradient-pink">
                <i class="stat-icon fas fa-running"></i>
                <h3 class="stat-value">12</h3>
                <p class="stat-label">Atividades Extra</p>
                <small class="stat-description">Pr√≥ximos 30 dias</small>
              </div>
            </div>

            <!-- Formul√°rios Especializados para Eventos (se houver) -->
            <?!= include('Events') ?>

            <!-- Container CRUD Universal para Eventos Gerais -->
            <div id="eventos-crud-container" class="section-standardized"></div>
          </section>

          <section id="pessoal-section" class="section hidden section-standardized">
            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-user-tie"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Gest√£o de Pessoal</h2>
                <p class="page-subtitle">Administre motoristas e monitores</p>
              </div>
            </div>
            <!-- Alerta: Substitui√ß√µes de Pessoal -->
            <div class="alert alert-info mb-4" role="alert">
              <i class="fas fa-user-clock"></i>
              <div>
                <strong>Resposta da Diretoria de Transporte Escolar (30266020):</strong>
                <p class="mt-2 text-small">"A m√£o de obra est√° no escopo da presta√ß√£o do servi√ßo e n√£o configura a
                  contrata√ß√£o exclusiva pelo posto de trabalho." Substitui√ß√µes e faltas devem ser gerenciadas pela
                  empresa contratada, garantindo continuidade do servi√ßo.</p>
              </div>
            </div>
            <!-- Quick Stats - Pessoal -->
            <div class="w-full cards-grid cards-grid-sm gap-md mb-5">
              <div class="stat-card gradient-purple">
                <i class="stat-icon fas fa-user-tie"></i>
                <h3 class="stat-value">38</h3>
                <p class="stat-label">Motoristas</p>
                <small class="stat-description">Cadastrados</small>
              </div>
              <div class="stat-card gradient-blue">
                <i class="stat-icon fas fa-user-friends"></i>
                <h3 class="stat-value">45</h3>
                <p class="stat-label">Monitores</p>
                <small class="stat-description">Cadastrados</small>
              </div>
              <div class="stat-card gradient-green">
                <i class="stat-icon fas fa-check-circle"></i>
                <h3 class="stat-value">83</h3>
                <p class="stat-label">Total Ativos</p>
                <small class="stat-description">Toda a equipe</small>
              </div>
              <div class="stat-card gradient-orange">
                <i class="stat-icon fas fa-certificate"></i>
                <h3 class="stat-value">97%</h3>
                <p class="stat-label">CNH Regular</p>
                <small class="stat-description">Documenta√ß√£o em dia</small>
              </div>
            </div>

            <!-- Form-Pessoal integrado -->
            <div class="container">
              <h2 class="page-title"><i class="fas fa-user-plus"></i> Cadastro de Pessoal</h2>
              <p class="page-subtitle">Cadastre motoristas e monitores do transporte escolar.</p>

              <!-- Alerta: Documenta√ß√£o de M√£o de Obra -->
              <div class="alert alert-info mb-4" role="alert">
                <i class="fas fa-users"></i>
                <div>
                  <strong>Termo de Refer√™ncia - Documenta√ß√£o da M√£o de Obra:</strong>
                  <p class="mt-2" style="font-size: 0.9rem">Devem ser apresentadas mensalmente: Folhas de ponto dos
                    funcion√°rios, Folha de Pagamento, Rela√ß√£o de Funcion√°rios, Vale transporte e Vale refei√ß√£o. Mantenha
                    os cadastros atualizados para garantir conformidade e pagamentos.</p>
                </div>
              </div>

              <!-- Alerta: Compet√™ncias de Monitores e Motoristas -->
              <div class="alert alert-warning mb-4" role="alert">
                <i class="fas fa-clipboard-check"></i>
                <div>
                  <strong>Manual UNIAE/PP - Compet√™ncias Obrigat√≥rias:</strong>
                  <ul style="margin: 0.5rem 0 0 1.5rem; font-size: 0.9rem; line-height: 1.6">
                    <li>Apresentar-se <strong>uniformizado e com crach√° de identifica√ß√£o</strong></li>
                    <li>Registrar e atestar presen√ßa dos estudantes na frequ√™ncia veicular</li>
                    <li>Usar <strong>di√°rio de bordo diariamente</strong> (obrigat√≥rio)</li>
                    <li><strong>N√£o permitir embarque</strong> de estudantes fora da lista oficial</li>
                    <li><strong>N√£o dar carona</strong> e <strong>n√£o transportar alunos em p√©</strong></li>
                    <li>Conferir uso correto do cinto de seguran√ßa por todos</li>
                  </ul>
                </div>
              </div>

              <div class="card">
                <form id="pessoalForm" class="card-body">
                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-user"></i> Dados Pessoais</legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="nome_completo_pessoal" class="form-label">Nome Completo *</label>
                        <input type="text" class="form-control" id="nome_completo_pessoal" name="Nome_Completo"
                          required>
                      </div>
                      <div class="form-group">
                        <label for="cpf_pessoal" class="form-label">CPF *</label>
                        <input type="text" class="form-control" id="cpf_pessoal" name="CPF" placeholder="000.000.000-00"
                          required>
                      </div>
                      <div class="form-group">
                        <label for="rg_pessoal" class="form-label">RG *</label>
                        <input type="text" class="form-control" id="rg_pessoal" name="RG" required>
                      </div>
                      <div class="form-group">
                        <label for="data_nascimento_pessoal" class="form-label">Data de Nascimento *</label>
                        <input type="date" class="form-control" id="data_nascimento_pessoal" name="Data_Nascimento"
                          required>
                      </div>
                      <div class="form-group">
                        <label for="telefone_pessoal" class="form-label">Telefone *</label>
                        <input type="tel" class="form-control" id="telefone_pessoal" name="Telefone"
                          placeholder="(00) 00000-0000" required>
                      </div>
                      <div class="form-group">
                        <label for="email_pessoal" class="form-label">E-mail *</label>
                        <input type="email" class="form-control" id="email_pessoal" name="Email" required>
                      </div>
                    </div>
                  </fieldset>

                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-briefcase"></i> Dados Profissionais
                    </legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="cargo_pessoal" class="form-label">Cargo *</label>
                        <select class="form-control" id="cargo_pessoal" name="Cargo" required
                          onchange="toggleCNHFieldsPessoal()">
                          <option value="">Selecione...</option>
                          <option value="Motorista">Motorista</option>
                          <option value="Monitor">Monitor</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="status_contrato_pessoal" class="form-label">Status do Contrato *</label>
                        <select class="form-control" id="status_contrato_pessoal" name="Status_Contrato" required>
                          <option value="ATIVO">Ativo</option>
                          <option value="INATIVO">Inativo</option>
                          <option value="AFASTADO">Afastado</option>
                          <option value="FERIAS">F√©rias</option>
                          <option value="SUSPENSO">Suspenso</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="data_admissao_pessoal" class="form-label">Data de Admiss√£o *</label>
                        <input type="date" class="form-control" id="data_admissao_pessoal" name="Data_Admissao"
                          required>
                      </div>
                    </div>
                  </fieldset>

                  <fieldset id="cnhFieldsPessoal" style="display:none">
                    <legend class="section-title-standardized"><i class="fas fa-id-card-alt"></i> Carteira Nacional de
                      Habilita√ß√£o (CNH)</legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="cnh_numero_pessoal" class="form-label">N√∫mero da CNH</label>
                        <input type="text" class="form-control" id="cnh_numero_pessoal" name="CNH_Numero">
                      </div>
                      <div class="form-group">
                        <label for="cnh_categoria_pessoal" class="form-label">Categoria da CNH</label>
                        <select class="form-control" id="cnh_categoria_pessoal" name="CNH_Categoria">
                          <option value="">Selecione...</option>
                          <option value="D">D - Transporte de Passageiros</option>
                          <option value="E">E - Transporte de Cargas e Passageiros</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="cnh_vencimento_pessoal" class="form-label">Vencimento da CNH <i
                            class="fas fa-exclamation-triangle" style="color: orange"
                            title="Documento obrigat√≥rio e essencial"></i></label>
                        <input type="date" class="form-control" id="cnh_vencimento_pessoal" name="CNH_Vencimento">
                        <small class="form-help-text">CNH vencida impede opera√ß√£o do ve√≠culo. Monitore
                          vencimentos!</small>
                      </div>
                    </div>
                  </fieldset>

                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-map-marker-alt"></i> Endere√ßo</legend>
                    <div class="w-full form-grid">
                      <div class="form-group" style="grid-column: 1 / -1">
                        <label for="endereco_pessoal" class="form-label">Endere√ßo Completo *</label>
                        <input type="text" class="form-control" id="endereco_pessoal" name="Endereco" required>
                      </div>
                      <div class="form-group">
                        <label for="cep_pessoal" class="form-label">CEP *</label>
                        <input type="text" class="form-control" id="cep_pessoal" name="CEP" placeholder="00000-000"
                          required>
                      </div>
                    </div>
                  </fieldset>

                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-first-aid"></i> Contato de Emerg√™ncia
                    </legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="emergencia_contato_pessoal" class="form-label">Nome do Contato</label>
                        <input type="text" class="form-control" id="emergencia_contato_pessoal"
                          name="Emergencia_Contato">
                      </div>
                      <div class="form-group">
                        <label for="emergencia_telefone_pessoal" class="form-label">Telefone do Contato</label>
                        <input type="tel" class="form-control" id="emergencia_telefone_pessoal"
                          name="Emergencia_Telefone" placeholder="(00) 00000-0000">
                      </div>
                    </div>
                  </fieldset>

                  <div class="card-footer">
                    <button type="button" class="btn btn-secondary" onclick="cancelarPessoal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                  </div>
                </form>
              </div>
            </div>

            <script>
              function toggleCNHFieldsPessoal() {
                const cargo = document.getElementById('cargo_pessoal').value;
                const cnhFields = document.getElementById('cnhFieldsPessoal');

                if (cargo === 'Motorista') {
                  cnhFields.style.display = 'block';
                  document.getElementById('cnh_numero_pessoal').required = true;
                  document.getElementById('cnh_categoria_pessoal').required = true;
                  document.getElementById('cnh_vencimento_pessoal').required = true;
                } else {
                  cnhFields.style.display = 'none';
                  document.getElementById('cnh_numero_pessoal').required = false;
                  document.getElementById('cnh_categoria_pessoal').required = false;
                  document.getElementById('cnh_vencimento_pessoal').required = false;
                }
              }

              function cancelarPessoal() {
                if (confirm('Deseja cancelar? Dados n√£o salvos ser√£o perdidos.')) {
                  document.getElementById('pessoalForm').reset();
                  toggleCNHFieldsPessoal();
                }
              }
            </script>

            <div id="pessoal-crud-container" class="section-standardized"></div>
          </section>

          <section id="alunos-section" class="section hidden section-standardized">
            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-users"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Gest√£o de Alunos</h2>
                <p class="page-subtitle">Gerencie informa√ß√µes e matr√≠culas dos estudantes</p>
              </div>
            </div>
            <!-- Quick Stats - Alunos -->
            <div class="w-full cards-grid cards-grid-sm gap-md mb-5">
              <div class="stat-card gradient-purple">
                <i class="stat-icon fas fa-graduation-cap"></i>
                <h3 class="stat-value">1,247</h3>
                <p class="stat-label">Alunos Ativos</p>
                <small class="stat-description">Cadastrados no sistema</small>
              </div>
              <div class="stat-card gradient-green">
                <i class="stat-icon fas fa-check-circle"></i>
                <h3 class="stat-value">94.2%</h3>
                <p class="stat-label">Taxa Frequ√™ncia</p>
                <small class="stat-description">M√©dia mensal</small>
              </div>
              <div class="stat-card gradient-blue">
                <i class="stat-icon fas fa-route"></i>
                <h3 class="stat-value">23</h3>
                <p class="stat-label">Rotas Ativas</p>
                <small class="stat-description">Cobrindo todas as UEs</small>
              </div>
              <div class="stat-card gradient-orange">
                <i class="stat-icon fas fa-exclamation-triangle"></i>
                <h3 class="stat-value">18</h3>
                <p class="stat-label">Em Acompanhamento</p>
                <small class="stat-description">Frequ√™ncia baixa</small>
              </div>
            </div>
            <!-- Alerta: Crit√©rios de Inclus√£o ---->
            <div class="alert alert-info mb-4" role="alert">
              <i class="fas fa-user-check"></i>
              <div>
                <strong>Portaria n¬∫ 192/2019 - Crit√©rios para Inclus√£o no TEL:</strong>
                <p class="mt-2 text-small">
                  <strong>Requisitos obrigat√≥rios:</strong> (I) Estudante de 4 a 17 anos; (II) Residir a mais de 2km da
                  UE; (III) Local sem transporte p√∫blico coletivo; (IV) N√£o ser benefici√°rio do Passe Livre Estudantil;
                  (V) Possuir CPF pr√≥prio. A inclus√£o no ato da matr√≠cula est√° sujeita √† exist√™ncia de percurso definido
                  e vaga no ve√≠culo (¬ß4¬∫, art. 1¬∫).
                </p>
              </div>
            </div>
            <div class="alert alert-warning mb-4" role="alert">
              <i class="fas fa-exclamation-circle"></i>
              <div>
                <strong>Art. 3¬∫ da Portaria 192/2019 - Matr√≠cula Preferencial:</strong>
                <p class="mt-2 text-small">
                  Os pais/respons√°veis que optarem por matr√≠cula em Unidade Escolar preferencial, localizada a partir de
                  2km de dist√¢ncia da resid√™ncia, devem tomar ci√™ncia no ato de matr√≠cula quanto √† impossibilidade de
                  atendimento pelo Programa de Oferta Suplementar de Transporte Escolar.
                </p>
              </div>
            </div>
            <!-- Alerta: Documenta√ß√£o Obrigat√≥ria -->
            <div class="alert alert-danger mb-4" role="alert" style="border-left: 4px solid var(--md-sys-color-error)">
              <i class="fas fa-file-contract"></i>
              <div>
                <strong>ATEN√á√ÉO LEGAL - Documenta√ß√£o Obrigat√≥ria (Manual Regional CRE-PP):</strong>
                <ul class="text-small" style="margin: var(--space-2) 0 0 var(--space-6)">
                  <li><strong>CPF do estudante</strong> em todos os cadastros</li>
                  <li><strong>Formul√°rio de Requerimento e Ades√£o</strong> assinado</li>
                  <li><strong>Verifica√ß√£o de duplicidade</strong> com Passe Livre Estudantil</li>
                  <li><strong>Comprovante de resid√™ncia</strong> para trajetos casa-escola</li>
                </ul>
              </div>
            </div>
            <!-- ===================================================
 QUICK STATS - ALUNOS
 =================================================== -->
            <div class="w-full cards-grid cards-grid-sm gap-md mb-5">
              <!-- Stat: Total de Alunos -->
              <div class="stat-card gradient-purple">
                <i class="stat-icon fas fa-users"></i>
                <h3 class="stat-value" id="stat-total-alunos">---</h3>
                <p class="stat-label">Total de Alunos</p>
              </div>

              <!-- Stat: Alunos Ativos -->
              <div class="stat-card gradient-blue">
                <i class="stat-icon fas fa-user-check"></i>
                <h3 class="stat-value" id="stat-alunos-ativos">---</h3>
                <p class="stat-label">Ativos</p>
              </div>

              <!-- Stat: Cadeirantes -->
              <div class="stat-card gradient-pink">
                <i class="stat-icon fas fa-wheelchair"></i>
                <h3 class="stat-value" id="stat-cadeirantes">---</h3>
                <p class="stat-label">Cadeirantes</p>
              </div>

              <!-- Stat: Aguardando Vaga -->
              <div class="stat-card gradient-orange">
                <i class="stat-icon fas fa-clock"></i>
                <h3 class="stat-value" id="stat-aguardando-vaga">---</h3>
                <p class="stat-label">Aguardando Vaga</p>
              </div>
            </div>

            <!-- Form-Alunos integrado -->
            <div class="form-container">
              <!-- Alerta: Crit√©rios de Atendimento -->
              <div class="alert alert-info mb-4" role="alert">
                <i class="fas fa-info-circle"></i>
                <div>
                  <strong>Portaria n¬∫ 192/2019 - Crit√©rios para Transporte Escolar:</strong>
                  <p class="mt-2" style="font-size: 0.9rem">O estudante deve ter de 4 a 17 anos, residir a mais de 2km
                    da UE, em local sem transporte p√∫blico, n√£o ser benefici√°rio do Passe Livre Estudantil e possuir CPF
                    pr√≥prio. Inclus√£o sujeita √† exist√™ncia de percurso e vaga no ve√≠culo.</p>
                </div>
              </div>

              <!-- Alerta: Penalidades e Responsabilidades -->
              <div class="alert alert-warning mb-4" role="alert">
                <i class="fas fa-exclamation-triangle"></i>
                <div>
                  <strong>Manual UNIAE/PP - Penalidades Importantes:</strong>
                  <ul style="margin: 0.5rem 0 0 1.5rem; font-size: 0.9rem; line-height: 1.6">
                    <li><strong>10 faltas injustificadas</strong> (consecutivas ou alternadas) = Suspens√£o do transporte
                    </li>
                    <li><strong>1 m√™s de faltas consecutivas</strong> n√£o justificadas = Exclus√£o do aluno</li>
                    <li><strong>Vedado usar transporte apenas na ida ou apenas na volta</strong> (exceto situa√ß√µes
                      avaliadas pela GCOTE)</li>
                    <li><strong>Menor de 12 anos:</strong> Respons√°vel deve acompanhar embarque/desembarque diariamente
                    </li>
                    <li><strong>Cadastro ativo no Passe Livre:</strong> Exclus√£o imediata do transporte locado</li>
                  </ul>
                </div>
              </div>

              <form id="aluno-form" class="card-body" onsubmit="handleFormSubmit(event)">
                <fieldset>
                  <legend class="section-title-standardized"><i class="fas fa-user"></i> Dados Pessoais</legend>
                  <div class="w-full form-grid">
                    <div class="form-group">
                      <label for="nome_completo" class="form-label">Nome Completo *</label>
                      <input type="text" class="form-control" id="nome_completo" name="Nome_Completo" required>
                    </div>
                    <div class="form-group">
                      <label for="ra_aluno" class="form-label">RA do Aluno *</label>
                      <input type="text" class="form-control" id="ra_aluno" name="RA_Aluno" required>
                    </div>
                    <div class="form-group">
                      <label for="data_nascimento" class="form-label">Data de Nascimento *</label>
                      <input type="date" class="form-control" id="data_nascimento" name="Data_Nascimento" required
                        onchange="calcularIdade()">
                      <small class="form-help-text" id="idade-info"></small>
                    </div>
                    <div class="form-group">
                      <label for="cpf" class="form-label">CPF * <i class="fas fa-exclamation-triangle"
                          style="color: var(--md-sys-color-error)"
                          title="Obrigat√≥rio para uso do transporte escolar"></i></label>
                      <input type="text" class="form-control" id="cpf" name="CPF" placeholder="000.000.000-00" required>
                      <small class="form-help-text"
                        style="color: var(--md-sys-color-error)"><strong>Obrigat√≥rio:</strong> CPF pr√≥prio do estudante
                        (Portaria 192/2019)</small>
                    </div>
                    <div class="form-group">
                      <label for="rg" class="form-label">RG</label>
                      <input type="text" class="form-control" id="rg" name="RG">
                    </div>
                  </div>
                </fieldset>

                <fieldset>
                  <legend class="section-title-standardized"><i class="fas fa-school"></i> Dados Escolares</legend>
                  <div class="w-full form-grid">
                    <div class="form-group">
                      <label for="escola" class="form-label">Escola *</label>
                      <input type="text" class="form-control" id="escola" name="Escola" required>
                    </div>
                    <div class="form-group">
                      <label for="serie_ano" class="form-label">S√©rie/Ano *</label>
                      <input type="text" class="form-control" id="serie_ano" name="Serie_Ano" placeholder="Ex: 8¬∫ Ano"
                        required>
                    </div>
                    <div class="form-group">
                      <label for="turno" class="form-label">Turno *</label>
                      <select class="form-control" id="turno" name="Turno" required>
                        <option value="">Selecione...</option>
                        <option value="Matutino">Matutino</option>
                        <option value="Vespertino">Vespertino</option>
                        <option value="Integral">Integral</option>
                        <option value="Noturno">Noturno</option>
                      </select>
                    </div>
                  </div>
                </fieldset>

                <fieldset>
                  <legend class="section-title-standardized"><i class="fas fa-map-marker-alt"></i> Endere√ßo</legend>
                  <div class="w-full form-grid">
                    <div class="form-group">
                      <label for="endereco_residencial" class="form-label">Endere√ßo Residencial * <i
                          class="fas fa-info-circle" title="Dist√¢ncia m√≠nima de 2km da escola"></i></label>
                      <input type="text" class="form-control" id="endereco_residencial" name="Endereco_Residencial"
                        required>
                      <small class="form-help-text">O aluno deve residir a mais de 2km da unidade escolar</small>
                    </div>
                    <div class="form-group">
                      <label for="cep" class="form-label">CEP *</label>
                      <input type="text" class="form-control" id="cep" name="CEP" placeholder="00000-000" required>
                    </div>
                    <div class="form-group">
                      <label for="bairro" class="form-label">Bairro *</label>
                      <input type="text" class="form-control" id="bairro" name="Bairro" required>
                    </div>
                  </div>
                </fieldset>

                <fieldset>
                  <legend class="section-title-standardized"><i class="fas fa-bus"></i> Informa√ß√µes de Transporte
                  </legend>
                  <div class="w-full form-grid">
                    <div class="form-group">
                      <label for="rota_id" class="form-label">Rota *</label>
                      <select class="form-control" id="rota_id" name="ID_Rota" required>
                        <option value="">Carregando rotas...</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="ponto_embarque" class="form-label">Ponto de Embarque</label>
                      <input type="text" class="form-control" id="ponto_embarque" name="Ponto_Embarque">
                    </div>
                    <div class="form-group">
                      <label for="ponto_desembarque" class="form-label">Ponto de Desembarque</label>
                      <input type="text" class="form-control" id="ponto_desembarque" name="Ponto_Desembarque">
                    </div>
                  </div>
                </fieldset>

                <fieldset>
                  <legend class="section-title-standardized"><i class="fas fa-user-friends"></i> Respons√°veis</legend>
                  <div class="w-full form-grid">
                    <div class="form-group">
                      <label for="responsavel1_nome" class="form-label">Respons√°vel 1 - Nome *</label>
                      <input type="text" class="form-control" id="responsavel1_nome" name="Responsavel1_Nome" required>
                    </div>
                    <div class="form-group">
                      <label for="responsavel1_telefone" class="form-label">Respons√°vel 1 - Telefone *</label>
                      <input type="tel" class="form-control" id="responsavel1_telefone" name="Responsavel1_Telefone"
                        placeholder="(00) 00000-0000" required>
                    </div>
                    <div class="form-group">
                      <label for="responsavel2_nome" class="form-label">Respons√°vel 2 - Nome</label>
                      <input type="text" class="form-control" id="responsavel2_nome" name="Responsavel2_Nome">
                    </div>
                    <div class="form-group">
                      <label for="responsavel2_telefone" class="form-label">Respons√°vel 2 - Telefone</label>
                      <input type="tel" class="form-control" id="responsavel2_telefone" name="Responsavel2_Telefone"
                        placeholder="(00) 00000-0000">
                    </div>
                  </div>
                </fieldset>

                <fieldset>
                  <legend class="section-title-standardized"><i class="fas fa-info-circle"></i> Informa√ß√µes Adicionais
                  </legend>
                  <div class="w-full form-grid">
                    <div class="form-group">
                      <label for="necessidades_especiais" class="form-label">Necessidades Especiais</label>
                      <select class="form-control" id="necessidades_especiais" name="Necessidades_Especiais"
                        onchange="toggleNecessidadesDetalhes()">
                        <option value="N√£o">N√£o</option>
                        <option value="Sim">Sim</option>
                      </select>
                    </div>
                    <div class="form-group" id="tipo_necessidade_group" style="display: none">
                      <label for="tipo_necessidade" class="form-label">Tipo de Necessidade <i class="fas fa-wheelchair"
                          style="color: var(--md-sys-color-primary)"></i></label>
                      <select class="form-control" id="tipo_necessidade" name="Tipo_Necessidade"
                        onchange="toggleCadeirante()">
                        <option value="">Selecione...</option>
                        <option value="Cadeirante">‚ôø Cadeirante (necessita baia)</option>
                        <option value="Mobilidade Reduzida">ü¶Ω Mobilidade Reduzida</option>
                        <option value="Visual">üëÅÔ∏è Defici√™ncia Visual</option>
                        <option value="Auditiva">üëÇ Defici√™ncia Auditiva</option>
                        <option value="Intelectual">üß† Defici√™ncia Intelectual</option>
                        <option value="TEA">üß© Transtorno do Espectro Autista</option>
                        <option value="M√∫ltipla">‚ôø Defici√™ncia M√∫ltipla</option>
                        <option value="Outra">Outra</option>
                      </select>
                    </div>
                    <div class="form-group" id="requer_baia_group" style="display: none">
                      <label for="requer_baia" class="form-label">√â Cadeirante? <span class="required">*</span></label>
                      <select class="form-control" id="requer_baia" name="Requer_Baia_Cadeirante">
                        <option value="N√£o">N√£o</option>
                        <option value="Sim">‚ôø Sim - Necessita baia espec√≠fica</option>
                      </select>
                      <small class="form-help-text" style="color: var(--md-sys-color-error)"><strong>CENSO:</strong>
                        Informar se o aluno √© cadeirante conforme Manual UNIAE/PP</small>
                    </div>
                    <div class="form-group" id="necessita_acompanhante_group" style="display: none">
                      <label for="necessita_acompanhante" class="form-label">Necessita de Acompanhante no
                        √înibus?</label>
                      <select class="form-control" id="necessita_acompanhante" name="Necessita_Acompanhante">
                        <option value="N√£o">N√£o</option>
                        <option value="Sim">Sim - Requer acompanhante</option>
                      </select>
                    </div>
                    <div class="form-group" id="laudo_medico_group" style="display: none">
                      <label for="laudo_medico" class="form-label">Apresentou Laudo M√©dico?</label>
                      <select class="form-control" id="laudo_medico" name="Laudo_Medico_Apresentado">
                        <option value="N√£o">N√£o</option>
                        <option value="Sim">Sim</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="status_ativo" class="form-label">Status</label>
                      <select class="form-control" id="status_ativo" name="Status_Ativo">
                        <option value="Ativo">Ativo</option>
                        <option value="Inativo">Inativo</option>
                        <option value="Transferido">Transferido</option>
                      </select>
                    </div>
                    <div class="form-group" style="grid-column: 1 / -1">
                      <label for="descricao_necessidade" class="form-label">Descri√ß√£o Detalhada da Necessidade</label>
                      <textarea class="form-control" id="descricao_necessidade" name="Descricao_Necessidade" rows="2"
                        placeholder="Detalhe a necessidade espec√≠fica do estudante..."></textarea>
                    </div>
                    <div class="form-group" style="grid-column: 1 / -1">
                      <label for="medicamentos" class="form-label">Medicamentos/Observa√ß√µes M√©dicas</label>
                      <textarea class="form-control" id="medicamentos" name="Medicamentos" rows="3"
                        placeholder="Liste medicamentos de uso cont√≠nuo, alergias, restri√ß√µes m√©dicas..."></textarea>
                    </div>
                  </div>
                </fieldset>

                <script>
                  function calcularIdade() {
                    const dataNasc = new Date(document.getElementById('data_nascimento').value);
                    const hoje = new Date();
                    let idade = hoje.getFullYear() - dataNasc.getFullYear();
                    const m = hoje.getMonth() - dataNasc.getMonth();
                    if (m < 0 || (m === 0 && hoje.getDate() < dataNasc.getDate())) {
                      idade--;
                    }

                    const infoEl = document.getElementById('idade-info');
                    if (idade < 12) {
                      infoEl.innerHTML = '<strong  style="color: var(--md-sys-color-warning)">‚ö†Ô∏è Menor de 12 anos: Respons√°vel deve acompanhar embarque/desembarque diariamente</strong>';
                    } else {
                      infoEl.innerHTML = `Idade: ${idade} anos`;
                    }
                  }

                  function toggleNecessidadesDetalhes() {
                    const necessidades = document.getElementById('necessidades_especiais').value;
                    const tipoGroup = document.getElementById('tipo_necessidade_group');
                    const baiaGroup = document.getElementById('requer_baia_group');
                    const acompanhanteGroup = document.getElementById('necessita_acompanhante_group');
                    const laudoGroup = document.getElementById('laudo_medico_group');

                    if (necessidades === 'Sim') {
                      tipoGroup.style.display = 'block';
                      acompanhanteGroup.style.display = 'block';
                      laudoGroup.style.display = 'block';
                    } else {
                      tipoGroup.style.display = 'none';
                      baiaGroup.style.display = 'none';
                      acompanhanteGroup.style.display = 'none';
                      laudoGroup.style.display = 'none';
                      document.getElementById('tipo_necessidade').value = '';
                      document.getElementById('requer_baia').value = 'N√£o';
                      document.getElementById('necessita_acompanhante').value = 'N√£o';
                      document.getElementById('laudo_medico').value = 'N√£o';
                    }
                  }

                  function toggleCadeirante() {
                    const tipo = document.getElementById('tipo_necessidade').value;
                    const baiaGroup = document.getElementById('requer_baia_group');

                    if (tipo === 'Cadeirante' || tipo === 'Mobilidade Reduzida' || tipo === 'M√∫ltipla') {
                      baiaGroup.style.display = 'block';
                      if (tipo === 'Cadeirante') {
                        document.getElementById('requer_baia').value = 'Sim';
                      }
                    } else {
                      baiaGroup.style.display = 'none';
                      document.getElementById('requer_baia').value = 'N√£o';
                    }
                  }
                </script>
              </form>
            </div>

            <!-- Container CRUD (J√° integrado!) -->
            <div id="alunos-crud-container" class="section-standardized"></div>
          </section>

          <section id="rotas-section" class="section hidden section-standardized">
            <div class="page-header section-header-standardized color-green">
              <div class="section-title-icon"><i class="fas fa-route"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Gest√£o de Rotas</h2>
                <p class="page-subtitle">Otimize trajetos e itiner√°rios do transporte escolar</p>
              </div>
            </div>
            <!-- Alerta: Portaria 192/2019 - Crit√©rios de Elegibilidade -->
            <div class="alert alert-info mb-4" role="alert">
              <i class="fas fa-shield-alt"></i>
              <div>
                <strong>Portaria n¬∫ 192/2019 - Crit√©rios de Atendimento:</strong>
                <p class="mt-2 text-small">O transporte escolar atende estudantes de 4 a 17 anos que residam a mais de
                  2km da unidade escolar, em localidade sem transporte p√∫blico coletivo, que n√£o sejam benefici√°rios do
                  Passe Livre Estudantil e possuam CPF pr√≥prio. A oferta √© residual e suplementar, dependendo da
                  exist√™ncia de percurso e vaga no ve√≠culo.</p>
              </div>
            </div>
            <!-- ===================================================
 QUICK STATS - ROTAS
 =================================================== -->
            <div class="w-full cards-grid gap-3 mb-5">
              <!-- Stat: Rotas Ativas -->
              <div class="card metric-card p-4"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <div class="stat-header flex mb-2" style="justify-content: space-between; align-items: start">
                  <span class="text-xs" style="opacity: 0.9">Rotas Ativas</span>
                  <div class="text-xs" style="opacity: 0.3"><i class="fas fa-route"></i></div>
                </div>
                <h3 class="stat-value font-bold" style="margin: 0; font-size: 2.8rem" id="stat-rotas-ativas">---</h3>
                <div class="stat-change positive text-xs" style="margin-top: var(--space-2); opacity: 0.9">
                  <i class="fas fa-arrow-up"></i>
                  <span id="rotas-trend">Carregando...</span>
                </div>
              </div>

              <!-- Stat: Pontualidade -->
              <div class="card metric-card p-4"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                <div class="stat-header flex mb-2" style="justify-content: space-between; align-items: start">
                  <span class="text-xs" style="opacity: 0.9; color: #1f2937">Pontualidade</span>
                  <div class="text-xs" style="opacity: 0.3; color: #1f2937"><i class="fas fa-clock"></i></div>
                </div>
                <h3 class="stat-value font-bold" style="margin: 0; font-size: 2.8rem; color: #1f2937"
                  id="stat-pontualidade">---</h3>
                <div class="stat-change positive text-xs"
                  style="margin-top: var(--space-2); opacity: 0.9; color: #1f2937">
                  <i class="fas fa-arrow-up"></i>
                  <span id="pontualidade-trend">Carregando...</span>
                </div>
              </div>

              <!-- Stat: Consumo M√©dio -->
              <div class="card metric-card p-4"
                style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: #1f2937">
                <div class="stat-header flex mb-2" style="justify-content: space-between; align-items: start">
                  <span class="text-xs" style="opacity: 0.9; color: #1f2937">Consumo M√©dio</span>
                  <div class="text-xs" style="opacity: 0.3; color: #1f2937"><i class="fas fa-gas-pump"></i></div>
                </div>
                <h3 class="stat-value font-bold" style="margin: 0; font-size: 2.8rem; color: #1f2937" id="stat-consumo">
                  ---</h3>
                <div class="stat-change negative text-xs"
                  style="margin-top: var(--space-2); opacity: 0.9; color: #1f2937">
                  <i class="fas fa-arrow-down"></i>
                  <span id="consumo-trend">Carregando...</span>
                </div>
              </div>
            </div>

            <!-- Form-Rotas integrado -->
            <div class="container">
              <h2 class="page-title"><i class="fas fa-route"></i> Cadastro de Rota</h2>
              <p class="page-subtitle">Configure uma nova rota de transporte escolar.</p>

              <div class="alert alert-info mb-4" role="alert">
                <i class="fas fa-shield-alt"></i>
                <div>
                  <strong>Portaria n¬∫ 192/2019 - Crit√©rios de Elegibilidade:</strong>
                  <p class="mt-2" style="font-size: 0.9rem">O transporte atende estudantes de 4 a 17 anos que residam a
                    mais de 2km da UE, em local sem transporte p√∫blico coletivo, n√£o benefici√°rios do Passe Livre
                    Estudantil e com CPF pr√≥prio. A oferta √© residual e suplementar, dependendo de percurso e vaga
                    dispon√≠vel.</p>
                </div>
              </div>

              <div class="card">
                <form id="rota-form" class="card-body">
                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-route"></i> Informa√ß√µes da Rota</legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="nome_rota" class="form-label">Nome da Rota *</label>
                        <input type="text" class="form-control" id="nome_rota" name="Nome_Rota"
                          placeholder="Ex: Taguatinga Norte - Escola Central" required>
                      </div>
                      <div class="form-group">
                        <label for="codigo" class="form-label">C√≥digo *</label>
                        <input type="text" class="form-control" id="codigo" name="Codigo" placeholder="Ex: TGN-EC"
                          required>
                      </div>
                      <div class="form-group" style="grid-column: 1 / -1">
                        <label for="descricao" class="form-label">Descri√ß√£o</label>
                        <textarea class="form-control" id="descricao" name="Descricao" rows="2"
                          placeholder="Descri√ß√£o da rota"></textarea>
                      </div>
                    </div>
                  </fieldset>

                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-users-cog"></i> Equipe e Ve√≠culo
                    </legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="veiculo_id" class="form-label">Ve√≠culo Designado *</label>
                        <select class="form-control" id="veiculo_id-1" name="Veiculo_ID" required>
                          <option value="">Carregando ve√≠culos...</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="motorista_id" class="form-label">Motorista *</label>
                        <select class="form-control" id="motorista_id" name="Motorista_ID" required>
                          <option value="">Carregando motoristas...</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="monitor_id" class="form-label">Monitor *</label>
                        <select class="form-control" id="monitor_id" name="Monitor_ID" required>
                          <option value="">Carregando monitores...</option>
                        </select>
                      </div>
                    </div>
                  </fieldset>

                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-clock"></i> Hor√°rios e M√©tricas</legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="horario_inicio" class="form-label">Hor√°rio de In√≠cio *</label>
                        <input type="time" class="form-control" id="horario_inicio" name="Horario_Inicio" required>
                      </div>
                      <div class="form-group">
                        <label for="horario_fim" class="form-label">Hor√°rio de T√©rmino *</label>
                        <input type="time" class="form-control" id="horario_fim" name="Horario_Fim" required>
                      </div>
                      <div class="form-group">
                        <label for="distancia_km" class="form-label">Dist√¢ncia (km) *</label>
                        <input type="number" step="0.1" class="form-control" id="distancia_km" name="Distancia_KM"
                          required>
                      </div>
                      <div class="form-group">
                        <label for="tempo_estimado" class="form-label">Tempo Estimado (minutos) *</label>
                        <input type="number" class="form-control" id="tempo_estimado" name="Tempo_Estimado" required>
                      </div>
                      <div class="form-group">
                        <label for="capacidade_maxima" class="form-label">Capacidade M√°xima de Alunos *</label>
                        <input type="number" class="form-control" id="capacidade_maxima" name="Capacidade_Maxima"
                          required>
                        <small class="form-help-text">N√£o pode exceder a capacidade do ve√≠culo designado</small>
                      </div>
                    </div>
                  </fieldset>

                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-map-marker-alt"></i> Itiner√°rio e Status
                    </legend>
                    <div class="w-full form-grid">
                      <div class="form-group" style="grid-column: 1 / -1">
                        <label for="pontos_parada" class="form-label">Pontos de Parada</label>
                        <textarea class="form-control" id="pontos_parada" name="Pontos_Parada" rows="3"
                          placeholder="Ex: P1:Terminal;P2:Shopping;P3:Escola"></textarea>
                      </div>
                      <div class="form-group">
                        <label for="nivel_dificuldade" class="form-label">N√≠vel de Dificuldade</label>
                        <select class="form-control" id="nivel_dificuldade" name="Nivel_Dificuldade">
                          <option value="Baixo">Baixo</option>
                          <option value="M√©dio">M√©dio</option>
                          <option value="Alto">Alto</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="status" class="form-label">Status</label>
                        <select class="form-control" id="status-1" name="Status">
                          <option value="Ativa">Ativa</option>
                          <option value="Inativa">Inativa</option>
                          <option value="Manuten√ß√£o">Manuten√ß√£o</option>
                        </select>
                      </div>
                      <div class="form-group" style="grid-column: 1 / -1">
                        <label for="observacoes" class="form-label">Observa√ß√µes</label>
                        <textarea class="form-control" id="observacoes-1" name="Observacoes" rows="2"></textarea>
                      </div>
                    </div>
                  </fieldset>

                  <div class="card-footer">
                    <button type="button" class="btn btn-secondary"
                      onclick="document.getElementById('rota-form').reset()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar Rota</button>
                  </div>
                </form>
              </div>
            </div>

            <div id="rotas-crud-container" class="section-standardized"></div>
          </section>

          <section id="compliance-validation-section-1" class="section hidden section-standardized">
            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-shield-alt"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Conformidade e Auditoria</h2>
                <p class="page-subtitle">Valida√ß√£o GCOTE, LGPD e Portarias SEEDF</p>
              </div>
            </div>
            <!-- Cards Grid - Compliance -->
            <div class="w-full cards-grid gap-4 mb-5">
              <!-- Score Geral -->
              <div class="card text-center"
                style="padding: var(--space-5); background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <div class="flex items-center mb-3" style="justify-content: space-between">
                  <h3 style="margin: 0; font-size: var(--font-size-small)">Score de Conformidade</h3>
                  <span class="badge" style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem">CONFORME</span>
                </div>
                <!-- Circular Progress -->
                <div
                  style="display: inline-block; position: relative; width: 140px; height: 140px; margin: var(--space-4) 0">
                  <svg width="140" height="140" style="transform: rotate(-90deg)">
                    <circle cx="70" cy="70" r="60" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="12">
                    </circle>
                    <circle cx="70" cy="70" r="60" fill="none" stroke="white" stroke-width="12" stroke-dasharray="377"
                      stroke-dashoffset="20" stroke-linecap="round"></circle>
                  </svg>
                  <div class="text-center"
                    style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%)">
                    <div class="text-xs font-bold" style="line-height: 1">94.7%</div>
                    <div class="text-xs" style="opacity: 0.9; margin-top: 0.25rem">Conforme</div>
                  </div>
                </div>
                <!-- Scores Individuais -->
                <div class="w-full grid gap-3" style="grid-template-columns: 1fr 1fr; margin-top: var(--space-3)">
                  <div>
                    <div class="font-semibold text-xs" style="opacity: 0.9">GCOTE</div>
                    <div class="font-bold" style="font-size: var(--font-size-small)">100%</div>
                  </div>
                  <div>
                    <div class="font-semibold text-xs" style="opacity: 0.9">LGPD</div>
                    <div class="font-bold" style="font-size: var(--font-size-small)">92%</div>
                  </div>
                  <div>
                    <div class="font-semibold text-xs" style="opacity: 0.9">Portarias</div>
                    <div class="font-bold" style="font-size: var(--font-size-small)">96%</div>
                  </div>
                  <div>
                    <div class="font-semibold text-xs" style="opacity: 0.9">Processos</div>
                    <div class="font-bold" style="font-size: var(--font-size-small)">91%</div>
                  </div>
                </div>
              </div>

              <!-- Checklist -->
              <div class="card" style="padding: var(--space-5)">
                <h3 class="flex items-center gap-2" style="margin: 0 0 var(--space-3) 0"><i
                    class="fas fa-clipboard-check"></i> Checklist de Conformidade</h3>
                <div class="mb-4">
                  <div class="flex mb-2 text-xs" style="justify-content: space-between">
                    <span>32 de 35 requisitos atendidos</span>
                    <span class="font-semibold" style="color: #10b981">91%</span>
                  </div>
                  <div style="width: 100%; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden">
                    <div
                      style="width: 91%; height: 100%; background: linear-gradient(90deg, #10b981, #34d399); transition: width 0.3s ease">
                    </div>
                  </div>
                </div>
                <div class="flex gap-2" style="flex-direction: column">
                  <div class="flex items-center gap-2">
                    <i class="fas fa-check-circle" style="color: #10b981; font-size: var(--font-size-small)"></i>
                    <span class="text-xs">CPF obrigat√≥rio implementado</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <i class="fas fa-check-circle" style="color: #10b981; font-size: var(--font-size-small)"></i>
                    <span class="text-xs">Sistema de penalidades ativo</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <i class="fas fa-check-circle" style="color: #10b981; font-size: var(--font-size-small)"></i>
                    <span class="text-xs">Verifica√ß√£o Passe Livre</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <i class="fas fa-exclamation-triangle"
                      style="color: #f59e0b; font-size: var(--font-size-small)"></i>
                    <span class="text-xs" style="color: #f59e0b">Integra√ß√£o SEI pendente</span>
                  </div>
                </div>
              </div>
            </div>
            <div id="compliance-crud-container" class="section-standardized"></div>
          </section>

          <section id="mapa-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-map-marked-alt"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Mapa de Rastreamento</h2>
                <p class="page-subtitle">Acompanhe ve√≠culos e rotas em tempo real</p>
              </div>
            </div>
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <i class="fas fa-bus text-xs mb-2"></i>
                <h3 class="text-xs font-bold" style="margin: 0" id="stat-veiculos-rota">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Em Rota Agora</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <i class="fas fa-map-marker-alt text-xs mb-2"></i>
                <h3 class="text-xs font-bold" style="margin: 0" id="stat-pontos-parada">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Pontos de Parada</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                <i class="fas fa-satellite text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">GPS</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Rastreamento Ativo</p>
              </div>
            </div>
            <div id="mapa-crud-container" class="section-standardized"></div>
          </section>

          <section id="tracking-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-broadcast-tower"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Rastreamento de Frota</h2>
                <p class="page-subtitle">Acompanhe a localiza√ß√£o dos ve√≠culos em tempo real e gerencie viagens</p>
              </div>
            </div>
            <!-- Quick Stats - Rastreamento -->
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <i class="fas fa-bus text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">23</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Ve√≠culos em Rota</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: #1f2937">
                <i class="fas fa-pause-circle text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">3</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Ve√≠culos Parados</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <i class="fas fa-tachometer-alt text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">42 km/h</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Velocidade M√©dia</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                <i class="fas fa-satellite text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">100%</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">GPS Online</p>
              </div>
            </div>
            <!-- Mapa de Rastreamento -->
            <div class="card mb-4 flex items-center"
              style="min-height: 50vh; justify-content: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)">
              <div class="text-center" style="color: #1f2937">
                <i class="fas fa-map-marked-alt text-xs mb-3" style="color: #1f2937"></i>
                <h3 class="text-xs" style="margin: 0; color: #1f2937">Mapa de Rastreamento em Tempo Real</h3>
              </div>
            </div>
            <div id="tracking-crud-container" class="section-standardized">
            </div>
          </section>

          <section id="atestos-section-1" class="section hidden section-standardized">
            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-certificate"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Gest√£o de Atestos</h2>
                <p class="page-subtitle">Certifica√ß√£o e valida√ß√£o de documentos administrativos</p>
              </div>
            </div>
            <!-- Alerta: Processos no SEI -->
            <div class="alert alert-info mb-4" role="alert">
              <i class="fas fa-file-signature"></i>
              <div>
                <strong>Atestos via SEI-GDF:</strong>
                <p class="mt-2 text-small">Todos os atestos devem ser realizados exclusivamente atrav√©s do Sistema
                  Eletr√¥nico de Informa√ß√µes (SEI-GDF). Documentos f√≠sicos n√£o ser√£o aceitos para valida√ß√£o
                  administrativa.</p>
              </div>
            </div>
            <!-- Quick Stats - Atestos -->
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <i class="fas fa-file-signature text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937" id="stat-atestos-pendentes">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Pendentes</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <i class="fas fa-check-double text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937" id="stat-atestos-aprovados">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Aprovados</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                <i class="fas fa-calendar-check text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937" id="stat-atestos-mes">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Este M√™s</p>
              </div>
            </div>
            <div id="atestos-crud-container-1" class="section-standardized"></div>
          </section>

          <section id="veiculos-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-orange">
              <div class="section-title-icon"><i class="fas fa-bus"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Gest√£o de Ve√≠culos</h2>
                <p class="page-subtitle">Administre a frota de √¥nibus e vans escolares</p>
              </div>
            </div>
            <!-- Alerta: Documenta√ß√£o Obrigat√≥ria de Ve√≠culos -->
            <div class="alert alert-warning mb-4" role="alert">
              <i class="fas fa-file-contract"></i>
              <div>
                <strong>Documenta√ß√£o Obrigat√≥ria:</strong>
                <p class="mt-2 text-small">Mantenha atualizados: Ap√≥lice de Seguro Veicular, Comprovante de Pagamento do
                  Seguro, Vencimento IPVA e Inspe√ß√£o Veicular. A falta de documenta√ß√£o regular pode impedir o pagamento
                  dos servi√ßos prestados conforme Termo de Refer√™ncia (44012274) Itens 11.1.6 e 11.1.41.</p>
              </div>
            </div>
            <!-- Quick Stats - Ve√≠culos -->
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <i class="fas fa-bus text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937" id="stat-veiculos-total">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Total de Ve√≠culos</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                <i class="fas fa-check-circle text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937" id="stat-veiculos-ativos">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Ativos</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: #1f2937">
                <i class="fas fa-tools text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937" id="stat-veiculos-manutencao">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Em Manuten√ß√£o</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: #1f2937">
                <i class="fas fa-wheelchair text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937" id="stat-veiculos-adaptados">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Adaptados</p>
              </div>
            </div>

            <!-- Form-Veiculos integrado -->
            <div class="container">
              <h2 class="page-title"><i class="fas fa-bus"></i> Cadastro de Ve√≠culo</h2>
              <p class="page-subtitle">Adicione um novo ve√≠culo √† frota de transporte escolar.</p>

              <!-- Alerta: Documenta√ß√£o Necess√°ria -->
              <div class="alert alert-warning mb-4" role="alert">
                <i class="fas fa-exclamation-triangle"></i>
                <div>
                  <strong>Aten√ß√£o √† Documenta√ß√£o Obrigat√≥ria:</strong>
                  <p class="mt-2" style="font-size: 0.9rem">Certifique-se de manter atualizados: Ap√≥lice de Seguro,
                    IPVA, Inspe√ß√£o Veicular. Documente as pr√≥ximas manuten√ß√µes preventivas. A falta destes documentos
                    pode impedir pagamentos conforme Termo de Refer√™ncia (44012274).</p>
                </div>
              </div>

              <div class="card">
                <form id="veiculoForm" class="card-body">
                  <!-- Identifica√ß√£o -->
                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-id-card"></i> Identifica√ß√£o do Ve√≠culo
                    </legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="placa" class="form-label">Placa *</label>
                        <input type="text" class="form-control" id="placa" name="Placa" placeholder="ABC-1234" required>
                      </div>
                      <div class="form-group">
                        <label for="modelo" class="form-label">Modelo *</label>
                        <input type="text" class="form-control" id="modelo" name="Modelo" placeholder="Ex: Sprinter 515"
                          required>
                      </div>
                      <div class="form-group">
                        <label for="marca" class="form-label">Marca *</label>
                        <input type="text" class="form-control" id="marca" name="Marca" placeholder="Ex: Mercedes-Benz"
                          required>
                      </div>
                      <div class="form-group">
                        <label for="ano_fabricacao" class="form-label">Ano de Fabrica√ß√£o *</label>
                        <input type="number" class="form-control" id="ano_fabricacao" name="Ano_Fabricacao" min="1990"
                          max="2030" required>
                      </div>
                      <div class="form-group">
                        <label for="chassi" class="form-label">Chassi *</label>
                        <input type="text" class="form-control" id="chassi" name="Chassi" required>
                      </div>
                      <div class="form-group">
                        <label for="renavam" class="form-label">RENAVAM *</label>
                        <input type="text" class="form-control" id="renavam" name="Renavam" required>
                      </div>
                    </div>
                  </fieldset>

                  <!-- Especifica√ß√µes -->
                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-cogs"></i> Especifica√ß√µes</legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="capacidade" class="form-label">Capacidade de Passageiros (Sentados) *</label>
                        <input type="number" class="form-control" id="capacidade" name="Capacidade" min="1" required
                          onchange="calcularCapacidadeTotal()">
                        <small class="form-help-text">N√∫mero de assentos dispon√≠veis (excluindo baias)</small>
                      </div>
                      <div class="form-group">
                        <label for="qtd_baias_cadeirante" class="form-label">Quantidade de Baias para Cadeirantes <i
                            class="fas fa-wheelchair" style="color: var(--md-sys-color-primary)"></i></label>
                        <input type="number" class="form-control" id="qtd_baias_cadeirante" name="Qtd_Baias_Cadeirante"
                          min="0" value="0" onchange="calcularCapacidadeTotal()">
                        <small class="form-help-text" style="color: var(--md-sys-color-error)"><strong>Obrigat√≥rio para
                            ve√≠culos adaptados.</strong> Cada baia acomoda 1 cadeirante.</small>
                      </div>
                      <div class="form-group">
                        <label for="capacidade_total" class="form-label">Capacidade Total (Calculada)</label>
                        <input type="number" class="form-control" id="capacidade_total" name="Capacidade_Total" readonly
                          style="background-color: #f0f0f0">
                        <small class="form-help-text">Passageiros sentados + cadeirantes em baias</small>
                      </div>
                      <div class="form-group">
                        <label for="tipo_combustivel" class="form-label">Tipo de Combust√≠vel *</label>
                        <select class="form-control" id="tipo_combustivel" name="Tipo_Combustivel" required>
                          <option value="">Selecione...</option>
                          <option value="Diesel">Diesel</option>
                          <option value="Gasolina">Gasolina</option>
                          <option value="Etanol">Etanol</option>
                          <option value="Flex">Flex</option>
                          <option value="GNV">GNV</option>
                          <option value="El√©trico">El√©trico</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="km_atual" class="form-label">KM Atual</label>
                        <input type="number" class="form-control" id="km_atual" name="KM_Atual" value="0">
                      </div>
                    </div>
                  </fieldset>

                  <!-- Acessibilidade -->
                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-universal-access"></i> Acessibilidade e
                      Adapta√ß√µes</legend>
                    <div class="alert alert-info mb-3" role="alert">
                      <i class="fas fa-info-circle"></i>
                      <div>
                        <strong>Lei n¬∫ 13.146/2015 - Lei Brasileira de Inclus√£o (LBI):</strong>
                        <p class="mt-2" style="font-size: 0.9rem">Ve√≠culos de transporte escolar devem garantir
                          acessibilidade a estudantes com defici√™ncia ou mobilidade reduzida. Baias para cadeirantes s√£o
                          essenciais para garantir o direito √† educa√ß√£o inclusiva.</p>
                      </div>
                    </div>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="possui_elevador" class="form-label">Possui Elevador/Rampa?</label>
                        <select class="form-control" id="possui_elevador" name="Possui_Elevador">
                          <option value="N√£o">N√£o</option>
                          <option value="Elevador">Elevador Elevatoric</option>
                          <option value="Rampa">Rampa Manual</option>
                          <option value="Rampa Autom√°tica">Rampa Autom√°tica</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="sistema_fixacao" class="form-label">Sistema de Fixa√ß√£o da Cadeira?</label>
                        <select class="form-control" id="sistema_fixacao" name="Sistema_Fixacao">
                          <option value="N√£o">N√£o Possui</option>
                          <option value="Sim">Sim - Cinto de Seguran√ßa Espec√≠fico</option>
                        </select>
                      </div>
                      <div class="form-group" style="grid-column: 1 / -1">
                        <label for="outras_adaptacoes" class="form-label">Outras Adapta√ß√µes de Acessibilidade</label>
                        <textarea class="form-control" id="outras_adaptacoes" name="Outras_Adaptacoes" rows="2"
                          placeholder="Descreva outras adapta√ß√µes: barras de apoio, piso antiderrapante, sinaliza√ß√£o em braille, etc."></textarea>
                      </div>
                    </div>
                  </fieldset>

                  <!-- Documenta√ß√£o -->
                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-file-alt"></i> Documenta√ß√£o</legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="vencimento_ipva" class="form-label">Vencimento IPVA <i class="fas fa-info-circle"
                            title="Documento obrigat√≥rio para pagamento"></i></label>
                        <input type="date" class="form-control" id="vencimento_ipva" name="Vencimento_IPVA">
                        <small class="form-help-text">Manter regularizado para evitar bloqueio de pagamentos</small>
                      </div>
                      <div class="form-group">
                        <label for="vencimento_seguro" class="form-label">Vencimento Seguro <i
                            class="fas fa-info-circle" title="Ap√≥lice e comprovante s√£o obrigat√≥rios"></i></label>
                        <input type="date" class="form-control" id="vencimento_seguro" name="Vencimento_Seguro">
                        <small class="form-help-text">Ap√≥lice e comprovante de pagamento s√£o documentos
                          obrigat√≥rios</small>
                      </div>
                      <div class="form-group">
                        <label for="vencimento_inspecao" class="form-label">Vencimento Inspe√ß√£o Veicular <i
                            class="fas fa-info-circle" title="Obrigat√≥rio conforme legisla√ß√£o de tr√¢nsito"></i></label>
                        <input type="date" class="form-control" id="vencimento_inspecao" name="Vencimento_Inspecao">
                        <small class="form-help-text">Inspe√ß√£o em dia garante seguran√ßa dos estudantes</small>
                      </div>
                      <div class="form-group">
                        <label for="proxima_revisao" class="form-label">Pr√≥xima Revis√£o (KM)</label>
                        <input type="number" class="form-control" id="proxima_revisao" name="Proxima_Revisao">
                      </div>
                    </div>
                  </fieldset>
                  <!-- Status e Observa√ß√µes -->
                  <fieldset>
                    <legend class="section-title-standardized"><i class="fas fa-info-circle"></i> Status e Observa√ß√µes
                    </legend>
                    <div class="w-full form-grid">
                      <div class="form-group">
                        <label for="veiculo_adaptado" class="form-label">Ve√≠culo Adaptado? <i
                            class="fas fa-wheelchair"></i></label>
                        <select class="form-control" id="veiculo_adaptado" name="Veiculo_Adaptado"
                          onchange="alertarBaias()">
                          <option value="N√£o">N√£o</option>
                          <option value="Sim"> Sim - Possui adapta√ß√µes para acessibilidade</option>
                        </select>
                        <small class="form-help-text">Ve√≠culos adaptados possuem baias, elevador ou rampa para
                          cadeirantes</small>
                      </div>
                      <div class="form-group">
                        <label for="status" class="form-label">Status do Ve√≠culo *</label>
                        <select class="form-control" id="status-1" name="Status" required>
                          <option value="Operacional">Operacional</option>
                          <option value="Manuten√ß√£o">Em Manuten√ß√£o</option>
                          <option value="Inativo">Inativo</option>
                          <option value="Reserva">Reserva</option>
                        </select>
                      </div>
                      <div class="form-group" style="grid-column: 1 / -1">
                        <label for="observacoes" class="form-label">Observa√ß√µes</label>
                        <textarea class="form-control" id="observacoes-1" name="Observacoes" rows="3"></textarea>
                      </div>
                    </div>
                  </fieldset>

                  <div class="card-footer">
                    <button type="button" class="btn btn-secondary"
                      onclick="document.getElementById('veiculoForm').reset()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar Ve√≠culo</button>
                  </div>
                </form>
              </div>
            </div>

            <script>
              function calcularCapacidadeTotal() {
                const capacidade = parseInt(document.getElementById('capacidade').value) || 0;
                const baias = parseInt(document.getElementById('qtd_baias_cadeirante').value) || 0;
                document.getElementById('capacidade_total').value = capacidade + baias;
              }

              function alertarBaias() {
                const adaptado = document.getElementById('veiculo_adaptado').value;
                const baias = parseInt(document.getElementById('qtd_baias_cadeirante').value) || 0;

                if (adaptado === 'Sim' && baias === 0) {
                  alert(' Aten√ß√£o: Ve√≠culos adaptados devem ter ao menos 1 baia para cadeirantes. Por favor, preencha a quantidade de baias.');
                  document.getElementById('qtd_baias_cadeirante').focus();
                }
              }

              // Calcular ao carregar a p√°gina
              document.addEventListener('DOMContentLoaded', function () {
                calcularCapacidadeTotal();
              });
            </script>

            <div id="veiculos-crud-container" class="section-standardized"></div>
          </section>

          <section id="predictive-maintenance-section" class="section hidden section-standardized">
            <div class="page-header section-header-standardized color-orange">
              <div class="section-title-icon"><i class="fas fa-tools"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Manuten√ß√£o Preditiva</h2>
                <p class="page-subtitle">Monitore e programe manuten√ß√µes preventivas da frota com IA</p>
              </div>
            </div>
            <!-- Quick Stats Manuten√ß√£o -->
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <i class="fas fa-check-circle text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">38</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Ve√≠culos OK</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Sem necessidade de manuten√ß√£o</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: #1f2937">
                <i class="fas fa-wrench text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">5</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Em Manuten√ß√£o</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Previs√£o: 2-5 dias</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, var(--md-sys-color-error) 0%, #991b1b 100%); color: #1f2937">
                <i class="fas fa-exclamation-triangle text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">2</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Urgentes</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Requer aten√ß√£o imediata</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <i class="fas fa-brain text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">12</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Predi√ß√µes IA</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Pr√≥ximos 30 dias</small>
              </div>
            </div>
            <!-- Alerta: Seguran√ßa dos Estudantes -->
            <div class="alert alert-info mb-4" role="alert">
              <i class="fas fa-shield-alt"></i>
              <div>
                <strong>Prioridade: Seguran√ßa dos Estudantes:</strong>
                <p class="mt-2 text-small">A manuten√ß√£o preventiva e preditiva garante a seguran√ßa dos estudantes e
                  reduz custos operacionais. Documente todas as interven√ß√µes para apresenta√ß√£o mensal conforme exigido
                  no Termo de Refer√™ncia.</p>
              </div>
            </div>
            <!-- Alertas Preditivos -->
            <div class="card mb-4">
              <div class="card-header">
                <h3 class="flex items-center gap-2" style="margin: 0"><i class="fas fa-robot"></i> Alertas Preditivos da
                  IA</h3>
              </div>
              <div class="card-body">
                <div class="flex gap-3" style="flex-direction: column">
                  <div class="alert alert-warning flex gap-3" style="align-items: start; margin: 0">
                    <i class="fas fa-oil-can text-xs" style="flex-shrink: 0"></i>
                    <div style="flex: 1">
                      <h4 class="font-bold" style="margin: 0 0 var(--space-1) 0">√înibus 007 - Troca de √ìleo Prevista
                      </h4>
                      <p class="text-xs" style="margin: 0 0 var(--space-2) 0">IA prev√™ necessidade de troca de √≥leo em
                        5-7 dias com base em km rodados e padr√£o de uso.</p>
                      <span class="badge"
                        style="background: rgba(245, 158, 11, 0.2); color: #d97706; padding: 0.3rem 0.6rem">Confian√ßa:
                        94%</span>
                    </div>
                    <button class="btn btn-sm btn-warning">Agendar</button>
                  </div>
                  <div class="alert alert-error flex gap-3" style="align-items: start; margin: 0">
                    <i class="fas fa-tire text-xs" style="flex-shrink: 0"></i>
                    <div style="flex: 1">
                      <h4 class="font-bold" style="margin: 0 0 var(--space-1) 0">Van 003 - Desgaste Cr√≠tico de Pneus
                      </h4>
                      <p class="text-xs" style="margin: 0 0 var(--space-2) 0">Pneus dianteiros com desgaste de 87%.
                        Recomendada substitui√ß√£o urgente.</p>
                      <span class="badge"
                        style="background: rgba(220, 38, 38, 0.2); color: #991b1b; padding: 0.3rem 0.6rem">Urgente</span>
                    </div>
                    <button class="btn btn-sm"
                      style="background: var(--md-sys-color-error); color: white">Priorizar</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Form-Manutencao integrado -->
            <div class="form-manutencao-container" data-form-type="manutencao">
              <!-- Alerta: Import√¢ncia da Manuten√ß√£o Preventiva -->
              <div class="alert alert-warning mb-4" role="alert">
                <i class="fas fa-tools"></i>
                <div>
                  <strong>Manuten√ß√£o Preventiva - Seguran√ßa dos Estudantes:</strong>
                  <p class="mt-2" style="font-size: 0.9rem">Mantenha o cronograma de revis√µes em dia. Ve√≠culos com
                    manuten√ß√£o preventiva adequada reduzem acidentes e custos operacionais. Documente todas as
                    interven√ß√µes para comprova√ß√£o junto √† TCB e GCOTE.</p>
                </div>
              </div>

              <form id="form-manutencao" class="form-grid">
                <!-- Identifica√ß√£o do Servi√ßo -->
                <fieldset class="form-section full-width">
                  <legend class="section-title">
                    <i class="fas fa-wrench"></i> Identifica√ß√£o do Servi√ßo
                  </legend>

                  <div class="w-full form-grid">
                    <div class="form-group">
                      <label for="manutencao-veiculo" class="form-label">
                        Ve√≠culo <span class="required">*</span>
                      </label>
                      <select id="manutencao-veiculo" name="ID_Veiculo" class="form-control" required>
                        <option value="">Selecione o ve√≠culo...</option>
                      </select>
                    </div>

                    <div class="form-group">
                      <label for="manutencao-tipo" class="form-label">
                        Tipo de Manuten√ß√£o <span class="required">*</span>
                      </label>
                      <select id="manutencao-tipo" name="Tipo_Manutencao" class="form-control" required>
                        <option value="">Selecione...</option>
                        <option value="Preventiva">üîß Preventiva</option>
                        <option value="Corretiva">üî® Corretiva</option>
                        <option value="Emergencial">üö® Emergencial</option>
                        <option value="Preditiva">üìä Preditiva</option>
                        <option value="Revis√£o">‚úÖ Revis√£o</option>
                      </select>
                    </div>

                    <div class="form-group">
                      <label for="manutencao-prioridade" class="form-label">
                        Prioridade <span class="required">*</span>
                      </label>
                      <select id="manutencao-prioridade" name="Prioridade" class="form-control" required>
                        <option value="">Selecione...</option>
                        <option value="Baixa">üü¢ Baixa</option>
                        <option value="M√©dia">üü° M√©dia</option>
                        <option value="Alta">üü† Alta</option>
                        <option value="Cr√≠tica">üî¥ Cr√≠tica</option>
                      </select>
                    </div>

                    <div class="form-group">
                      <label for="manutencao-status" class="form-label">
                        Status <span class="required">*</span>
                      </label>
                      <select id="manutencao-status" name="Status" class="form-control" required>
                        <option value="Agendada">üìÖ Agendada</option>
                        <option value="Em Andamento">‚è≥ Em Andamento</option>
                        <option value="Conclu√≠da">‚úÖ Conclu√≠da</option>
                        <option value="Cancelada">‚ùå Cancelada</option>
                        <option value="Adiada">‚è∏Ô∏è Adiada</option>
                      </select>
                    </div>

                    <div class="form-group">
                      <label for="manutencao-data-servico" class="form-label">
                        Data do Servi√ßo <span class="required">*</span>
                      </label>
                      <input type="date" id="manutencao-data-servico" name="Data_Servico" class="form-control" required>
                    </div>

                    <div class="form-group">
                      <label for="manutencao-data-realizada" class="form-label">
                        Data Realizada
                      </label>
                      <input type="date" id="manutencao-data-realizada" name="Data_Realizada" class="form-control">
                    </div>
                  </div>
                </fieldset>

                <!-- Dados da Quilometragem -->
                <fieldset class="form-section full-width">
                  <legend class="section-title">
                    <i class="fas fa-tachometer-alt"></i> Quilometragem
                  </legend>

                  <div class="w-full form-grid">
                    <div class="form-group">
                      <label for="manutencao-km-servico" class="form-label">
                        KM no Servi√ßo <span class="required">*</span>
                      </label>
                      <input type="number" id="manutencao-km-servico" name="KM_Servico" class="form-control" min="0"
                        required placeholder="Ex: 45230">
                      <small class="form-help-text" id="manutencao-km-atual-info"></small>
                    </div>

                    <div class="form-group">
                      <label for="manutencao-proximo-km" class="form-label">
                        Pr√≥ximo Servi√ßo (KM)
                        <i class="fas fa-calculator text-info" title="Calculado automaticamente"></i>
                      </label>
                      <input type="number" id="manutencao-proximo-km" name="Proximo_Servico_KM" class="form-control"
                        readonly style="background-color: var(--surface-hover)">
                    </div>

                    <div class="form-group">
                      <label for="manutencao-proximo-data" class="form-label">
                        Pr√≥xima Data Prevista
                      </label>
                      <input type="date" id="manutencao-proximo-data" name="Proximo_Servico_Data" class="form-control">
                    </div>
                  </div>
                </fieldset>

                <!-- Descri√ß√£o do Servi√ßo -->
                <fieldset class="form-section full-width">
                  <legend class="section-title">
                    <i class="fas fa-clipboard-list"></i> Descri√ß√£o do Servi√ßo
                  </legend>

                  <div class="form-group full-width">
                    <label for="manutencao-descricao" class="form-label">
                      Descri√ß√£o Detalhada <span class="required">*</span>
                    </label>
                    <textarea id="manutencao-descricao" name="Descricao" class="form-control" rows="4" required
                      placeholder="Descreva os servi√ßos realizados ou a serem realizados..."></textarea>
                  </div>

                  <div class="form-group full-width">
                    <label for="manutencao-observacoes" class="form-label">
                      Observa√ß√µes Adicionais
                    </label>
                    <textarea id="manutencao-observacoes" name="Observacoes" class="form-control" rows="3"
                      placeholder="Informa√ß√µes complementares, problemas encontrados, recomenda√ß√µes..."></textarea>
                  </div>
                </fieldset>

                <!-- Informa√ß√µes Financeiras -->
                <fieldset class="form-section full-width">
                  <legend class="section-title">
                    <i class="fas fa-dollar-sign"></i> Informa√ß√µes Financeiras
                  </legend>

                  <div class="w-full form-grid">
                    <div class="form-group">
                      <label for="manutencao-valor" class="form-label">
                        Valor (R$) <span class="required">*</span>
                      </label>
                      <input type="number" id="manutencao-valor" name="Valor" class="form-control" min="0" step="0.01"
                        required placeholder="0,00">
                    </div>

                    <div class="form-group">
                      <label for="manutencao-fornecedor" class="form-label">
                        Fornecedor <span class="required">*</span>
                      </label>
                      <input type="text" id="manutencao-fornecedor" name="Fornecedor" class="form-control" required
                        placeholder="Nome da oficina ou fornecedor">
                    </div>

                    <div class="form-group">
                      <label for="manutencao-responsavel" class="form-label">
                        Respons√°vel pelo Servi√ßo
                      </label>
                      <input type="text" id="manutencao-responsavel" name="Responsavel" class="form-control"
                        placeholder="Nome do mec√¢nico ou respons√°vel">
                    </div>
                  </div>
                </fieldset>
              </form>
            </div>

            <div id="predictive-maintenance-crud-container" class="section-standardized"></div>
          </section>

          <section id="gamification-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-purple">
              <div class="section-title-icon"><i class="fas fa-trophy"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Gamifica√ß√£o</h2>
                <p class="page-subtitle">Conquistas e rankings de desempenho</p>
              </div>
            </div>
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-medal text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff">47</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Conquistas Desbloqueadas</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-star text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff">12,847</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Pontos Totais</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-ranking-star text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff">#3</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Posi√ß√£o no Ranking</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                <i class="fas fa-fire text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">28</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Dias de Sequ√™ncia</p>
              </div>
            </div>
            <!-- Ranking de Equipe -->
            <div class="card mb-4">
              <div class="card-header">
                <h3 class="flex items-center gap-2" style="margin: 0"><i class="fas fa-trophy"></i> Ranking da Equipe
                </h3>
              </div>
              <div class="card-body">
                <div class="flex gap-3" style="flex-direction: column">
                  <div class="flex items-center gap-3"
                    style="padding: var(--space-3); background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); border-radius: var(--radius-base)">
                    <div class="text-xs" style="color: #1f2937">ü•á</div>
                    <div style="flex: 1">
                      <h4 class="font-bold" style="margin: 0; color: #1f2937">Carlos Silva</h4>
                      <p class="text-xs opacity-80" style="margin: 0; color: #1f2937">Motorista</p>
                    </div>
                    <div style="text-align: right">
                      <div class="font-bold" style="font-size: var(--font-size-small); color: #1f2937">15,892</div>
                      <div class="text-xs" style="color: #1f2937; opacity: 0.85">pontos</div>
                    </div>
                  </div>
                  <div class="flex items-center gap-3"
                    style="padding: var(--space-3); background: linear-gradient(135deg, #c0c0c0 0%, #e8e8e8 100%); border-radius: var(--radius-base)">
                    <div class="text-xs" style="color: #1f2937">ü•à</div>
                    <div style="flex: 1">
                      <h4 class="font-bold" style="margin: 0; color: #1f2937">Ana Santos</h4>
                      <p class="text-xs opacity-80" style="margin: 0; color: #1f2937">Monitora</p>
                    </div>
                    <div style="text-align: right">
                      <div class="font-bold" style="font-size: var(--font-size-small); color: #1f2937">14,127</div>
                      <div class="text-xs" style="color: #1f2937; opacity: 0.85">pontos</div>
                    </div>
                  </div>
                  <div class="flex items-center gap-3"
                    style="padding: var(--space-3); background: linear-gradient(135deg, #cd7f32 0%, #e8a87c 100%); border-radius: var(--radius-base)">
                    <div class="text-xs" style="color: #1f2937">ü•â</div>
                    <div style="flex: 1">
                      <h4 class="font-bold" style="margin: 0; color: #1f2937">Jo√£o Oliveira</h4>
                      <p class="text-xs opacity-80" style="margin: 0; color: #1f2937">Motorista</p>
                    </div>
                    <div style="text-align: right">
                      <div class="font-bold" style="font-size: var(--font-size-small); color: #1f2937">12,847</div>
                      <div class="text-xs" style="color: #1f2937; opacity: 0.85">pontos</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Conquistas Recentes -->
            <div class="card mb-4">
              <div class="card-header">
                <h3 class="flex items-center gap-2" style="margin: 0"><i class="fas fa-award"></i> Conquistas Recentes
                </h3>
              </div>
              <div class="card-body">
                <div class="w-full cards-grid gap-3">
                  <div class="text-center"
                    style="padding: var(--space-3); background: var(--md-sys-color-surface-container); border-radius: var(--radius-base)">
                    <div class="text-xs mb-2">üèÜ</div>
                    <h4 class="text-xs font-bold" style="margin: 0">Pontualidade Perfeita</h4>
                    <p class="mt-2 text-xs" style="color: var(--md-sys-color-on-surface-variant)">30 dias sem atraso</p>
                  </div>
                  <div class="text-center"
                    style="padding: var(--space-3); background: var(--md-sys-color-surface-container); border-radius: var(--radius-base)">
                    <div class="text-xs mb-2">üíØ</div>
                    <h4 class="text-xs font-bold" style="margin: 0">100% Presen√ßa</h4>
                    <p class="mt-2 text-xs" style="color: var(--md-sys-color-on-surface-variant)">Frequ√™ncia completa
                    </p>
                  </div>
                  <div class="text-center"
                    style="padding: var(--space-3); background: var(--md-sys-color-surface-container); border-radius: var(--radius-base)">
                    <div class="text-xs mb-2">‚≠ê</div>
                    <h4 class="text-xs font-bold" style="margin: 0">Satisfa√ß√£o M√°xima</h4>
                    <p class="mt-2 text-xs" style="color: var(--md-sys-color-on-surface-variant)">Avalia√ß√£o 5 estrelas
                    </p>
                  </div>
                  <div class="text-center"
                    style="padding: var(--space-3); background: var(--md-sys-color-surface-container); border-radius: var(--radius-base)">
                    <div class="text-xs mb-2">üöÄ</div>
                    <h4 class="text-xs font-bold" style="margin: 0">Efici√™ncia Extrema</h4>
                    <p class="mt-2 text-xs" style="color: var(--md-sys-color-on-surface-variant)">-15% consumo
                      combust√≠vel</p>
                  </div>
                </div>
              </div>
            </div>
            <div id="gamification-crud-container" class="section-standardized"></div>
          </section>

          <section id="dashboard-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-tachometer-alt"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Dashboard</h2>
                <p class="page-subtitle">Vis√£o geral com m√©tricas e indicadores principais</p>
              </div>
            </div>
            <!-- ===================================================
 COMPLIANCE BANNER - IA Neural
 =================================================== -->
            <div class="compliance-banner mb-5"
              style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6; padding: var(--space-5); border-radius: var(--radius-lg); position: relative; overflow: hidden">
              <div
                style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.1; background-image: radial-gradient(circle, white 1px, transparent 1px); background-size: 20px 20px">
              </div>
              <div class="flex items-center gap-4" style="position: relative">
                <div class="text-xs" style="opacity: 0.9; color: #f3f4f6">
                  <i class="fas fa-brain"></i>
                </div>
                <div>
                  <h3 class="font-bold"
                    style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #ffffff">Sistema
                    Neural de Conformidade Ativo</h3>
                  <p class="text-xs" style="margin: 0; opacity: 0.95; color: #f3f4f6">IA monitorando continuamente
                    GCOTE, LGPD e Portarias SEEDF em tempo real</p>
                </div>
                <div class="flex items-center gap-2" style="margin-left: auto">
                  <span class="badge text-xs"
                    style="background: rgba(255,255,255,0.25); padding: 0.5rem 1rem; color: #f3f4f6">
                    <i class="fas fa-check-circle"></i> Conforme
                  </span>
                </div>
              </div>
            </div>
            <!-- ===================================================
 KPI CARDS PRINCIPAIS COM TRENDS
 =================================================== -->
            <div class="w-full cards-grid gap-4" style="margin-bottom: var(--space-6)">
              <!-- Card: Alunos Ativos -->
              <div class="kpi-card animate-slide-up metric-card">
                <div class="kpi-icon-wrapper primary">
                  <i class="fas fa-users"></i>
                </div>
                <h2 class="kpi-value" id="kpi-total-alunos">---</h2>
                <p class="kpi-label">Alunos Ativos</p>
                <div class="stat-change positive text-xs" style="margin-top: var(--space-2); color: #10b981">
                  <i class="fas fa-arrow-up"></i>
                  <span id="kpi-alunos-trend">Carregando...</span>
                </div>
              </div>

              <!-- Card: Ve√≠culos -->
              <div class="kpi-card animate-slide-up metric-card">
                <div class="kpi-icon-wrapper secondary">
                  <i class="fas fa-bus"></i>
                </div>
                <h2 class="kpi-value" id="kpi-total-veiculos">---</h2>
                <p class="kpi-label">Ve√≠culos Ativos</p>
                <div class="stat-change neutral text-xs" style="margin-top: var(--space-2); color: #6b7280">
                  <i class="fas fa-minus"></i>
                  <span id="kpi-veiculos-status">Carregando...</span>
                </div>
              </div>

              <!-- Card: Rotas -->
              <div class="kpi-card animate-slide-up metric-card">
                <div class="kpi-icon-wrapper tertiary">
                  <i class="fas fa-route"></i>
                </div>
                <h2 class="kpi-value" id="kpi-total-rotas">---</h2>
                <p class="kpi-label">Rotas Ativas</p>
                <div class="stat-change positive text-xs" style="margin-top: var(--space-2); color: #10b981">
                  <i class="fas fa-arrow-up"></i>
                  <span id="kpi-rotas-trend">Carregando...</span>
                </div>
              </div>

              <!-- Card: Motoristas -->
              <div class="kpi-card animate-slide-up metric-card">
                <div class="kpi-icon-wrapper primary">
                  <i class="fas fa-user-tie"></i>
                </div>
                <h2 class="kpi-value" id="kpi-total-motoristas">---</h2>
                <p class="kpi-label">Motoristas</p>
                <div class="stat-change neutral text-xs" style="margin-top: var(--space-2); color: #6b7280">
                  <i class="fas fa-check-circle"></i>
                  <span id="kpi-motoristas-status">Carregando...</span>
                </div>
              </div>
            </div>
            <!-- ===================================================
 ACTION CARDS - A√á√ïES R√ÅPIDAS
 =================================================== -->
            <div class="w-full cards-grid gap-3 mb-5">
              <!-- A√ß√£o: Registrar Frequ√™ncia -->
              <div class="card action-card p-4 text-center"
                style="cursor: pointer; transition: all 0.3s ease; border: 2px solid var(--md-sys-color-outline-variant)"
                onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='var(--shadow-lg)'"
                onmouseout="this.style.transform=''; this.style.boxShadow=''"
                onclick="NavigationManager.navigate('frequencia')">
                <div class="text-xs mb-2" style="color: var(--md-sys-color-primary)">
                  <i class="fas fa-clipboard-check"></i>
                </div>
                <h4 class="text-xs" style="margin: 0 0 var(--space-2) 0">Registrar Frequ√™ncia</h4>
                <p class="text-xs" style="margin: 0; color: var(--md-sys-color-on-surface-variant)">Chamada r√°pida</p>
              </div>

              <!-- A√ß√£o: Cadastrar Aluno -->
              <div class="card action-card p-4 text-center"
                style="cursor: pointer; transition: all 0.3s ease; border: 2px solid var(--md-sys-color-outline-variant)"
                onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='var(--shadow-lg)'"
                onmouseout="this.style.transform=''; this.style.boxShadow=''"
                onclick="NavigationManager.navigate('alunos')">
                <div class="text-xs mb-2" style="color: var(--md-sys-color-secondary)">
                  <i class="fas fa-user-plus"></i>
                </div>
                <h4 class="text-xs" style="margin: 0 0 var(--space-2) 0">Novo Aluno</h4>
                <p class="text-xs" style="margin: 0; color: var(--md-sys-color-on-surface-variant)">Cadastro r√°pido</p>
              </div>

              <!-- A√ß√£o: Ver Rotas -->
              <div class="card action-card p-4 text-center"
                style="cursor: pointer; transition: all 0.3s ease; border: 2px solid var(--md-sys-color-outline-variant)"
                onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='var(--shadow-lg)'"
                onmouseout="this.style.transform=''; this.style.boxShadow=''"
                onclick="NavigationManager.navigate('rotas')">
                <div class="text-xs mb-2" style="color: var(--md-sys-color-tertiary)">
                  <i class="fas fa-route"></i>
                </div>
                <h4 class="text-xs" style="margin: 0 0 var(--space-2) 0">Gerenciar Rotas</h4>
                <p class="text-xs" style="margin: 0; color: var(--md-sys-color-on-surface-variant)">Otimiza√ß√£o</p>
              </div>

              <!-- A√ß√£o: Relat√≥rios -->
              <div class="card action-card p-4 text-center"
                style="cursor: pointer; transition: all 0.3s ease; border: 2px solid var(--md-sys-color-outline-variant)"
                onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='var(--shadow-lg)'"
                onmouseout="this.style.transform=''; this.style.boxShadow=''"
                onclick="NavigationManager.navigate('relatorios')">
                <div class="text-xs mb-2" style="color: #f59e0b">
                  <i class="fas fa-chart-bar"></i>
                </div>
                <h4 class="text-xs" style="margin: 0 0 var(--space-2) 0">Relat√≥rios</h4>
                <p class="text-xs" style="margin: 0; color: var(--md-sys-color-on-surface-variant)">An√°lises</p>
              </div>
            </div>
            <!-- ===================================================
 ACESSIBILIDADE - ESTUDANTES COM NECESSIDADES ESPECIAIS
 =================================================== -->
            <div class="card mb-4">
              <div class="card-body">
                <h3 class="flex items-center mb-3" style="gap: 0.5rem; color: var(--md-sys-color-primary)">
                  <i class="fas fa-wheelchair"></i> Acessibilidade - Estudantes com Necessidades Especiais
                </h3>
                <div class="alert alert-info mb-3" role="alert">
                  <i class="fas fa-universal-access"></i>
                  <div>
                    <strong>Lei n¬∫ 13.146/2015 - Lei Brasileira de Inclus√£o:</strong>
                    <p class="mt-2 text-small">A pessoa com defici√™ncia tem direito ao transporte escolar acess√≠vel. √â
                      dever do Estado garantir sistema educacional inclusivo em todos os n√≠veis, com transporte adequado
                      √†s necessidades espec√≠ficas dos estudantes.</p>
                  </div>
                </div>
                <div class="grid md:grid-cols-4 gap-3 mb-4">
                  <!-- Estudantes Cadeirantes -->
                  <div class="card p-4"
                    style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                    <div class="flex items-center" style="justify-content: space-between">
                      <div>
                        <p class="text-xs" style="margin: 0; opacity: 0.9">Estudantes Cadeirantes</p>
                        <h2 class="mt-2 text-xs font-bold" id="dash-cadeirantes-count">-</h2>
                        <small class="opacity-80">Requerem baia espec√≠fica</small>
                      </div>
                      <i class="fas fa-wheelchair text-xs" style="opacity: 0.3"></i>
                    </div>
                  </div>
                  <!-- Ve√≠culos Adaptados -->
                  <div class="card p-4"
                    style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: #1f2937">
                    <div class="flex items-center" style="justify-content: space-between">
                      <div>
                        <p class="text-xs" style="margin: 0; opacity: 0.9; color: #1f2937">Ve√≠culos Adaptados</p>
                        <h2 class="mt-2 text-xs font-bold" style="color: #1f2937" id="dash-veiculos-adaptados-count">-
                        </h2>
                        <small class="opacity-80" style="color: #1f2937">Com baias e acessibilidade</small>
                      </div>
                      <i class="fas fa-bus text-xs" style="opacity: 0.3; color: #1f2937"></i>
                    </div>
                  </div>
                  <!-- Total de Baias -->
                  <div class="card p-4"
                    style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                    <div class="flex items-center" style="justify-content: space-between">
                      <div>
                        <p class="text-xs" style="margin: 0; opacity: 0.9; color: #1f2937">Total de Baias</p>
                        <h2 class="mt-2 text-xs font-bold" style="color: #1f2937" id="dash-baias-total">-</h2>
                        <small class="opacity-80" style="color: #1f2937">Capacidade dispon√≠vel</small>
                      </div>
                      <i class="fas fa-parking text-xs" style="opacity: 0.3; color: #1f2937"></i>
                    </div>
                  </div>
                  <!-- Taxa de Ocupa√ß√£o de Baias -->
                  <div class="card p-4"
                    style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: #1f2937">
                    <div class="flex items-center" style="justify-content: space-between">
                      <div>
                        <p class="text-xs" style="margin: 0; opacity: 0.9; color: #1f2937">Ocupa√ß√£o de Baias</p>
                        <h2 class="mt-2 text-xs font-bold" style="color: #1f2937" id="dash-ocupacao-baias">-</h2>
                        <small class="opacity-80" style="color: #1f2937">Percentual de uso</small>
                      </div>
                      <i class="fas fa-chart-pie text-xs" style="opacity: 0.3; color: #1f2937"></i>
                    </div>
                  </div>
                </div>
                <!-- Detalhamento por Tipo de Necessidade -->
                <div class="card"
                  style="padding: var(--space-3); background-color: var(--md-sys-color-surface-container-low)">
                  <h4 class="mb-3" style="color: #4b5563"><i class="fas fa-list"></i> Distribui√ß√£o por Tipo de
                    Necessidade Especial</h4>
                  <div class="grid md:grid-cols-3 gap-3">
                    <div class="flex items-center" style="gap: 0.5rem; color: #4b5563">
                      <span style="font-size: var(--font-size-small)">‚ôø</span>
                      <div>
                        <strong id="count-cadeirantes">-</strong> Cadeirantes
                      </div>
                    </div>
                    <div class="flex items-center" style="gap: 0.5rem; color: #4b5563">
                      <span style="font-size: var(--font-size-small)">ü¶Ω</span>
                      <div>
                        <strong id="count-mobilidade">-</strong> Mobilidade Reduzida
                      </div>
                    </div>
                    <div class="flex items-center" style="gap: 0.5rem; color: #4b5563">
                      <span style="font-size: var(--font-size-small)">üëÅÔ∏è</span>
                      <div>
                        <strong id="count-visual">-</strong> Defici√™ncia Visual
                      </div>
                    </div>
                    <div class="flex items-center" style="gap: 0.5rem; color: #4b5563">
                      <span style="font-size: var(--font-size-small)">üëÇ</span>
                      <div>
                        <strong id="count-auditiva">-</strong> Defici√™ncia Auditiva
                      </div>
                    </div>
                    <div class="flex items-center" style="gap: 0.5rem; color: #4b5563">
                      <span style="font-size: var(--font-size-small)">üß†</span>
                      <div>
                        <strong id="count-intelectual">-</strong> Defici√™ncia Intelectual
                      </div>
                    </div>
                    <div class="flex items-center" style="gap: 0.5rem; color: #4b5563">
                      <span style="font-size: var(--font-size-small)">üß©</span>
                      <div>
                        <strong id="count-tea">-</strong> TEA
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="dashboard-content"></div>
          </section>

          <section id="kanban-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-columns"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Kanban e Slides</h2>
                <p class="page-subtitle">Gerencie tarefas e crie slides para reuni√µes</p>
              </div>
            </div>
            <!-- Quick Stats - Kanban -->
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: #1f2937">
                <i class="fas fa-tasks text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">47</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Tarefas Ativas</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <i class="fas fa-check-circle text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">182</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Conclu√≠das (M√™s)</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <i class="fas fa-presentation text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">12</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Slides Criados</p>
              </div>
            </div>

            <div id="kanban-crud-container" class="section-standardized"></div>
          </section>

          <section id="compliance-validation-section-1" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-shield-alt"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Conformidade Legal</h2>
                <p class="page-subtitle">Valida√ß√£o de conformidade com a legisla√ß√£o do transporte escolar</p>
              </div>
            </div>
            <!-- Base Legal Consolidada -->
            <div class="card mb-4">
              <div class="card-body">
                <h3 class="flex items-center mb-3" style="gap: 0.5rem">
                  <i class="fas fa-gavel"></i> Base Legal do Transporte Escolar - DF
                </h3>
                <div class="alert alert-info mb-3" role="alert">
                  <strong><i class="fas fa-balance-scale"></i> Decreto n¬∫ 40.385/2020</strong>
                  <p class="mt-2">Transfere √† Sociedade de Transportes Coletivos de Bras√≠lia Ltda. (TCB) a incumb√™ncia
                    da gest√£o e opera√ß√£o, direta ou indiretamente, do Servi√ßo de Transporte Complementar Escolar.</p>
                </div>
                <div class="alert alert-info mb-3" role="alert">
                  <strong><i class="fas fa-file-alt"></i> Portaria n¬∫ 192/2019</strong>
                  <p class="mt-2">Estabelece os crit√©rios e procedimentos para oferta do transporte escolar aos
                    estudantes da Rede P√∫blica de Ensino do Distrito Federal.</p>
                </div>
                <div class="alert alert-info mb-3" role="alert">
                  <strong><i class="fas fa-users-cog"></i> Portaria Conjunta n¬∫ 21/2024</strong>
                  <p class="mt-2">Define as atribui√ß√µes da UNIAE (Art. 7¬∫) e das Unidades Escolares (Art. 6¬∫) no √¢mbito
                    da gest√£o educacional do transporte escolar.</p>
                </div>
                <div class="alert alert-warning mb-3" role="alert">
                  <strong><i class="fas fa-user-shield"></i> Lei Complementar n¬∫ 840/2011</strong>
                  <p class="mt-2">Art. 181 e 183 - Disp√µe sobre a responsabilidade penal, civil e administrativa dos
                    servidores p√∫blicos do DF. O servidor responde por ato omissivo ou comissivo que resulte em preju√≠zo
                    ao er√°rio.</p>
                </div>
                <div class="alert alert-success" role="alert">
                  <strong><i class="fas fa-clipboard-check"></i> Instru√ß√£o Normativa 123/2022-TCB</strong>
                  <p class="mt-2">Define procedimentos operacionais para execu√ß√£o dos contratos de transporte escolar.
                  </p>
                </div>
              </div>
            </div>
            <div id="compliance-validation-crud-container"></div>
          </section>

          <section id="utilizacao-frota-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-orange">
              <div class="section-title-icon"><i class="fas fa-chart-pie"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Utiliza√ß√£o da Frota</h2>
                <p class="page-subtitle">An√°lise de uso e disponibilidade dos ve√≠culos</p>
              </div>
            </div>
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-percentage text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff">87%</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Taxa Utiliza√ß√£o</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-chart-line text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff">847km</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">M√©dia/Ve√≠culo</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-clock text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff">6.2h</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Tempo M√©dio</p>
              </div>
            </div>
            <div id="utilizacao-frota-crud-container" class="section-standardized"></div>
          </section>

          <section id="faturamentos-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-green">
              <div class="section-title-icon"><i class="fas fa-file-invoice-dollar"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Gest√£o de Faturamentos</h2>
                <p class="page-subtitle">Controle financeiro e cobran√ßas do transporte escolar</p>
              </div>
            </div>
            <!-- Quick Stats Financeiros -->
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <i class="fas fa-dollar-sign text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">R$ 847.234</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Faturamento Mensal</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Outubro 2024</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <i class="fas fa-file-invoice text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">23</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Faturas Processadas</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">M√™s atual</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: #1f2937">
                <i class="fas fa-clock text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">3</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Pendentes</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Aguardando documenta√ß√£o</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                <i class="fas fa-percentage text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">96.2%</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Taxa Conformidade</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Documenta√ß√£o completa</small>
              </div>
            </div>
            <!-- Alerta: Planilhas de Itiner√°rios e Pagamento -->
            <div class="alert alert-info mb-4" role="alert">
              <i class="fas fa-file-alt"></i>
              <div>
                <strong>Planilha de Itiner√°rios - Base para Pagamento:</strong>
                <p class="mt-2 text-small">A Planilha de Itiner√°rios indica todos os dados necess√°rios: percursos
                  realizados, escolas atendidas, n√∫mero de alunos transportados por turno, quilometragem percorrida,
                  n√∫mero de dias trabalhados, valor a ser pago por dia e valor total mensal.</p>
              </div>
            </div>
            <!-- Status de Pagamentos -->
            <div class="card mb-4">
              <div class="card-header">
                <h3 class="flex items-center gap-2" style="margin: 0"><i class="fas fa-money-check-alt"></i> Status de
                  Pagamentos (M√™s Atual)</h3>
              </div>
              <div class="card-body" style="padding: 0">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Empresa</th>
                      <th>Valor</th>
                      <th>Documenta√ß√£o</th>
                      <th>Status</th>
                      <th>Previs√£o</th>
                      <th>A√ß√µes</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><strong>Transportes ABC Ltda</strong></td>
                      <td>R$ 124.580,00</td>
                      <td><span class="badge" style="background: #10b981; color: white; padding: 0.3rem 0.6rem"><i
                            class="fas fa-check"></i> Completa</span></td>
                      <td><span class="badge"
                          style="background: #10b981; color: white; padding: 0.3rem 0.6rem">Aprovado</span></td>
                      <td>05/11/2024</td>
                      <td><button class="btn btn-sm btn-secondary"><i class="fas fa-eye"></i></button></td>
                    </tr>
                    <tr>
                      <td><strong>Via R√°pida Transportes</strong></td>
                      <td>R$ 87.200,00</td>
                      <td><span class="badge" style="background: #f59e0b; color: white; padding: 0.3rem 0.6rem"><i
                            class="fas fa-exclamation"></i> Incompleta</span></td>
                      <td><span class="badge"
                          style="background: #f59e0b; color: white; padding: 0.3rem 0.6rem">Pendente</span></td>
                      <td>Aguardando docs</td>
                      <td><button class="btn btn-sm btn-warning"><i class="fas fa-bell"></i></button></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="alert alert-warning mb-4" role="alert">
              <i class="fas fa-exclamation-triangle"></i>
              <div>
                <strong>Decreto n¬∫ 40.385/2020 - Gest√£o pela TCB:</strong>
                <p class="mt-2 text-small">Caso haja pagamento anterior √† instru√ß√£o processual ou em desacordo com os
                  autos, a UNIAE n√£o mais receber√° a documenta√ß√£o das empresas, devendo ser entregue diretamente √† TCB.
                </p>
              </div>
            </div>
            <div id="faturamentos-crud-container" class="section-standardized"></div>
          </section>
          <section id="atestos-section-1" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-certificate"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Atestos Administrativos</h2>
                <p class="page-subtitle">Controle de atestados e valida√ß√µes oficiais</p>
              </div>
            </div>
            <!-- Alerta: Responsabilidade no Atesto -->
            <div class="alert alert-warning mb-4" role="alert">
              <i class="fas fa-stamp"></i>
              <div>
                <strong>Portaria Conjunta n¬∫ 21/2024 - Responsabilidades no Atesto:</strong>
                <p class="mt-2 text-small">Cabe √†s Unidades Escolares encaminhar mensalmente √† empresa prestadora a
                  Frequ√™ncia do Transporte Escolar e atestar via SEI. O atesto deve ser feito somente se as informa√ß√µes
                  estiverem corretas e condizentes com os controles da escola. Responsabilidade administrativa, civil e
                  penal pelo atesto indevido (LC 840/2011).</p>
              </div>
            </div>
            <div id="atestos-crud-container-1" class="section-standardized"></div>
          </section>

          <section id="relatorios-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-green">
              <div class="section-title-icon"><i class="fas fa-chart-bar"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Relat√≥rios Gerenciais e UNIAE</h2>
                <p class="page-subtitle">Relat√≥rios operacionais, consolidados mensais GCOTE e comunica√ß√µes √†s escolas
                </p>
              </div>
            </div>
            <!-- Report Cards Grid -->
            <div class="w-full cards-grid gap-4 mb-5">
              <div class="card p-4"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <h3 class="flex items-center gap-2"
                  style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937"><i
                    class="fas fa-users" style="color: #1f2937"></i> Alunos</h3>
                <p class="text-xs" style="margin: 0 0 var(--space-3) 0; color: #1f2937; opacity: 0.9">Dados completos,
                  frequ√™ncia e contatos</p>
                <div class="flex text-center mb-3" style="justify-content: space-around">
                  <div>
                    <div class="text-xs font-bold" style="color: #1f2937">1,247</div>
                    <div class="text-xs" style="color: #1f2937; opacity: 0.85">Alunos</div>
                  </div>
                  <div>
                    <div class="text-xs font-bold" style="color: #1f2937">94.2%</div>
                    <div class="text-xs" style="color: #1f2937; opacity: 0.85">Frequ√™ncia</div>
                  </div>
                </div>
                <button class="btn btn-primary btn-sm" style="width: 100%"><i class="fas fa-download"></i>
                  Gerar</button>
              </div>
              <div class="card p-4"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <h3 class="flex items-center gap-2"
                  style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937"><i
                    class="fas fa-route" style="color: #1f2937"></i> Rotas</h3>
                <p class="text-xs" style="margin: 0 0 var(--space-3) 0; color: #1f2937; opacity: 0.9">An√°lise de
                  efici√™ncia e otimiza√ß√£o</p>
                <div class="flex text-center mb-3" style="justify-content: space-around">
                  <div>
                    <div class="text-xs font-bold" style="color: #1f2937">23</div>
                    <div class="text-xs" style="color: #1f2937; opacity: 0.85">Rotas</div>
                  </div>
                  <div>
                    <div class="text-xs font-bold" style="color: #1f2937">96.8%</div>
                    <div class="text-xs" style="color: #1f2937; opacity: 0.85">Efici√™ncia</div>
                  </div>
                </div>
                <button class="btn btn-primary btn-sm" style="width: 100%"><i class="fas fa-download"></i>
                  Gerar</button>
              </div>
              <div class="card p-4"
                style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: #1f2937">
                <h3 class="flex items-center gap-2"
                  style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937"><i
                    class="fas fa-bus" style="color: #1f2937"></i> Frota</h3>
                <p class="text-xs" style="margin: 0 0 var(--space-3) 0; color: #1f2937; opacity: 0.9">Manuten√ß√µes,
                  custos e disponibilidade</p>
                <div class="flex text-center mb-3" style="justify-content: space-around">
                  <div>
                    <div class="text-xs font-bold" style="color: #1f2937">45</div>
                    <div class="text-xs" style="color: #1f2937; opacity: 0.85">Ve√≠culos</div>
                  </div>
                  <div>
                    <div class="text-xs font-bold" style="color: #1f2937">92%</div>
                    <div class="text-xs" style="color: #1f2937; opacity: 0.85">Dispon√≠vel</div>
                  </div>
                </div>
                <button class="btn btn-primary btn-sm" style="width: 100%"><i class="fas fa-download"></i>
                  Gerar</button>
              </div>
            </div>
            <!-- Documentos Obrigat√≥rios para Pagamento -->
            <div class="alert alert-info mb-4" role="alert">
              <i class="fas fa-file-invoice"></i>
              <div>
                <strong>Termo de Refer√™ncia (44012274) - Documentos para Pagamento:</strong>
                <ul class="text-small" style="margin: 0.5rem 0 0 1.5rem; line-height: 1.6">
                  <li>Certid√£o Positiva com Efeitos de Negativa Conjunta - Uni√£o</li>
                  <li>Certificado de Regularidade do FGTS</li>
                  <li>Certid√£o Negativa de D√©bitos Trabalhistas</li>
                  <li>Certid√£o Positiva com Efeitos de Negativa - GDF</li>
                  <li>Guia e Comprovante de Recolhimento de FGTS e GPS</li>
                  <li>Relat√≥rio de Empregados (GFIP), Folha de Pagamento</li>
                  <li>Ap√≥lice e Comprovante de Pagamento de Seguro Veicular</li>
                  <li>Folhas de ponto, Vale transporte e Vale refei√ß√£o</li>
                </ul>
              </div>
            </div>
            <div id="relatorios-crud-container" class="section-standardized"></div>
          </section>

          <section id="ai-reports-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-purple">
              <div class="section-title-icon"><i class="fas fa-robot"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Relat√≥rios de Intelig√™ncia Artificial</h2>
                <p class="page-subtitle">An√°lises preditivas, insights automatizados e gera√ß√£o por linguagem natural</p>
              </div>
            </div>
            <!-- Banner Sistema Neural -->
            <div class="alert mb-5"
              style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937; border: none; padding: var(--space-5)">
              <div class="flex items-center gap-3 mb-2">
                <i class="fas fa-robot text-xs"></i>
                <div>
                  <h3 class="font-bold" style="margin: 0; font-size: var(--font-size-small)">Sistema Neural de IA Ativo
                  </h3>
                  <p class="mt-2" style="opacity: 0.95">Processando dados em tempo real com modelos avan√ßados</p>
                </div>
              </div>
              <div class="flex gap-3" style="flex-wrap: wrap">
                <span class="badge" style="background: rgba(255,255,255,0.25); padding: 0.5rem 1rem"><i
                    class="fas fa-check-circle"></i> GPT-4 Turbo</span>
                <span class="badge" style="background: rgba(255,255,255,0.25); padding: 0.5rem 1rem"><i
                    class="fas fa-check-circle"></i> Ollama Local</span>
                <span class="badge" style="background: rgba(255,255,255,0.25); padding: 0.5rem 1rem"><i
                    class="fas fa-chart-line"></i> 1.2M Registros</span>
              </div>
            </div>
            <!-- Quick Stats Performance IA -->
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <i class="fas fa-file-alt text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">1,847</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Relat√≥rios Gerados</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">√öltimos 30 dias</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <i class="fas fa-clock text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">2.3s</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Tempo M√©dio</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Por relat√≥rio</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: #1f2937">
                <i class="fas fa-lightbulb text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">342</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Insights Detectados</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Padr√µes identificados</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                <i class="fas fa-percentage text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">98.7%</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Precis√£o</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Predi√ß√µes</small>
              </div>
            </div>
            <!-- AI Capabilities Expandidos -->
            <div class="w-full cards-grid gap-4 mb-5">
              <div class="card p-4"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937; position: relative; overflow: hidden">
                <div class="text-xs" style="position: absolute; top: -20px; right: -20px; opacity: 0.15"><i
                    class="fas fa-brain"></i></div>
                <div style="position: relative">
                  <i class="fas fa-brain text-xs mb-2" style="display: block"></i>
                  <h4 class="font-bold" style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small)">An√°lise
                    Preditiva Avan√ßada</h4>
                  <p class="text-xs" style="margin: 0 0 var(--space-3) 0; opacity: 0.95; line-height: 1.5">Predi√ß√µes de
                    aus√™ncias, otimiza√ß√£o de rotas e previs√£o de demanda por per√≠odos.</p>
                  <div class="flex gap-2" style="flex-wrap: wrap">
                    <span class="badge text-xs" style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem"><i
                        class="fas fa-chart-line"></i> Forecasting</span>
                    <span class="badge text-xs" style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem"><i
                        class="fas fa-cogs"></i> AutoML</span>
                  </div>
                </div>
              </div>
              <div class="card p-4"
                style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: #1f2937; position: relative; overflow: hidden">
                <div class="text-xs"
                  style="position: absolute; top: -20px; right: -20px; opacity: 0.15; color: #1f2937"><i
                    class="fas fa-language"></i></div>
                <div style="position: relative">
                  <i class="fas fa-language text-xs mb-2" style="display: block; color: #1f2937"></i>
                  <h4 class="font-bold"
                    style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937">
                    Processamento Linguagem Natural</h4>
                  <p class="text-xs"
                    style="margin: 0 0 var(--space-3) 0; opacity: 0.95; line-height: 1.5; color: #1f2937">Gere
                    relat√≥rios complexos apenas descrevendo o que voc√™ precisa em portugu√™s.</p>
                  <div class="flex gap-2" style="flex-wrap: wrap">
                    <span class="badge text-xs"
                      style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem; color: #1f2937"><i
                        class="fas fa-comments"></i> NLP</span>
                    <span class="badge text-xs"
                      style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem; color: #1f2937"><i
                        class="fas fa-robot"></i> GPT-4</span>
                  </div>
                </div>
              </div>
              <div class="card p-4"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937; position: relative; overflow: hidden">
                <div class="text-xs"
                  style="position: absolute; top: -20px; right: -20px; opacity: 0.15; color: #1f2937"><i
                    class="fas fa-lightbulb"></i></div>
                <div style="position: relative">
                  <i class="fas fa-lightbulb text-xs mb-2" style="display: block; color: #1f2937"></i>
                  <h4 class="font-bold"
                    style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937">Insights
                    Autom√°ticos</h4>
                  <p class="text-xs"
                    style="margin: 0 0 var(--space-3) 0; opacity: 0.95; line-height: 1.5; color: #1f2937">IA identifica
                    padr√µes ocultos e oportunidades de melhoria automaticamente.</p>
                  <div class="flex gap-2" style="flex-wrap: wrap">
                    <span class="badge text-xs"
                      style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem; color: #1f2937"><i
                        class="fas fa-search"></i> Pattern Mining</span>
                    <span class="badge text-xs"
                      style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem; color: #1f2937"><i
                        class="fas fa-exclamation-triangle"></i> Anomalias</span>
                  </div>
                </div>
              </div>
            </div>
            <!-- Gerador de Relat√≥rios com IA -->
            <div class="card mb-4">
              <div class="card-header">
                <h3 class="flex items-center gap-2" style="margin: 0"><i class="fas fa-magic"></i> Gerador de Relat√≥rios
                  por IA</h3>
              </div>
              <div class="card-body">
                <p style="margin: 0 0 var(--space-3) 0; color: var(--md-sys-color-on-surface-variant)">Descreva em
                  linguagem natural o relat√≥rio que voc√™ precisa:</p>
                <textarea
                  placeholder="Exemplo: 'Gere um relat√≥rio de frequ√™ncia dos √∫ltimos 30 dias para alunos da Rota 05, incluindo gr√°ficos e an√°lise de tend√™ncias'"
                  class="mb-3"
                  style="width: 100%; min-height: 80px; padding: var(--space-3); border: 1px solid var(--md-sys-color-outline); border-radius: var(--radius-base)"></textarea>
                <div class="flex gap-2 mb-3">
                  <button class="btn btn-primary"><i class="fas fa-robot"></i> Gerar com IA</button>
                  <button class="btn btn-secondary"><i class="fas fa-microphone"></i> Comando de Voz</button>
                  <button class="btn btn-secondary"><i class="fas fa-history"></i> Hist√≥rico</button>
                </div>
                <div style="padding-top: var(--space-3); border-top: 1px solid var(--md-sys-color-outline-variant)">
                  <h4 class="text-xs"
                    style="margin: 0 0 var(--space-2) 0; color: var(--md-sys-color-on-surface-variant)"><i
                      class="fas fa-bolt"></i> Sugest√µes R√°pidas:</h4>
                  <div class="flex gap-2" style="flex-wrap: wrap">
                    <button class="btn btn-sm" style="background: var(--md-sys-color-surface-container-high)">An√°lise
                      Frequ√™ncia Mensal</button>
                    <button class="btn btn-sm" style="background: var(--md-sys-color-surface-container-high)">Efici√™ncia
                      de Rotas</button>
                    <button class="btn btn-sm" style="background: var(--md-sys-color-surface-container-high)">Custos
                      Operacionais</button>
                    <button class="btn btn-sm"
                      style="background: var(--md-sys-color-surface-container-high)">Manuten√ß√µes Previstas</button>
                  </div>
                </div>
              </div>
            </div>
            <!-- Insights Recentes Detectados -->
            <div class="card mb-4">
              <div class="card-header">
                <h3 class="flex items-center gap-2" style="margin: 0"><i class="fas fa-lightbulb"></i> Insights Recentes
                  Detectados pela IA</h3>
              </div>
              <div class="card-body">
                <div class="flex gap-3" style="flex-direction: column">
                  <div class="alert alert-success flex gap-3" style="align-items: start; margin: 0">
                    <i class="fas fa-check-circle text-xs" style="flex-shrink: 0"></i>
                    <div style="flex: 1">
                      <h4 class="text-xs font-bold" style="margin: 0 0 var(--space-1) 0">Oportunidade de Otimiza√ß√£o -
                        Rota 12</h4>
                      <p class="text-xs" style="margin: 0 0 var(--space-2) 0">A IA detectou que a Rota 12 pode ser
                        otimizada em 18% reduzindo 3 paradas com baixa utiliza√ß√£o.</p>
                      <span class="badge"
                        style="background: rgba(16, 185, 129, 0.2); color: #059669; padding: 0.3rem 0.6rem">Economia: R$
                        2.847/m√™s</span>
                    </div>
                    <button class="btn btn-sm btn-primary">Ver Detalhes</button>
                  </div>
                  <div class="alert alert-warning flex gap-3" style="align-items: start; margin: 0">
                    <i class="fas fa-exclamation-triangle text-xs" style="flex-shrink: 0"></i>
                    <div style="flex: 1">
                      <h4 class="text-xs font-bold" style="margin: 0 0 var(--space-1) 0">Alerta Preditivo - Aumento de
                        Aus√™ncias</h4>
                      <p class="text-xs" style="margin: 0 0 var(--space-2) 0">Padr√£o indica prov√°vel aumento de 12% nas
                        aus√™ncias na pr√≥xima semana (per√≠odo de provas).</p>
                      <span class="badge"
                        style="background: rgba(245, 158, 11, 0.2); color: #d97706; padding: 0.3rem 0.6rem">Probabilidade:
                        87%</span>
                    </div>
                    <button class="btn btn-sm btn-warning">Tomar A√ß√£o</button>
                  </div>
                  <div class="alert alert-info flex gap-3" style="align-items: start; margin: 0">
                    <i class="fas fa-info-circle text-xs" style="flex-shrink: 0"></i>
                    <div style="flex: 1">
                      <h4 class="text-xs font-bold" style="margin: 0 0 var(--space-1) 0">An√°lise de Desempenho -
                        Motoristas</h4>
                      <p class="text-xs" style="margin: 0 0 var(--space-2) 0">Motoristas Carlos Silva e Ana Santos
                        mant√™m 98% de pontualidade nos √∫ltimos 90 dias.</p>
                      <span class="badge"
                        style="background: rgba(79, 172, 254, 0.2); color: #0284c7; padding: 0.3rem 0.6rem">Categoria:
                        Desempenho</span>
                    </div>
                    <button class="btn btn-sm btn-secondary">Registrar</button>
                  </div>
                </div>
              </div>
            </div>
            <!-- Relat√≥rios Gerados Recentemente -->
            <div class="card mb-4">
              <div class="card-header flex items-center" style="justify-content: space-between">
                <h3 class="flex items-center gap-2" style="margin: 0"><i class="fas fa-file-alt"></i> Relat√≥rios Gerados
                  pela IA (√öltimos 7 dias)</h3>
                <button class="btn btn-primary btn-sm"><i class="fas fa-history"></i> Ver Todos</button>
              </div>
              <div class="card-body" style="padding: 0">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Relat√≥rio</th>
                      <th>Tipo</th>
                      <th>Solicitante</th>
                      <th>Data/Hora</th>
                      <th>Tempo</th>
                      <th>Status</th>
                      <th>A√ß√µes</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><strong>An√°lise Consolidada - Outubro 2024</strong></td>
                      <td><span class="badge"
                          style="background: #667eea; color: white; padding: 0.3rem 0.6rem">Mensal</span></td>
                      <td>Coordena√ß√£o GCOTE</td>
                      <td>17/10/2025 08:23</td>
                      <td>1.8s</td>
                      <td><span class="badge" style="background: #10b981; color: white; padding: 0.3rem 0.6rem"><i
                            class="fas fa-check"></i> Conclu√≠do</span></td>
                      <td><button aria-label="Download" class="btn btn-sm btn-secondary" title="Download"><i
                            class="fas fa-download"></i></button></td>
                    </tr>
                    <tr>
                      <td><strong>Otimiza√ß√£o de Rotas - Zona Sul</strong></td>
                      <td><span class="badge"
                          style="background: #10b981; color: white; padding: 0.3rem 0.6rem">Preditivo</span></td>
                      <td>Gest√£o Operacional</td>
                      <td>16/10/2025 14:45</td>
                      <td>3.2s</td>
                      <td><span class="badge" style="background: #10b981; color: white; padding: 0.3rem 0.6rem"><i
                            class="fas fa-check"></i> Conclu√≠do</span></td>
                      <td><button aria-label="Download" class="btn btn-sm btn-secondary" title="Download"><i
                            class="fas fa-download"></i></button></td>
                    </tr>
                    <tr>
                      <td><strong>Previs√£o de Manuten√ß√µes Q4</strong></td>
                      <td><span class="badge"
                          style="background: #f59e0b; color: white; padding: 0.3rem 0.6rem">Manuten√ß√£o</span></td>
                      <td>Gest√£o de Frota</td>
                      <td>15/10/2025 11:12</td>
                      <td>2.1s</td>
                      <td><span class="badge" style="background: #10b981; color: white; padding: 0.3rem 0.6rem"><i
                            class="fas fa-check"></i> Conclu√≠do</span></td>
                      <td><button aria-label="Download" class="btn btn-sm btn-secondary" title="Download"><i
                            class="fas fa-download"></i></button></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div id="ai-reports-content" class="section-standardized"></div>
          </section>

          <section id="engagement-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-heart"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Engajamento e Satisfa√ß√£o</h2>
                <p class="page-subtitle">Monitore satisfa√ß√£o e envolvimento dos usu√°rios do transporte escolar</p>
              </div>
            </div>
            <!-- ===================================================
 AI INSIGHTS - ENGAJAMENTO
 =================================================== -->
            <div class="w-full cards-grid gap-4 mb-5">
              <!-- AI Card: An√°lise de Satisfa√ß√£o -->
              <div class="card p-4"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6; position: relative; overflow: hidden">
                <div class="text-xs"
                  style="position: absolute; top: -20px; right: -20px; opacity: 0.15; color: #f3f4f6">
                  <i class="fas fa-smile-beam"></i>
                </div>
                <div style="position: relative">
                  <div class="text-xs mb-2" style="color: #f3f4f6">
                    <i class="fas fa-smile-beam"></i>
                  </div>
                  <h4 class="font-bold"
                    style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #ffffff">√çndice de
                    Satisfa√ß√£o Global</h4>
                  <p class="text-xs font-bold" style="margin: 0 0 var(--space-3) 0; color: #ffffff">92.3%</p>
                  <p class="text-xs" style="margin: 0 0 var(--space-3) 0; opacity: 0.95; color: #f3f4f6">Baseado em 847
                    pesquisas coletadas nos √∫ltimos 30 dias</p>
                  <div class="flex gap-2" style="flex-wrap: wrap">
                    <span class="badge text-xs"
                      style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem; color: #f3f4f6">
                      <i class="fas fa-arrow-up"></i> +3.2% vs m√™s anterior
                    </span>
                    <span class="badge text-xs"
                      style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem; color: #f3f4f6">
                      <i class="fas fa-robot"></i> IA Ativa
                    </span>
                  </div>
                </div>
              </div>

              <!-- AI Card: Alertas de Insatisfa√ß√£o -->
              <div class="card p-4"
                style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: #1f2937; position: relative; overflow: hidden">
                <div class="text-xs"
                  style="position: absolute; top: -20px; right: -20px; opacity: 0.15; color: #1f2937">
                  <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div style="position: relative">
                  <div class="text-xs mb-2" style="color: #1f2937">
                    <i class="fas fa-exclamation-triangle"></i>
                  </div>
                  <h4 class="font-bold"
                    style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937">Alertas de
                    Baixo Engajamento</h4>
                  <p class="text-xs font-bold" style="margin: 0 0 var(--space-3) 0; color: #1f2937">7 Rotas</p>
                  <p class="text-xs" style="margin: 0 0 var(--space-3) 0; opacity: 0.95; color: #1f2937">Identificadas
                    com satisfa√ß√£o abaixo de 75%. Interven√ß√£o imediata recomendada pela IA.</p>
                  <div class="flex gap-2" style="flex-wrap: wrap">
                    <span class="badge text-xs"
                      style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem; color: #1f2937">
                      <i class="fas fa-bell"></i> 7 Alertas Ativos
                    </span>
                  </div>
                </div>
              </div>

              <!-- AI Card: Taxa de Resposta -->
              <div class="card p-4"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937; position: relative; overflow: hidden">
                <div class="text-xs"
                  style="position: absolute; top: -20px; right: -20px; opacity: 0.15; color: #1f2937">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div style="position: relative">
                  <div class="text-xs mb-2" style="color: #1f2937">
                    <i class="fas fa-chart-line"></i>
                  </div>
                  <h4 class="font-bold"
                    style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937">Taxa de
                    Resposta √†s Pesquisas</h4>
                  <p class="text-xs font-bold" style="margin: 0 0 var(--space-3) 0; color: #1f2937">68%</p>
                  <p class="text-xs" style="margin: 0 0 var(--space-3) 0; opacity: 0.95; color: #1f2937">847 respostas
                    de 1.247 fam√≠lias contactadas via WhatsApp automatizado</p>
                  <div class="flex gap-2" style="flex-wrap: wrap">
                    <span class="badge text-xs"
                      style="background: rgba(255,255,255,0.25); padding: 0.4rem 0.8rem; color: #1f2937">
                      <i class="fab fa-whatsapp"></i> Integrado
                    </span>
                  </div>
                </div>
              </div>
            </div>
            <!-- ===================================================
 QUICK STATS - ENGAJAMENTO
 =================================================== -->
            <div class="w-full cards-grid gap-3 mb-5">
              <!-- Alunos em Risco -->
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #ef4444 0%, var(--md-sys-color-error) 100%); color: #1f2937">
                <i class="fas fa-user-slash text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937" id="stat-alunos-risco">18</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Alunos em Risco</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Acima de 20% de faltas</small>
              </div>

              <!-- Taxa de Aus√™ncia M√©dia -->
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-chart-pie text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff" id="stat-taxa-ausencia">7.2%</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Taxa de Aus√™ncia</p>
                <small class="opacity-80 text-xs" style="color: #f3f4f6">M√©dia √∫ltimos 30 dias</small>
              </div>

              <!-- Comunica√ß√µes Enviadas -->
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fab fa-whatsapp text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff" id="stat-comunicacoes">142</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Comunica√ß√µes</p>
                <small class="opacity-80 text-xs" style="color: #f3f4f6">Notifica√ß√µes enviadas</small>
              </div>

              <!-- Feedback Positivo -->
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-thumbs-up text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff" id="stat-feedback-positivo">94%</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Feedback Positivo</p>
                <small class="opacity-80 text-xs" style="color: #f3f4f6">Motoristas e monitores</small>
              </div>
            </div>
            <!-- ===================================================
 GR√ÅFICO DE SATISFA√á√ÉO POR CATEGORIA
 =================================================== -->
            <div class="card mb-4">
              <div class="card-body">
                <h3 class="flex items-center gap-2" style="margin: 0 0 var(--space-4) 0">
                  <i class="fas fa-chart-bar"></i> Satisfa√ß√£o por Categoria
                </h3>
                <div class="grid md:grid-cols-2 gap-4">
                  <div>
                    <div class="mb-3">
                      <div class="flex" style="justify-content: space-between; margin-bottom: var(--space-1)">
                        <span class="text-xs">Pontualidade</span>
                        <span class="font-bold" style="color: #10b981">96%</span>
                      </div>
                      <div style="width: 100%; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden">
                        <div
                          style="width: 96%; height: 100%; background: linear-gradient(90deg, #10b981, #34d399); transition: width 0.3s ease">
                        </div>
                      </div>
                    </div>

                    <div class="mb-3">
                      <div class="flex" style="justify-content: space-between; margin-bottom: var(--space-1)">
                        <span class="text-xs">Seguran√ßa</span>
                        <span class="font-bold" style="color: #10b981">98%</span>
                      </div>
                      <div style="width: 100%; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden">
                        <div
                          style="width: 98%; height: 100%; background: linear-gradient(90deg, #10b981, #34d399); transition: width 0.3s ease">
                        </div>
                      </div>
                    </div>

                    <div class="mb-3">
                      <div class="flex" style="justify-content: space-between; margin-bottom: var(--space-1)">
                        <span class="text-xs">Limpeza do Ve√≠culo</span>
                        <span class="font-bold" style="color: #10b981">94%</span>
                      </div>
                      <div style="width: 100%; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden">
                        <div
                          style="width: 94%; height: 100%; background: linear-gradient(90deg, #10b981, #34d399); transition: width 0.3s ease">
                        </div>
                      </div>
                    </div>
                  </div>

                  <div>
                    <div class="mb-3">
                      <div class="flex" style="justify-content: space-between; margin-bottom: var(--space-1)">
                        <span class="text-xs">Atendimento Motorista</span>
                        <span class="font-bold" style="color: #10b981">95%</span>
                      </div>
                      <div style="width: 100%; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden">
                        <div
                          style="width: 95%; height: 100%; background: linear-gradient(90deg, #10b981, #34d399); transition: width 0.3s ease">
                        </div>
                      </div>
                    </div>

                    <div class="mb-3">
                      <div class="flex" style="justify-content: space-between; margin-bottom: var(--space-1)">
                        <span class="text-xs">Atendimento Monitor</span>
                        <span class="font-bold" style="color: #10b981">93%</span>
                      </div>
                      <div style="width: 100%; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden">
                        <div
                          style="width: 93%; height: 100%; background: linear-gradient(90deg, #10b981, #34d399); transition: width 0.3s ease">
                        </div>
                      </div>
                    </div>

                    <div class="mb-3">
                      <div class="flex" style="justify-content: space-between; margin-bottom: var(--space-1)">
                        <span class="text-xs">Conforto Geral</span>
                        <span class="font-bold" style="color: #f59e0b">87%</span>
                      </div>
                      <div style="width: 100%; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden">
                        <div
                          style="width: 87%; height: 100%; background: linear-gradient(90deg, #f59e0b, #fbbf24); transition: width 0.3s ease">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- ===================================================
 TABELA: ALUNOS COM ALTO √çNDICE DE FALTAS
 =================================================== -->
            <div class="card mb-4">
              <div class="card-header flex items-center" style="justify-content: space-between">
                <h3 class="flex items-center gap-2" style="margin: 0">
                  <i class="fas fa-list-ol"></i> Alunos com Alto √çndice de Faltas (√öltimos 30 dias)
                </h3>
                <button class="btn btn-primary btn-sm">
                  <i class="fas fa-download"></i> Exportar
                </button>
              </div>
              <div class="card-body" style="padding: 0">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Aluno</th>
                      <th>Rota</th>
                      <th>Faltas</th>
                      <th>Taxa de Aus√™ncia</th>
                      <th>√öltima A√ß√£o</th>
                      <th>A√ß√µes</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Mariana Oliveira</td>
                      <td>Rota 03</td>
                      <td>6</td>
                      <td><span class="badge"
                          style="background: var(--md-sys-color-error); color: white; padding: 0.3rem 0.6rem; border-radius: 4px">27%</span>
                      </td>
                      <td>Notifica√ß√£o enviada h√° 2 dias</td>
                      <td>
                        <button aria-label="Contatar fam√≠lia" class="btn btn-sm btn-primary" title="Contatar fam√≠lia">
                          <i class="fas fa-phone"></i> Contatar
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>Pedro Martins</td>
                      <td>Rota 12</td>
                      <td>5</td>
                      <td><span class="badge"
                          style="background: #f59e0b; color: white; padding: 0.3rem 0.6rem; border-radius: 4px">22%</span>
                      </td>
                      <td>Aguardando justificativa</td>
                      <td>
                        <button aria-label="Contatar fam√≠lia" class="btn btn-sm btn-primary" title="Contatar fam√≠lia">
                          <i class="fas fa-phone"></i> Contatar
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>Lucas Ferreira</td>
                      <td>Rota 08</td>
                      <td>5</td>
                      <td><span class="badge"
                          style="background: #f59e0b; color: white; padding: 0.3rem 0.6rem; border-radius: 4px">21%</span>
                      </td>
                      <td>Fam√≠lia contactada hoje</td>
                      <td>
                        <button aria-label="Contatar fam√≠lia" class="btn btn-sm btn-primary" title="Contatar fam√≠lia">
                          <i class="fas fa-phone"></i> Contatar
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <!-- ===================================================
 A√á√ïES R√ÅPIDAS DE ENGAJAMENTO
 =================================================== -->
            <div class="w-full cards-grid gap-3 mb-4">
              <div class="card action-card p-4 text-center"
                style="cursor: pointer; transition: all 0.3s ease; border: 2px solid var(--md-sys-color-outline-variant)"
                onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='var(--shadow-lg)'"
                onmouseout="this.style.transform=''; this.style.boxShadow=''">
                <div class="text-xs mb-2" style="color: var(--md-sys-color-primary)">
                  <i class="fas fa-poll"></i>
                </div>
                <h4 class="text-xs" style="margin: 0 0 var(--space-2) 0">Nova Pesquisa</h4>
                <p class="text-xs" style="margin: 0; color: var(--md-sys-color-on-surface-variant)">Criar enquete</p>
              </div>

              <div class="card action-card p-4 text-center"
                style="cursor: pointer; transition: all 0.3s ease; border: 2px solid var(--md-sys-color-outline-variant)"
                onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='var(--shadow-lg)'"
                onmouseout="this.style.transform=''; this.style.boxShadow=''">
                <div class="text-xs mb-2" style="color: var(--md-sys-color-secondary)">
                  <i class="fab fa-whatsapp"></i>
                </div>
                <h4 class="text-xs" style="margin: 0 0 var(--space-2) 0">Enviar WhatsApp</h4>
                <p class="text-xs" style="margin: 0; color: var(--md-sys-color-on-surface-variant)">Mensagem em massa
                </p>
              </div>

              <div class="card action-card p-4 text-center"
                style="cursor: pointer; transition: all 0.3s ease; border: 2px solid var(--md-sys-color-outline-variant)"
                onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='var(--shadow-lg)'"
                onmouseout="this.style.transform=''; this.style.boxShadow=''">
                <div class="text-xs mb-2" style="color: var(--md-sys-color-tertiary)">
                  <i class="fas fa-file-export"></i>
                </div>
                <h4 class="text-xs" style="margin: 0 0 var(--space-2) 0">Relat√≥rio Detalhado</h4>
                <p class="text-xs" style="margin: 0; color: var(--md-sys-color-on-surface-variant)">Gerar an√°lise
                  completa</p>
              </div>

              <div class="card action-card p-4 text-center"
                style="cursor: pointer; transition: all 0.3s ease; border: 2px solid var(--md-sys-color-outline-variant)"
                onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='var(--shadow-lg)'"
                onmouseout="this.style.transform=''; this.style.boxShadow=''">
                <div class="text-xs mb-2" style="color: #f59e0b">
                  <i class="fas fa-robot"></i>
                </div>
                <h4 class="text-xs" style="margin: 0 0 var(--space-2) 0">IA Insights</h4>
                <p class="text-xs" style="margin: 0; color: var(--md-sys-color-on-surface-variant)">An√°lise preditiva
                </p>
              </div>
            </div>
            <div id="engagement-crud-container" class="section-standardized"></div>
          </section>

          <section id="incidentes-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-red">
              <div class="section-title-icon"><i class="fas fa-exclamation-triangle"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Protocolo de Incidentes</h2>
                <p class="page-subtitle">Registre e acompanhe ocorr√™ncias em conformidade com SEI-GDF</p>
              </div>
            </div>
            <!-- Quick Stats - Incidentes -->
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #ef4444 0%, var(--md-sys-color-error) 100%); color: #1f2937">
                <i class="fas fa-exclamation-circle text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937" id="stat-incidentes-abertos">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Abertos</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-check-circle text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff" id="stat-incidentes-resolvidos">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Resolvidos</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-clock text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff" id="stat-tempo-medio">---</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Tempo M√©dio</p>
              </div>
            </div>
            <!-- Alerta: Procedimentos para Incidentes -->
            <div class="alert alert-danger mb-4" role="alert">
              <i class="fas fa-shield-alt"></i>
              <div>
                <strong>Encaminhamento de Ouvidorias e Reclama√ß√µes:</strong>
                <p class="mt-2 text-small">Ouvidorias, reclama√ß√µes e manifesta√ß√µes sobre comportamento inadequado,
                  dire√ß√£o perigosa ou descumprimento de normas devem ser encaminhadas √† GCOTE com vistas ao Executor do
                  Contrato dentro do prazo de 48 horas para delibera√ß√µes pertinentes.</p>
              </div>
            </div>
            <div id="incidentes-crud-container" class="section-standardized"></div>
          </section>

          <section id="whatsapp-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-green">
              <div class="section-title-icon"><i class="fab fa-whatsapp"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Integra√ß√£o WhatsApp</h2>
                <p class="page-subtitle">Comunica√ß√£o autom√°tica com pais e respons√°veis</p>
              </div>
            </div>
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fab fa-whatsapp text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff">8,472</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Mensagens Enviadas</p>
                <small class="opacity-80 text-xs" style="color: #f3f4f6">√öltimos 30 dias</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-check-double text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff">97.8%</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Taxa Entrega</p>
                <small class="opacity-80 text-xs" style="color: #f3f4f6">Entregues com sucesso</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-users text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff">1,247</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Contatos Ativos</p>
                <small class="opacity-80 text-xs" style="color: #f3f4f6">Pais e respons√°veis</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: #f3f4f6">
                <i class="fas fa-comment-dots text-xs mb-2" style="color: #f3f4f6"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #ffffff">12</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #f3f4f6">Templates Ativos</p>
                <small class="opacity-80 text-xs" style="color: #f3f4f6">Mensagens predefinidas</small>
              </div>
            </div>
            <!-- Templates de Mensagens -->
            <div class="card mb-4">
              <div class="card-header">
                <h3 class="flex items-center gap-2" style="margin: 0"><i class="fas fa-file-alt"></i> Templates de
                  Mensagens Populares</h3>
              </div>
              <div class="card-body">
                <div class="w-full cards-grid gap-3">
                  <div
                    style="padding: var(--space-3); background: var(--md-sys-color-surface-container); border-radius: var(--radius-base); border-left: 4px solid #25D366">
                    <h4 class="font-bold flex items-center gap-2" style="margin: 0 0 var(--space-2) 0">
                      <i class="fas fa-calendar-check"></i> Confirma√ß√£o de Viagem
                    </h4>
                    <p
                      style="margin: 0 0 var(--space-2) 0; font-size: 0.9rem; color: var(--md-sys-color-on-surface-variant)">
                      Enviado diariamente √†s 6h para confirmar a viagem do dia</p>
                    <span class="badge"
                      style="background: rgba(37, 211, 102, 0.2); color: #128C7E; padding: 0.3rem 0.6rem">2,847
                      envios/m√™s</span>
                  </div>
                  <div
                    style="padding: var(--space-3); background: var(--md-sys-color-surface-container); border-radius: var(--radius-base); border-left: 4px solid #667eea">
                    <h4 class="font-bold flex items-center gap-2" style="margin: 0 0 var(--space-2) 0">
                      <i class="fas fa-exclamation-circle"></i> Alerta de Aus√™ncia
                    </h4>
                    <p
                      style="margin: 0 0 var(--space-2) 0; font-size: 0.9rem; color: var(--md-sys-color-on-surface-variant)">
                      Notifica pais quando aluno n√£o embarca no transporte</p>
                    <span class="badge"
                      style="background: rgba(102, 126, 234, 0.2); color: #764ba2; padding: 0.3rem 0.6rem">347
                      envios/m√™s</span>
                  </div>
                  <div
                    style="padding: var(--space-3); background: var(--md-sys-color-surface-container); border-radius: var(--radius-base); border-left: 4px solid #10b981">
                    <h4 class="font-bold flex items-center gap-2" style="margin: 0 0 var(--space-2) 0">
                      <i class="fas fa-clock"></i> Aviso de Atraso
                    </h4>
                    <p
                      style="margin: 0 0 var(--space-2) 0; font-size: 0.9rem; color: var(--md-sys-color-on-surface-variant)">
                      Informa sobre atrasos previstos na rota</p>
                    <span class="badge"
                      style="background: rgba(16, 185, 129, 0.2); color: #059669; padding: 0.3rem 0.6rem">127
                      envios/m√™s</span>
                  </div>
                </div>
              </div>
            </div>
            <div id="whatsapp-crud-container" class="section-standardized"></div>
          </section>

          <section id="mcp-server-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-red">
              <div class="section-title-icon"><i class="fas fa-network-wired"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">MCP Server - Orquestra√ß√£o</h2>
                <p class="page-subtitle">Gerencie a integra√ß√£o entre rob√¥s na nuvem e agentes locais</p>
              </div>
            </div>
            <!-- Quick Stats - MCP Server -->
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <i class="fas fa-cloud text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">5</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Rob√¥s Online (Cloud)</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <i class="fas fa-desktop text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">12</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Agentes Online (Local)</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                <i class="fas fa-folder-open text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">8</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Tarefas na Fila</p>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: #1f2937">
                <i class="fas fa-brain text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">Ativa</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">API Ollama</p>
              </div>
            </div>
            <div id="mcp-server-crud-container" class="section-standardized"></div>
          </section>

          <section id="automacoes-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-purple">
              <div class="section-title-icon"><i class="fas fa-magic"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Automa√ß√µes Inteligentes</h2>
                <p class="page-subtitle">Configure fluxos autom√°ticos e workflows com IA</p>
              </div>
            </div>
            <!-- Quick Stats Automa√ß√µes -->
            <div class="w-full cards-grid gap-3 mb-5">
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <i class="fas fa-robot text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">47</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Workflows Ativos</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Executando em tempo real</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <i class="fas fa-check-circle text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">8,472</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Tarefas Executadas</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Este m√™s</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #1f2937">
                <i class="fas fa-clock text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">847h</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Tempo Economizado</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Trabalho manual</small>
              </div>
              <div class="card p-4 text-center"
                style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: #1f2937">
                <i class="fas fa-percentage text-xs mb-2" style="color: #1f2937"></i>
                <h3 class="text-xs font-bold" style="margin: 0; color: #1f2937">99.2%</h3>
                <p class="mt-2 text-xs" style="opacity: 0.9; color: #1f2937">Taxa Sucesso</p>
                <small class="opacity-80 text-xs" style="color: #1f2937">Execu√ß√µes bem-sucedidas</small>
              </div>
            </div>
            <!-- Workflows Populares -->
            <div class="card mb-4">
              <div class="card-header">
                <h3 class="flex items-center gap-2" style="margin: 0"><i class="fas fa-stream"></i> Workflows Mais
                  Utilizados</h3>
              </div>
              <div class="card-body">
                <div class="flex gap-3" style="flex-direction: column">
                  <div class="flex items-center gap-3"
                    style="padding: var(--space-3); background: var(--md-sys-color-surface-container); border-radius: var(--radius-base); border-left: 4px solid #10b981">
                    <i class="fas fa-calendar-check text-xs" style="color: #10b981"></i>
                    <div style="flex: 1">
                      <h4 class="font-bold" style="margin: 0">Confirma√ß√£o Autom√°tica de Viagens</h4>
                      <p class="mt-2 text-xs" style="color: var(--md-sys-color-on-surface-variant)">Envia confirma√ß√µes
                        di√°rias via WhatsApp √†s 6h</p>
                    </div>
                    <span class="badge"
                      style="background: rgba(16, 185, 129, 0.2); color: #059669; padding: 0.4rem 0.8rem">2,847
                      exec/m√™s</span>
                  </div>
                  <div class="flex items-center gap-3"
                    style="padding: var(--space-3); background: var(--md-sys-color-surface-container); border-radius: var(--radius-base); border-left: 4px solid #667eea">
                    <i class="fas fa-bell text-xs" style="color: #667eea"></i>
                    <div style="flex: 1">
                      <h4 class="font-bold" style="margin: 0">Alertas de Aus√™ncia</h4>
                      <p class="mt-2 text-xs" style="color: var(--md-sys-color-on-surface-variant)">Notifica pais quando
                        aluno n√£o embarca</p>
                    </div>
                    <span class="badge"
                      style="background: rgba(102, 126, 234, 0.2); color: #764ba2; padding: 0.4rem 0.8rem">347
                      exec/m√™s</span>
                  </div>
                </div>
              </div>
            </div>
            <div id="automacoes-crud-container" class="section-standardized"></div>
          </section>

          <section id="configuracoes-section" class="section hidden section-standardized">

            <div class="page-header section-header-standardized color-blue">
              <div class="section-title-icon"><i class="fas fa-cog"></i></div>
              <div>
                <h2 class="page-title section-title-standardized">Configura√ß√µes</h2>
                <p class="page-subtitle">Personalize par√¢metros e prefer√™ncias da aplica√ß√£o</p>
              </div>
            </div>
            <!-- Settings Cards -->
            <div class="w-full cards-grid gap-4 mb-5">
              <div class="card p-4"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1f2937">
                <h3 class="flex items-center gap-2"
                  style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937"><i
                    class="fas fa-user-cog" style="color: #1f2937"></i> Perfil</h3>
                <p class="text-xs" style="margin: 0 0 var(--space-3) 0; color: #1f2937; opacity: 0.9">Dados pessoais e
                  prefer√™ncias</p>
                <button class="btn btn-secondary btn-sm" style="width: 100%">Editar Perfil</button>
              </div>
              <div class="card p-4"
                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #1f2937">
                <h3 class="flex items-center gap-2"
                  style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937"><i
                    class="fas fa-bell" style="color: #1f2937"></i> Notifica√ß√µes</h3>
                <p class="text-xs" style="margin: 0 0 var(--space-3) 0; color: #1f2937; opacity: 0.9">Alertas e avisos
                  do sistema</p>
                <button class="btn btn-secondary btn-sm" style="width: 100%">Configurar</button>
              </div>
              <div class="card p-4"
                style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: #1f2937">
                <h3 class="flex items-center gap-2"
                  style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937"><i
                    class="fas fa-shield-alt" style="color: #1f2937"></i> Seguran√ßa</h3>
                <p class="text-xs" style="margin: 0 0 var(--space-3) 0; color: #1f2937; opacity: 0.9">Senha e
                  autentica√ß√£o</p>
                <button class="btn btn-secondary btn-sm" style="width: 100%">Alterar Senha</button>
              </div>
              <div class="card p-4"
                style="background: linear-gradient(135deg, #ef4444 0%, var(--md-sys-color-error) 100%); color: #1f2937">
                <h3 class="flex items-center gap-2"
                  style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-small); color: #1f2937"><i
                    class="fas fa-palette" style="color: #1f2937"></i> Apar√™ncia</h3>
                <p class="text-xs" style="margin: 0 0 var(--space-3) 0; color: #1f2937; opacity: 0.9">Tema e
                  personaliza√ß√£o</p>
                <button class="btn btn-secondary btn-sm" style="width: 100%">Personalizar</button>
              </div>
            </div>
            <div id="configuracoes-crud-container" class="section-standardized"></div>
          </section>
        </div>
      </main>

      <footer class="app-footer">
        <div class="container">
          <div class="footer-bottom">
            <p> <strong>UNIAE/PP:</strong> (61) 3318-2680 | transporteescolar.crepp@edu.se.df.gov.br</p>
            <div class="flex gap-2">
              <button aria-label="Atualizar Dados" class="btn-icon" id="update-data-button" title="Atualizar Dados">
                <i class="fas fa-sync-alt"></i>
              </button>
              <button aria-label="Fazer Backup" class="btn-icon" id="backup-button" title="Fazer Backup">
                <i class="fas fa-hdd"></i>
              </button>
              <button aria-label="Alternar Tema" class="btn-icon" id="theme-toggle"
                title="Alternar Tema (Claro/Escuro)">
                <i class="fa-solid fa-circle-half-stroke"></i>
              </button>
            </div>
          </div>
        </div>
      </footer>

      <!-- Toast Container -->
      <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="false"></div>

      <!-- Loading Overlay -->
      <div id="loading-overlay" class="loading-overlay" aria-hidden="true" aria-busy="false">
        <div class="loading-spinner-container">
          <div class="loading-spinner"></div>
          <p id="loading-text" class="loading-text">Carregando...</p>
          <div class="loading-progress-container" role="progressbar" aria-valuemin="0" aria-valuemax="100"
            aria-valuenow="0">
            <div id="loading-progress-bar" class="loading-progress-bar"></div>
          </div>
        </div>
      </div>

      <!-- PWA Installation Banner -->
      <?!= include('PWA-Install-Instructions') ?>

      <!-- M√≥dulos JavaScript -->
      <?!= include('JS-Logger') ?>
      <?!= include('JS-DrawerManager') ?>
      <?!= include('JS-AuthManager') ?>
      <?!= include('JS-UserDrawer') ?>
      <?!= include('JS-SheetMapping') ?>
      <?!= include('JS-Navigation') ?>
      <?!= include('JS-MenuToggle') ?>
      <?!= include('JS-TabManager') ?>
      <?!= include('JS-Components') ?>
      <?!= include('JS-CRUD-Universal') ?>
      <?!= include('JS-FormHelpers') ?>
      <?!= include('JS-CustomFormsIntegration') ?>
      <?!= include('JS-DebugTools') ?>
      <?!= include('JS-CascadingLogic') ?>
      <?!= include('JS-FooterActions') ?>
      <?!= include('JS-Core') ?>
      <?!= include('JS-BusinessLogic') ?>
      <?!= include('JS-Events') ?>
      <?!= include('JS-DynamicDataLoader') ?>

      <!-- PWA Service Worker Registration -->
      <script>
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            // Registra o Service Worker com o caminho correto do Google Apps Script
            navigator.serviceWorker.register('?file=sw.js')
              .then(registration => {
                console.log('‚úÖ Service Worker registrado com sucesso:', registration.scope);
                console.log('üì± PWA pronto para instala√ß√£o!');

                // Verifica atualiza√ß√µes
                registration.addEventListener('updatefound', () => {
                  console.log('üîÑ Atualiza√ß√£o do Service Worker encontrada!');
                });
              })
              .catch(error => {
                console.error('‚ùå Falha ao registrar Service Worker:', error);
                console.log('‚ÑπÔ∏è A aplica√ß√£o continuar√° funcionando normalmente.');
              });
          });

          // Detecta quando o app est√° pronto para ser instalado
          let deferredPrompt;
          window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('üí° PWA pode ser instalado! Use o menu do navegador.');

            // Opcional: Mostrar bot√£o customizado de instala√ß√£o
            // showInstallButton();
          });

          // Detecta quando o app foi instalado
          window.addEventListener('appinstalled', () => {
            console.log('‚úÖ PWA instalado com sucesso!');
            deferredPrompt = null;
          });
        } else {
          console.warn('‚ö†Ô∏è Service Worker n√£o √© suportado neste navegador.');
        }
      </script>

      <!-- ========================================================================
 CRUD CONFIGURATIONS & INITIALIZATION
 ======================================================================== -->
      <script>
        /**
        * Configura√ß√£o CRUD para Alunos
        */
        const AlunosCRUDConfig = {
          sectionId: 'alunos',
          sheetName: 'Alunos',

          fields: [
            { name: 'Nome_Completo', label: 'Nome Completo', type: 'text', required: true },
            { name: 'RA_Aluno', label: 'RA do Aluno', type: 'text', required: true },
            { name: 'Data_Nascimento', label: 'Data de Nascimento', type: 'date', required: true },
            { name: 'CPF', label: 'CPF', type: 'text', required: true, placeholder: '000.000.000-00' },
            { name: 'RG', label: 'RG', type: 'text', required: false },
            { name: 'Escola', label: 'Escola', type: 'text', required: true },
            { name: 'Serie_Ano', label: 'S√©rie/Ano', type: 'text', required: true, placeholder: 'Ex: 8¬∫ Ano' },
            {
              name: 'Turno',
              label: 'Turno',
              type: 'select',
              required: true,
              options: [
                { value: 'Matutino', label: 'Matutino' },
                { value: 'Vespertino', label: 'Vespertino' },
                { value: 'Noturno', label: 'Noturno' },
                { value: 'Integral', label: 'Integral' }
              ]
            },
            { name: 'Endereco_Residencial', label: 'Endere√ßo Residencial', type: 'text', required: true },
            { name: 'CEP', label: 'CEP', type: 'text', required: true, placeholder: '00000-000' },
            { name: 'Bairro', label: 'Bairro', type: 'text', required: true },
            { name: 'ID_Rota', label: 'Rota', type: 'select', required: true, options: [] },
            { name: 'Ponto_Embarque', label: 'Ponto de Embarque', type: 'text', required: false },
            { name: 'Ponto_Desembarque', label: 'Ponto de Desembarque', type: 'text', required: false },
            { name: 'Responsavel1_Nome', label: 'Respons√°vel 1 - Nome', type: 'text', required: true },
            { name: 'Responsavel1_Telefone', label: 'Respons√°vel 1 - Telefone', type: 'tel', required: true, placeholder: '(00) 00000-0000' },
            { name: 'Responsavel2_Nome', label: 'Respons√°vel 2 - Nome', type: 'text', required: false },
            { name: 'Responsavel2_Telefone', label: 'Respons√°vel 2 - Telefone', type: 'tel', required: false, placeholder: '(00) 00000-0000' },
            {
              name: 'Necessidades_Especiais',
              label: 'Necessidades Especiais',
              type: 'select',
              required: false,
              options: [
                { value: 'N√£o', label: 'N√£o' },
                { value: 'Sim', label: 'Sim' }
              ]
            },
            {
              name: 'Status',
              label: 'Status',
              type: 'select',
              required: true,
              default: 'Ativo',
              options: [
                { value: 'Ativo', label: 'Ativo' },
                { value: 'Inativo', label: 'Inativo' },
                { value: 'Suspenso', label: 'Suspenso' },
                { value: 'Aguardando Vaga', label: 'Aguardando Vaga' }
              ]
            }
          ],

          tableConfig: {
            columns: [
              { field: 'Nome_Completo', label: 'Nome', sortable: true, searchable: true },
              { field: 'RA_Aluno', label: 'RA', sortable: true, searchable: true },
              { field: 'Escola', label: 'Escola', sortable: true, searchable: true },
              { field: 'Serie_Ano', label: 'S√©rie', sortable: false },
              { field: 'Turno', label: 'Turno', sortable: true },
              {
                field: 'Status',
                label: 'Status',
                sortable: true,
                render: (value) => {
                  const statusColors = {
                    'Ativo': 'success',
                    'Inativo': 'secondary',
                    'Suspenso': 'warning',
                    'Aguardando Vaga': 'info'
                  };
                  const color = statusColors[value] || 'secondary';
                  return `<span class="badge badge-${color}">${value}</span>`;
                }
              }
            ],
            pageSize: 10,
            searchPlaceholder: 'Buscar por nome, RA ou escola...'
          }
        };

        /**
        * Inicializa CRUD para Alunos
        */
        async function initAlunosCRUD() {
          try {
            const log = window.Logger || console;
            log.info('[Alunos] Inicializando CRUD...');

            // Carregar rotas para o dropdown
            const rotasResponse = await API.run('readRecords', { sheetName: 'Rotas' });
            if (rotasResponse && rotasResponse.success && rotasResponse.data) {
              const rotasField = AlunosCRUDConfig.fields.find(f => f.name === 'ID_Rota');
              if (rotasField) {
                rotasField.options = rotasResponse.data.map(rota => ({
                  value: rota.ID || rota.id,
                  label: `${rota.Nome_Rota || rota.Codigo_Rota || 'Rota'} - ${rota.Descricao || rota.Origem || ''}`
                }));
              }
            }

            // Inicializar CRUD Universal
            await CRUDManagerUniversal.init('alunos', AlunosCRUDConfig);

            log.info('[Alunos] ‚úÖ CRUD inicializado com sucesso!');
            return { success: true };
          } catch (error) {
            const log = window.Logger || console;
            log.error('[Alunos] ‚ùå Erro ao inicializar CRUD:', error);
            if (window.ToastManager) {
              ToastManager.show('Falha ao carregar m√≥dulo de alunos', 'error');
            }
            return { success: false, error: error.message };
          }
        }

        /**
        * Sistema de inicializa√ß√£o autom√°tica de CRUDs
        */
        document.addEventListener('DOMContentLoaded', async () => {
          if (window.Logger) {
            Logger.info('[CRUD Init] Sistema de inicializa√ß√£o carregado');
          } else {
            console.log('[CRUD Init] Sistema de inicializa√ß√£o carregado');
          }

          // Observer para detectar mudan√ßas de se√ß√£o
          const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
              if (mutation.attributeName === 'class') {
                const section = mutation.target;
                if (section.classList.contains('section') && !section.classList.contains('hidden')) {
                  const sectionId = section.id.replace('-section', '');
                  initCRUDForSection(sectionId);
                }
              }
            });
          });

          // Observar todas as se√ß√µes
          document.querySelectorAll('.section').forEach(section => {
            observer.observe(section, { attributes: true });
          });

          // Inicializar se√ß√£o ativa atual
          const activeSection = document.querySelector('.section:not(.hidden)');
          if (activeSection) {
            const sectionId = activeSection.id.replace('-section', '');
            initCRUDForSection(sectionId);
          }
        });

        /**
        * Inicializa CRUD para uma se√ß√£o espec√≠fica
        */
        async function initCRUDForSection(sectionId) {
          const log = window.Logger || console;
          log.info(`[CRUD Init] Tentando inicializar CRUD para: ${sectionId}`);

          switch (sectionId) {
            case 'alunos':
              if (!CRUDManagerUniversal.instances['alunos']) {
                await initAlunosCRUD();
              }
              break;
            // Adicionar outros cases aqui conforme novos CRUDs forem criados
            default:
              if (log.debug) {
                log.debug(`[CRUD Init] Nenhum CRUD configurado para se√ß√£o: ${sectionId}`);
              } else {
                console.log(`[CRUD Init] Nenhum CRUD configurado para se√ß√£o: ${sectionId}`);
              }
          }
        }

        // Expor fun√ß√µes globalmente
        window.initAlunosCRUD = initAlunosCRUD;
        window.initCRUDForSection = initCRUDForSection;
      </script>

      <!-- PWA Service Worker Registration -->
      <script>
        // Registro do Service Worker para funcionalidade PWA
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', async () => {
            try {
              // Registrar o service worker servido pelo Google Apps Script
              const registration = await navigator.serviceWorker.register('?file=sw.js', {
                scope: './'
              });

              console.log('[PWA] ‚úÖ Service Worker registrado com sucesso:', registration.scope);

              // Verificar atualiza√ß√µes do service worker
              registration.addEventListener('updatefound', () => {
                const newWorker = registration.installing;
                console.log('[PWA] üîÑ Nova vers√£o do Service Worker detectada');

                newWorker.addEventListener('statechange', () => {
                  if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                    // Nova vers√£o dispon√≠vel, notificar usu√°rio
                    if (window.ToastManager) {
                      ToastManager.show('Nova vers√£o dispon√≠vel! Recarregue a p√°gina.', 'info', 5000);
                    }
                    console.log('[PWA] üì¶ Nova vers√£o instalada e aguardando ativa√ß√£o');
                  }
                });
              });

              // Verificar por atualiza√ß√µes a cada 1 hora
              setInterval(() => {
                registration.update();
              }, 60 * 60 * 1000);

            } catch (error) {
              console.error('[PWA] ‚ùå Falha ao registrar Service Worker:', error);
            }
          });

          // Detectar quando o app est√° rodando como PWA instalado
          window.addEventListener('DOMContentLoaded', () => {
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches
              || window.navigator.standalone
              || document.referrer.includes('android-app://');

            if (isStandalone) {
              console.log('[PWA] üì± App rodando como PWA instalado');
              document.body.classList.add('pwa-mode');
            }
          });
        } else {
          console.warn('[PWA] ‚ö†Ô∏è Service Worker n√£o suportado neste navegador');
        }
      </script>

      <!--============================================================================-->
      <!-- ARQUIVO: main-menu-mobile-grid-4x6.html -->
      <!--============================================================================-->

      <!--
 ============================================================================
 MENU MOBILE GRID 4x6 - INSPIRADO EM APPS NATIVOS (SAMSUNG S20 OPTIMIZED)
 ============================================================================
 Grid 4 colunas x 6 linhas com 24 bot√µes
 - Modo Compacto (padr√£o): Apenas √≠cones grandes
 - Modo Expandido (toggle): √çcones + t√≠tulos
 - Fullscreen overlay ocupando quase toda a tela
 - Touch targets 48px+ (WCAG 2.1 AA)
 - Safe areas para notch/Dynamic Island
 ============================================================================
-->

      <style>
        /* ===== MENU MOBILE OVERLAY ===== */
        .mobile-menu-overlay {
          position: fixed;
          inset: 0;
          background: var(--md-sys-color-surface, #121212);
          z-index: var(--z-modal, 2000);
          display: flex;
          flex-direction: column;
          transform: translateY(-100%);
          transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);
          padding: max(var(--space-2), env(safe-area-inset-top)) max(var(--space-2), env(safe-area-inset-right)) max(var(--space-2), env(safe-area-inset-bottom)) max(var(--space-2), env(safe-area-inset-left));
          overflow: hidden;
        }

        .mobile-menu-overlay.active {
          transform: translateY(0);
        }

        /* ===== HEADER DO MENU MOBILE ===== */
        .mobile-menu-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--space-3) var(--space-2);
          border-bottom: 1px solid var(--md-sys-color-outline-variant, #333);
          flex-shrink: 0;
        }

        .mobile-menu-title {
          display: flex;
          align-items: center;
          gap: var(--space-3);
          font-size: 1.8rem;
          font-weight: 700;
          color: var(--md-sys-color-primary, #1e88e5);
        }

        .mobile-menu-close {
          min-width: 48px;
          min-height: 48px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: transparent;
          border: none;
          color: var(--md-sys-color-on-surface, #fff);
          font-size: 2.4rem;
          cursor: pointer;
          border-radius: var(--radius-full, 50%);
          transition: background-color 200ms ease;
        }

        .mobile-menu-close:hover {
          background-color: var(--md-sys-color-surface-container-high, #2a2a2a);
        }

        .mobile-menu-close:active {
          transform: scale(0.95);
        }

        /* ===== GRID 4x6 ===== */
        .mobile-menu-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: var(--space-2);
          padding: var(--space-3) var(--space-2);
          flex-grow: 1;
          align-content: start;
          overflow-y: auto;
          -webkit-overflow-scrolling: touch;
        }

        /* ===== BOT√ïES DO MENU (MODO COMPACTO - PADR√ÉO) ===== */
        .mobile-menu-btn {
          aspect-ratio: 1;
          min-height: 72px;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: var(--space-1);
          background: var(--md-sys-color-surface-container, #1e1e1e);
          border: 1px solid var(--md-sys-color-outline-variant, #333);
          border-radius: var(--radius-lg, 12px);
          color: var(--md-sys-color-on-surface, #fff);
          cursor: pointer;
          transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          overflow: hidden;
          padding: var(--space-2);
        }

        .mobile-menu-btn:hover {
          transform: translateY(-4px) scale(1.03);
          box-shadow: var(--shadow-xl);
          background: var(--md-sys-color-surface-container-high, #2a2a2a);
        }

        .mobile-menu-btn:active {
          transform: translateY(-2px) scale(1.01);
        }

        .mobile-menu-btn.active {
          background: var(--md-sys-color-primary, #1e88e5);
          color: var(--md-sys-color-on-primary, #fff);
          border-color: var(--md-sys-color-primary, #1e88e5);
        }

        .mobile-menu-btn.active::after {
          content: '';
          position: absolute;
          top: 6px;
          right: 6px;
          width: 10px;
          height: 10px;
          background: #fff;
          border-radius: 50%;
          animation: pulse 2s infinite;
        }

        @keyframes pulse {

          0%,
          100% {
            opacity: 1;
            transform: scale(1);
          }

          50% {
            opacity: 0.7;
            transform: scale(1.2);
          }
        }

        /* √çcones grandes no modo compacto */
        .mobile-menu-btn i {
          font-size: 2.8rem;
          transition: transform 200ms ease;
        }

        .mobile-menu-btn:hover i {
          transform: scale(1.1);
        }

        /* Textos ocultos no modo compacto (padr√£o) */
        .mobile-menu-btn span {
          display: none;
        }

        /* ===== MODO EXPANDIDO (COM TEXTOS) ===== */
        .mobile-menu-overlay.expanded .mobile-menu-btn {
          flex-direction: row;
          justify-content: flex-start;
          aspect-ratio: auto;
          min-height: 56px;
          padding: var(--space-3);
        }

        .mobile-menu-overlay.expanded .mobile-menu-btn i {
          font-size: 2rem;
          width: 24px;
          text-align: center;
          flex-shrink: 0;
        }

        .mobile-menu-overlay.expanded .mobile-menu-btn span {
          display: block;
          font-size: 1.3rem;
          font-weight: 600;
          position: absolute;
          bottom: max(var(--space-3), env(safe-area-inset-bottom));
          right: var(--space-4);
          min-width: 56px;
          min-height: 56px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: var(--md-sys-color-primary, #1e88e5);
          color: var(--md-sys-color-on-primary, #fff);
          border: none;
          border-radius: var(--radius-full, 50%);
          font-size: 2rem;
          cursor: pointer;
          box-shadow: var(--shadow-lg);
          z-index: 10;
          transition: all 200ms ease;
        }

        .mobile-menu-toggle:hover {
          transform: scale(1.1);
          box-shadow: var(--shadow-xl);
        }

        .mobile-menu-toggle:active {
          transform: scale(0.95);
        }

        /* Esconde no desktop */
        @media (min-width: 992px) {
          .mobile-menu-overlay {
            display: none !important;
          }
        }

        /* Otimiza√ß√µes Samsung S20 (360px) */
        @media (max-width: 360px) {
          .mobile-menu-btn {
            min-height: 64px;
          }

          .mobile-menu-btn i {
            font-size: 2.4rem;
          }

          .mobile-menu-grid {
            gap: var(--space-1);
          }
        }

        /* Landscape mobile */
        @media (max-height: 500px) and (orientation: landscape) {
          .mobile-menu-grid {
            padding: var(--space-2);
          }

          .mobile-menu-btn {
            min-height: 56px;
          }
        }
      </style>

      <!-- ===== MENU MOBILE OVERLAY ===== -->
      <div id="mobile-menu-overlay" class="mobile-menu-overlay" role="navigation" aria-label="Menu principal mobile"
        aria-hidden="true">
        <!-- Header -->
        <div class="mobile-menu-header">
          <div class="mobile-menu-title">
            <i class="fas fa-shuttle-van"></i>
            <span>TE-DF</span>
          </div>
          <button class="mobile-menu-close" aria-label="Fechar menu" data-action="close">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <!-- Grid 4x6 com 24 bot√µes -->
        <div class="w-full mobile-menu-grid">
          <button class="mobile-menu-btn" data-action="dashboard" aria-label="Dashboard" title="Dashboard">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
          </button>

          <button class="mobile-menu-btn" data-action="frequencia" aria-label="Frequ√™ncia"
            title="Aferi√ß√£o de Frequ√™ncia">
            <i class="fas fa-calendar-check"></i>
            <span>Frequ√™ncia</span>
          </button>

          <button class="mobile-menu-btn" data-action="rotas" aria-label="Rotas" title="Otimiza√ß√£o de Rotas">
            <i class="fas fa-route"></i>
            <span>Rotas</span>
          </button>

          <button class="mobile-menu-btn" data-action="veiculos" aria-label="Ve√≠culos" title="Gest√£o de Ve√≠culos">
            <i class="fas fa-bus"></i>
            <span>Ve√≠culos</span>
          </button>

          <button class="mobile-menu-btn" data-action="predictive-maintenance" aria-label="Manuten√ß√£o"
            title="Manuten√ß√£o Preditiva">
            <i class="fas fa-tools"></i>
            <span>Manuten√ß√£o</span>
          </button>

          <button class="mobile-menu-btn" data-action="utilizacao-frota" aria-label="Frota" title="Utiliza√ß√£o da Frota">
            <i class="fas fa-chart-pie"></i>
            <span>Frota</span>
          </button>

          <button class="mobile-menu-btn" data-action="mapa" aria-label="Mapa" title="Visualiza√ß√£o no Mapa">
            <i class="fas fa-map-marked-alt"></i>
            <span>Mapa</span>
          </button>

          <button class="mobile-menu-btn" data-action="tracking" aria-label="Rastreamento"
            title="Rastreamento em Tempo Real">
            <i class="fas fa-broadcast-tower"></i>
            <span>Rastreamento</span>
          </button>

          <button class="mobile-menu-btn" data-action="alunos" aria-label="Alunos" title="Gest√£o de Alunos">
            <i class="fas fa-users"></i>
            <span>Alunos</span>
          </button>

          <button class="mobile-menu-btn" data-action="pessoal" aria-label="Pessoal" title="Gest√£o de Pessoal">
            <i class="fas fa-user-tie"></i>
            <span>Pessoal</span>
          </button>

          <button class="mobile-menu-btn" data-action="faturamentos" aria-label="Faturamentos"
            title="Gest√£o de Faturamentos">
            <i class="fas fa-file-invoice-dollar"></i>
            <span>Faturamentos</span>
          </button>

          <button class="mobile-menu-btn" data-action="atestos" aria-label="Atestos" title="Atestos Administrativos">
            <i class="fas fa-certificate"></i>
            <span>Atestos</span>
          </button>

          <button class="mobile-menu-btn" data-action="relatorios" aria-label="Relat√≥rios"
            title="Relat√≥rios Gerenciais">
            <i class="fas fa-chart-bar"></i>
            <span>Relat√≥rios</span>
          </button>

          <button class="mobile-menu-btn" data-action="ai-reports" aria-label="IA" title="Relat√≥rios com IA">
            <i class="fas fa-robot"></i>
            <span>IA</span>
          </button>

          <button class="mobile-menu-btn" data-action="engagement" aria-label="Engajamento"
            title="Engajamento de Alunos">
            <i class="fas fa-heart"></i>
            <span>Engajamento</span>
          </button>

          <button class="mobile-menu-btn" data-action="incidentes" aria-label="Incidentes"
            title="Protocolo de Incidentes">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Incidentes</span>
          </button>

          <button class="mobile-menu-btn" data-action="whatsapp" aria-label="WhatsApp" title="Comunica√ß√£o WhatsApp">
            <i class="fab fa-whatsapp"></i>
            <span>WhatsApp</span>
          </button>

          <button class="mobile-menu-btn" data-action="kanban" aria-label="Kanban" title="Kanban e Slides">
            <i class="fas fa-columns"></i>
            <span>Kanban</span>
          </button>

          <button class="mobile-menu-btn" data-action="compliance-validation" aria-label="Conformidade"
            title="Valida√ß√£o de Conformidade">
            <i class="fas fa-shield-alt"></i>
            <span>Conformidade</span>
          </button>

          <button class="mobile-menu-btn" data-action="mcp-server" aria-label="MCP" title="MCP Server">
            <i class="fas fa-network-wired"></i>
            <span>MCP</span>
          </button>

          <button class="mobile-menu-btn" data-action="automacoes" aria-label="Automa√ß√µes"
            title="Automa√ß√µes Inteligentes">
            <i class="fas fa-magic"></i>
            <span>Automa√ß√µes</span>
          </button>

          <button class="mobile-menu-btn" data-action="configuracoes" aria-label="Configura√ß√µes"
            title="Configura√ß√µes do Sistema">
            <i class="fas fa-cog"></i>
            <span>Configura√ß√µes</span>
          </button>

          <button class="mobile-menu-btn" data-action="eventos" aria-label="Eventos" title="Gest√£o de Eventos">
            <i class="fas fa-calendar-alt"></i>
            <span>Eventos</span>
          </button>

          <button class="mobile-menu-btn" data-action="teste-extensao" aria-label="Testes" title="Teste de Extens√£o">
            <i class="fas fa-flask"></i>
            <span>Testes</span>
          </button>
        </div>

        <!-- Bot√£o flutuante para alternar modo compacto/expandido -->
        <button class="mobile-menu-toggle" aria-label="Alternar modo expandido" title="Mostrar/Ocultar t√≠tulos"
          data-action="toggle-mode">
          <i class="fas fa-bars"></i>
        </button>
      </div>

      <script>
        (function () {
          'use strict';

          function initMobileMenuGrid() {
            const overlay = document.getElementById('mobile-menu-overlay');
            if (!overlay || overlay._initialized) return;

            // Restaura √∫ltimo estado ativo
            const lastSection = localStorage.getItem('app.menu.last') || 'dashboard';
            const lastButton = overlay.querySelector(`button[data-action="${lastSection}"]`);
            if (lastButton && !lastButton.dataset.action.includes('close') && !lastButton.dataset.action.includes('toggle')) {
              lastButton.classList.add('active');
            }

            // Restaura modo expandido/compacto
            const isExpanded = localStorage.getItem('app.mobile-menu.expanded') === 'true';
            if (isExpanded) {
              overlay.classList.add('expanded');
            }

            // Event delegation para todos os cliques
            overlay.addEventListener('click', (e) => {
              const btn = e.target.closest('button[data-action]');
              if (!btn) return;

              const action = btn.dataset.action;

              // Fechar menu
              if (action === 'close') {
                closeMobileMenu();
                return;
              }

              // Toggle modo expandido/compacto
              if (action === 'toggle-mode') {
                const expanded = overlay.classList.toggle('expanded');
                localStorage.setItem('app.mobile-menu.expanded', expanded);
                return;
              }

              // Navega√ß√£o
              overlay.querySelectorAll('.mobile-menu-btn.active').forEach(b => b.classList.remove('active'));
              btn.classList.add('active');
              localStorage.setItem('app.menu.last', action);

              // Dispara evento customizado
              document.dispatchEvent(new CustomEvent('menuAction', {
                detail: { actionId: action, source: 'mobile-grid' }
              }));

              // Fecha o menu ap√≥s 300ms (tempo da anima√ß√£o)
              setTimeout(() => closeMobileMenu(), 300);
            });

            // Fecha com ESC
            document.addEventListener('keydown', (e) => {
              if (e.key === 'Escape' && overlay.classList.contains('active')) {
                closeMobileMenu();
              }
            });

            overlay._initialized = true;
            console.log('[Mobile Menu Grid 4x6] Inicializado');
          }

          // Fun√ß√£o para abrir o menu mobile
          window.openMobileMenu = function () {
            const overlay = document.getElementById('mobile-menu-overlay');
            if (!overlay) return;

            overlay.classList.add('active');
            overlay.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
          };

          // Fun√ß√£o para fechar o menu mobile
          window.closeMobileMenu = function () {
            const overlay = document.getElementById('mobile-menu-overlay');
            if (!overlay) return;

            overlay.classList.remove('active');
            overlay.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
          };

          // Inicializa quando o DOM estiver pronto
          if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initMobileMenuGrid);
          } else {
            initMobileMenuGrid();
          }
        })();
      </script>

      <!--============================================================================-->
      <!-- ARQUIVO: main-menu.html -->
      <!--============================================================================-->

      <!--
 ============================================================================
 MAIN-MENU.HTML - Componente de Menu Principal (SIDEBAR DESKTOP)
 ============================================================================
 Menu lateral simples para desktop
 ============================================================================
-->

      <style>
        /* Menu lateral para desktop */
        .app-main-menu {
          position: fixed;
          left: 0;
          top: 0;
          bottom: 0;
          width: 250px;
          background-color: var(--md-sys-color-surface-container-low, #1e1e1e);
          border-right: 1px solid var(--md-sys-color-outline-variant, #333);
          display: flex;
          flex-direction: column;
          z-index: var(--z-modal, 1050);
          transition: transform 300ms var(--ease-in-out), width 300ms var(--ease-in-out);
          overflow-x: hidden;
        }

        .app-main-menu.collapsed {
          transform: translateX(-200px);
          width: 50px;
        }

        .app-main-menu .menu-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--space-3, 1rem) var(--space-2, 0.5rem);
          border-bottom: 1px solid var(--md-sys-color-outline-variant, #333);
          flex-shrink: 0;
        }

        .app-main-menu .menu-title {
          display: flex;
          align-items: center;
          gap: var(--space-3, 1rem);
          font-size: 1.2rem;
          font-weight: 600;
          color: var(--md-sys-color-primary, #6366f1);
          white-space: nowrap;
          opacity: 1;
          transition: opacity 150ms ease-in-out;
        }

        .app-main-menu.collapsed .menu-title span {
          opacity: 0;
        }

        .app-main-menu .menu-toggle {
          background: transparent;
          border: none;
          color: var(--md-sys-color-on-surface-variant, #999);
          cursor: pointer;
          padding: var(--space-2, 0.5rem);
          border-radius: var(--radius-full, 50%);
          transition: background-color 150ms ease;
        }

        .app-main-menu .menu-toggle:hover {
          background-color: var(--md-sys-color-surface-container-high, #2a2a2a);
        }

        .app-main-menu .menu-list {
          list-style: none;
          padding: var(--space-2, 0.5rem) 0;
          margin: 0;
          overflow-y: auto;
          flex-grow: 1;
        }

        .app-main-menu .menu-item {
          display: flex;
          align-items: center;
          gap: var(--space-3, 1rem);
          padding: var(--space-3, 1rem) var(--space-4, 1.5rem);
          margin: var(--space-1, 0.25rem) var(--space-2, 0.5rem);
          border-radius: var(--radius-base, 0.5rem);
          color: var(--md-sys-color-on-surface-variant, #999);
          text-decoration: none;
          white-space: nowrap;
          cursor: pointer;
          background: none;
          border: none;
          width: calc(100% - 2 * var(--space-2, 0.5rem));
          text-align: left;
          transition: background-color 150ms ease, color 150ms ease;
        }

        .app-main-menu .menu-item:hover {
          background-color: var(--md-sys-color-surface-container-high, #2a2a2a);
          color: var(--md-sys-color-on-surface, #fff);
        }

        .app-main-menu .menu-item.active {
          background-color: var(--md-sys-color-primary-container, #3730a3);
          color: var(--md-sys-color-on-primary-container, #fff);
          font-weight: 600;
        }

        .app-main-menu .menu-item i {
          font-size: 1.1rem;
          width: 20px;
          text-align: center;
        }

        /* Esconde no mobile por padr√£o */
        @media (max-width: 991px) {
          .app-main-menu {
            display: none;
          }
        }
      </style>

      <div id="app-main-menu" class="app-main-menu" role="navigation" aria-label="Menu principal">
        <div class="menu-header">
          <div class="menu-title">
            <i class="fas fa-shuttle-van"></i>
            <span>Menu</span>
          </div>
          <button class="menu-toggle" aria-label="Alternar menu" title="Alternar menu (Alt+M)" data-action="toggle">
            <i class="fas fa-bars"></i>
          </button>
        </div>
        <ul class="menu-list" role="menubar">
          <li role="none"><button role="menuitem" data-action="dashboard" class="menu-item" tabindex="0"><i
                class="fas fa-tachometer-alt"></i> <span>Dashboard</span></button></li>
          <li role="none"><button role="menuitem" data-action="frequencia" class="menu-item" tabindex="0"><i
                class="fas fa-calendar-check"></i> <span>Aferi√ß√£o de Frequ√™ncia</span></button></li>
          <li role="none"><button role="menuitem" data-action="rotas" class="menu-item" tabindex="0"><i
                class="fas fa-route"></i> <span>Otimiza√ß√£o de Rotas</span></button></li>
          <li role="none"><button role="menuitem" data-action="veiculos" class="menu-item" tabindex="0"><i
                class="fas fa-bus"></i> <span>Ve√≠culos</span></button></li>
          <li role="none"><button role="menuitem" data-action="predictive-maintenance" class="menu-item" tabindex="0"><i
                class="fas fa-tools"></i> <span>Manuten√ß√£o Preditiva</span></button></li>
          <li role="none"><button role="menuitem" data-action="utilizacao-frota" class="menu-item" tabindex="0"><i
                class="fas fa-chart-pie"></i> <span>Utiliza√ß√£o da Frota</span></button></li>
          <li role="none"><button role="menuitem" data-action="mapa" class="menu-item" tabindex="0"><i
                class="fas fa-map-marked-alt"></i> <span>Mapa</span></button></li>
          <li role="none"><button role="menuitem" data-action="tracking" class="menu-item" tabindex="0"><i
                class="fas fa-broadcast-tower"></i> <span>Rastreamento</span></button></li>
          <li role="none"><button role="menuitem" data-action="alunos" class="menu-item" tabindex="0"><i
                class="fas fa-users"></i> <span>Gest√£o de Alunos</span></button></li>
          <li role="none"><button role="menuitem" data-action="pessoal" class="menu-item" tabindex="0"><i
                class="fas fa-user-tie"></i> <span>Gest√£o de Pessoal</span></button></li>
          <li role="none"><button role="menuitem" data-action="faturamentos" class="menu-item" tabindex="0"><i
                class="fas fa-file-invoice-dollar"></i> <span>Faturamentos</span></button></li>
          <li role="none"><button role="menuitem" data-action="atestos" class="menu-item" tabindex="0"><i
                class="fas fa-certificate"></i> <span>Atestos Administrativos</span></button></li>
          <li role="none"><button role="menuitem" data-action="relatorios" class="menu-item" tabindex="0"><i
                class="fas fa-chart-bar"></i> <span>Relat√≥rios Gerenciais</span></button></li>
          <li role="none"><button role="menuitem" data-action="ai-reports" class="menu-item" tabindex="0"><i
                class="fas fa-robot"></i> <span>Relat√≥rios IA</span></button></li>
          <li role="none"><button role="menuitem" data-action="engagement" class="menu-item" tabindex="0"><i
                class="fas fa-heart"></i> <span>Engajamento</span></button></li>
          <li role="none"><button role="menuitem" data-action="incidentes" class="menu-item" tabindex="0"><i
                class="fas fa-exclamation-triangle"></i> <span>Protocolo de Incidentes</span></button></li>
          <li role="none"><button role="menuitem" data-action="whatsapp" class="menu-item" tabindex="0"><i
                class="fab fa-whatsapp"></i> <span>Comunica√ß√£o WhatsApp</span></button></li>
          <li role="none"><button role="menuitem" data-action="kanban" class="menu-item" tabindex="0"><i
                class="fas fa-columns"></i> <span>Kanban e Slides</span></button></li>
          <li role="none"><button role="menuitem" data-action="compliance-validation" class="menu-item" tabindex="0"><i
                class="fas fa-shield-alt"></i> <span>Conformidade</span></button></li>
          <li role="none"><button role="menuitem" data-action="mcp-server" class="menu-item" tabindex="0"><i
                class="fas fa-network-wired"></i> <span>MCP Server</span></button></li>
          <li role="none"><button role="menuitem" data-action="automacoes" class="menu-item" tabindex="0"><i
                class="fas fa-magic"></i> <span>Automa√ß√µes</span></button></li>
          <li role="none"><button role="menuitem" data-action="configuracoes" class="menu-item" tabindex="0"><i
                class="fas fa-cog"></i> <span>Configura√ß√µes</span></button></li>
          <li role="none"><button role="menuitem" data-action="eventos" class="menu-item" tabindex="0"><i
                class="fas fa-calendar-alt"></i> <span>Eventos</span></button></li>
          <li role="none"><button role="menuitem" data-action="teste-extensao" class="menu-item" tabindex="0"><i
                class="fas fa-flask"></i> <span>Teste Extens√£o</span></button></li>
        </ul>
      </div>

      <script>
        function renderMainMenu() {
          if (document.querySelector('#app-main-menu')?._initialized) return;

          const nav = document.getElementById('app-main-menu');
          if (!nav) return;

          // Restaura estado (colapsado/expandido)
          const isCollapsed = localStorage.getItem('app.menu.collapsed') === 'true';
          nav.classList.toggle('collapsed', isCollapsed);

          // Restaura √∫ltima se√ß√£o ativa
          const lastSection = localStorage.getItem('app.menu.last') || 'dashboard';
          const lastButton = nav.querySelector(`button[data-action="${lastSection}"]`);
          if (lastButton) {
            lastButton.classList.add('active');
          }

          nav.addEventListener('click', (ev) => {
            const btn = ev.target.closest('button[data-action]');
            if (!btn) return;

            const action = btn.dataset.action;

            if (action === 'toggle') {
              const collapsed = nav.classList.toggle('collapsed');
              localStorage.setItem('app.menu.collapsed', collapsed);
              return;
            }

            // Remove 'active' de outros bot√µes e adiciona no clicado
            nav.querySelectorAll('.menu-item.active').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            localStorage.setItem('app.menu.last', action);

            // Dispara evento p√∫blico
            const menuEvent = new CustomEvent('menuAction', { detail: { actionId: action } });
            document.dispatchEvent(menuEvent);
          });

          // Atalho de teclado
          document.addEventListener('keydown', (e) => {
            if (e.altKey && e.key.toLowerCase() === 'm') {
              nav.classList.toggle('collapsed');
              e.preventDefault();
            }
          });

          nav._initialized = true;
          console.log('[Menu] Menu principal inicializado');
        }

        window.renderMainMenu = renderMainMenu;
        document.addEventListener('DOMContentLoaded', renderMainMenu);
      </script>